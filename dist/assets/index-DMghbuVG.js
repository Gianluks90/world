(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $c(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Xt={},As=[],Gn=()=>{},ty=()=>!1,eu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),qc=n=>n.startsWith("onUpdate:"),He=Object.assign,Wc=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},ey=Object.prototype.hasOwnProperty,Wt=(n,t)=>ey.call(n,t),Pt=Array.isArray,Ss=n=>nu(n)==="[object Map]",zp=n=>nu(n)==="[object Set]",Rt=n=>typeof n=="function",Pe=n=>typeof n=="string",ki=n=>typeof n=="symbol",ce=n=>n!==null&&typeof n=="object",jp=n=>(ce(n)||Rt(n))&&Rt(n.then)&&Rt(n.catch),Hp=Object.prototype.toString,nu=n=>Hp.call(n),ny=n=>nu(n).slice(8,-1),$p=n=>nu(n)==="[object Object]",Zc=n=>Pe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Vo=$c(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),iu=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},iy=/-(\w)/g,rr=iu(n=>n.replace(iy,(t,e)=>e?e.toUpperCase():"")),ry=/\B([A-Z])/g,Hr=iu(n=>n.replace(ry,"-$1").toLowerCase()),qp=iu(n=>n.charAt(0).toUpperCase()+n.slice(1)),Nu=iu(n=>n?`on${qp(n)}`:""),Xi=(n,t)=>!Object.is(n,t),hl=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},sc=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},oc=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let xf;const ru=()=>xf||(xf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gc(n){if(Pt(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=Pe(i)?ly(i):Gc(i);if(s)for(const a in s)t[a]=s[a]}return t}else if(Pe(n)||ce(n))return n}const sy=/;(?![^(]*\))/g,oy=/:([^]+)/,ay=/\/\*[^]*?\*\//g;function ly(n){const t={};return n.replace(ay,"").split(sy).forEach(e=>{if(e){const i=e.split(oy);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Kc(n){let t="";if(Pe(n))t=n;else if(Pt(n))for(let e=0;e<n.length;e++){const i=Kc(n[e]);i&&(t+=i+" ")}else if(ce(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const uy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cy=$c(uy);function Wp(n){return!!n||n===""}const Zp=n=>!!(n&&n.__v_isRef===!0),fl=n=>Pe(n)?n:n==null?"":Pt(n)||ce(n)&&(n.toString===Hp||!Rt(n.toString))?Zp(n)?fl(n.value):JSON.stringify(n,Gp,2):String(n),Gp=(n,t)=>Zp(t)?Gp(n,t.value):Ss(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,s],a)=>(e[Vu(i,a)+" =>"]=s,e),{})}:zp(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Vu(e))}:ki(t)?Vu(t):ce(t)&&!Pt(t)&&!$p(t)?String(t):t,Vu=(n,t="")=>{var e;return ki(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ve;class Kp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ve,!t&&Ve&&(this.index=(Ve.scopes||(Ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ve;try{return Ve=this,t()}finally{Ve=e}}}on(){++this._on===1&&(this.prevScope=Ve,Ve=this)}off(){this._on>0&&--this._on===0&&(Ve=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Qp(n){return new Kp(n)}function Jp(){return Ve}function hy(n,t=!1){Ve&&Ve.cleanups.push(n)}let Yt;const Fu=new WeakSet;class Xp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ve&&Ve.active&&Ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fu.has(this)&&(Fu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||tm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lf(this),em(this);const t=Yt,e=Dn;Yt=this,Dn=!0;try{return this.fn()}finally{nm(this),Yt=t,Dn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xc(t);this.deps=this.depsTail=void 0,Lf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ac(this)&&this.run()}get dirty(){return ac(this)}}let Yp=0,Fo,Bo;function tm(n,t=!1){if(n.flags|=8,t){n.next=Bo,Bo=n;return}n.next=Fo,Fo=n}function Qc(){Yp++}function Jc(){if(--Yp>0)return;if(Bo){let t=Bo;for(Bo=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Fo;){let t=Fo;for(Fo=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function em(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function nm(n){let t,e=n.depsTail,i=e;for(;i;){const s=i.prevDep;i.version===-1?(i===e&&(e=s),Xc(i),fy(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=t,n.depsTail=e}function ac(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(im(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function im(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Jo)||(n.globalVersion=Jo,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!ac(n))))return;n.flags|=2;const t=n.dep,e=Yt,i=Dn;Yt=n,Dn=!0;try{em(n);const s=n.fn(n._value);(t.version===0||Xi(s,n._value))&&(n.flags|=128,n._value=s,t.version++)}catch(s){throw t.version++,s}finally{Yt=e,Dn=i,nm(n),n.flags&=-3}}function Xc(n,t=!1){const{dep:e,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),e.subs===n&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let a=e.computed.deps;a;a=a.nextDep)Xc(a,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function fy(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Dn=!0;const rm=[];function Pi(){rm.push(Dn),Dn=!1}function Ai(){const n=rm.pop();Dn=n===void 0?!0:n}function Lf(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Yt;Yt=void 0;try{t()}finally{Yt=e}}}let Jo=0;class dy{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Yt||!Dn||Yt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Yt)e=this.activeLink=new dy(Yt,this),Yt.deps?(e.prevDep=Yt.depsTail,Yt.depsTail.nextDep=e,Yt.depsTail=e):Yt.deps=Yt.depsTail=e,sm(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=Yt.depsTail,e.nextDep=void 0,Yt.depsTail.nextDep=e,Yt.depsTail=e,Yt.deps===e&&(Yt.deps=i)}return e}trigger(t){this.version++,Jo++,this.notify(t)}notify(t){Qc();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Jc()}}}function sm(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)sm(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Cl=new WeakMap,Rr=Symbol(""),lc=Symbol(""),Xo=Symbol("");function Ue(n,t,e){if(Dn&&Yt){let i=Cl.get(n);i||Cl.set(n,i=new Map);let s=i.get(e);s||(i.set(e,s=new Yc),s.map=i,s.key=e),s.track()}}function yi(n,t,e,i,s,a){const u=Cl.get(n);if(!u){Jo++;return}const h=d=>{d&&d.trigger()};if(Qc(),t==="clear")u.forEach(h);else{const d=Pt(n),g=d&&Zc(e);if(d&&e==="length"){const v=Number(i);u.forEach((w,E)=>{(E==="length"||E===Xo||!ki(E)&&E>=v)&&h(w)})}else switch((e!==void 0||u.has(void 0))&&h(u.get(e)),g&&h(u.get(Xo)),t){case"add":d?g&&h(u.get("length")):(h(u.get(Rr)),Ss(n)&&h(u.get(lc)));break;case"delete":d||(h(u.get(Rr)),Ss(n)&&h(u.get(lc)));break;case"set":Ss(n)&&h(u.get(Rr));break}}Jc()}function py(n,t){const e=Cl.get(n);return e&&e.get(t)}function vs(n){const t=qt(n);return t===n?t:(Ue(t,"iterate",Xo),Nn(n)?t:t.map(Ke))}function th(n){return Ue(n=qt(n),"iterate",Xo),n}const my={__proto__:null,[Symbol.iterator](){return Bu(this,Symbol.iterator,Ke)},concat(...n){return vs(this).concat(...n.map(t=>Pt(t)?vs(t):t))},entries(){return Bu(this,"entries",n=>(n[1]=Ke(n[1]),n))},every(n,t){return _i(this,"every",n,t,void 0,arguments)},filter(n,t){return _i(this,"filter",n,t,e=>e.map(Ke),arguments)},find(n,t){return _i(this,"find",n,t,Ke,arguments)},findIndex(n,t){return _i(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return _i(this,"findLast",n,t,Ke,arguments)},findLastIndex(n,t){return _i(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return _i(this,"forEach",n,t,void 0,arguments)},includes(...n){return Uu(this,"includes",n)},indexOf(...n){return Uu(this,"indexOf",n)},join(n){return vs(this).join(n)},lastIndexOf(...n){return Uu(this,"lastIndexOf",n)},map(n,t){return _i(this,"map",n,t,void 0,arguments)},pop(){return Co(this,"pop")},push(...n){return Co(this,"push",n)},reduce(n,...t){return kf(this,"reduce",n,t)},reduceRight(n,...t){return kf(this,"reduceRight",n,t)},shift(){return Co(this,"shift")},some(n,t){return _i(this,"some",n,t,void 0,arguments)},splice(...n){return Co(this,"splice",n)},toReversed(){return vs(this).toReversed()},toSorted(n){return vs(this).toSorted(n)},toSpliced(...n){return vs(this).toSpliced(...n)},unshift(...n){return Co(this,"unshift",n)},values(){return Bu(this,"values",Ke)}};function Bu(n,t,e){const i=th(n),s=i[t]();return i!==n&&!Nn(n)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=e(a.value)),a}),s}const _y=Array.prototype;function _i(n,t,e,i,s,a){const u=th(n),h=u!==n&&!Nn(n),d=u[t];if(d!==_y[t]){const w=d.apply(n,a);return h?Ke(w):w}let g=e;u!==n&&(h?g=function(w,E){return e.call(this,Ke(w),E,n)}:e.length>2&&(g=function(w,E){return e.call(this,w,E,n)}));const v=d.call(u,g,i);return h&&s?s(v):v}function kf(n,t,e,i){const s=th(n);let a=e;return s!==n&&(Nn(n)?e.length>3&&(a=function(u,h,d){return e.call(this,u,h,d,n)}):a=function(u,h,d){return e.call(this,u,Ke(h),d,n)}),s[t](a,...i)}function Uu(n,t,e){const i=qt(n);Ue(i,"iterate",Xo);const s=i[t](...e);return(s===-1||s===!1)&&ih(e[0])?(e[0]=qt(e[0]),i[t](...e)):s}function Co(n,t,e=[]){Pi(),Qc();const i=qt(n)[t].apply(n,e);return Jc(),Ai(),i}const gy=$c("__proto__,__v_isRef,__isVue"),om=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ki));function vy(n){ki(n)||(n=String(n));const t=qt(this);return Ue(t,"has",n),t.hasOwnProperty(n)}class am{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const s=this._isReadonly,a=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return a;if(e==="__v_raw")return i===(s?a?Cy:hm:a?cm:um).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const u=Pt(t);if(!s){let d;if(u&&(d=my[e]))return d;if(e==="hasOwnProperty")return vy}const h=Reflect.get(t,e,de(t)?t:i);return(ki(e)?om.has(e):gy(e))||(s||Ue(t,"get",e),a)?h:de(h)?u&&Zc(e)?h:h.value:ce(h)?s?fm(h):su(h):h}}class lm extends am{constructor(t=!1){super(!1,t)}set(t,e,i,s){let a=t[e];if(!this._isShallow){const d=Vr(a);if(!Nn(i)&&!Vr(i)&&(a=qt(a),i=qt(i)),!Pt(t)&&de(a)&&!de(i))return d?!1:(a.value=i,!0)}const u=Pt(t)&&Zc(e)?Number(e)<t.length:Wt(t,e),h=Reflect.set(t,e,i,de(t)?t:s);return t===qt(s)&&(u?Xi(i,a)&&yi(t,"set",e,i):yi(t,"add",e,i)),h}deleteProperty(t,e){const i=Wt(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&yi(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!ki(e)||!om.has(e))&&Ue(t,"has",e),i}ownKeys(t){return Ue(t,"iterate",Pt(t)?"length":Rr),Reflect.ownKeys(t)}}class yy extends am{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const wy=new lm,Ty=new yy,Ey=new lm(!0);const uc=n=>n,tl=n=>Reflect.getPrototypeOf(n);function Iy(n,t,e){return function(...i){const s=this.__v_raw,a=qt(s),u=Ss(a),h=n==="entries"||n===Symbol.iterator&&u,d=n==="keys"&&u,g=s[n](...i),v=e?uc:t?cc:Ke;return!t&&Ue(a,"iterate",d?lc:Rr),{next(){const{value:w,done:E}=g.next();return E?{value:w,done:E}:{value:h?[v(w[0]),v(w[1])]:v(w),done:E}},[Symbol.iterator](){return this}}}}function el(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function by(n,t){const e={get(s){const a=this.__v_raw,u=qt(a),h=qt(s);n||(Xi(s,h)&&Ue(u,"get",s),Ue(u,"get",h));const{has:d}=tl(u),g=t?uc:n?cc:Ke;if(d.call(u,s))return g(a.get(s));if(d.call(u,h))return g(a.get(h));a!==u&&a.get(s)},get size(){const s=this.__v_raw;return!n&&Ue(qt(s),"iterate",Rr),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,u=qt(a),h=qt(s);return n||(Xi(s,h)&&Ue(u,"has",s),Ue(u,"has",h)),s===h?a.has(s):a.has(s)||a.has(h)},forEach(s,a){const u=this,h=u.__v_raw,d=qt(h),g=t?uc:n?cc:Ke;return!n&&Ue(d,"iterate",Rr),h.forEach((v,w)=>s.call(a,g(v),g(w),u))}};return He(e,n?{add:el("add"),set:el("set"),delete:el("delete"),clear:el("clear")}:{add(s){!t&&!Nn(s)&&!Vr(s)&&(s=qt(s));const a=qt(this);return tl(a).has.call(a,s)||(a.add(s),yi(a,"add",s,s)),this},set(s,a){!t&&!Nn(a)&&!Vr(a)&&(a=qt(a));const u=qt(this),{has:h,get:d}=tl(u);let g=h.call(u,s);g||(s=qt(s),g=h.call(u,s));const v=d.call(u,s);return u.set(s,a),g?Xi(a,v)&&yi(u,"set",s,a):yi(u,"add",s,a),this},delete(s){const a=qt(this),{has:u,get:h}=tl(a);let d=u.call(a,s);d||(s=qt(s),d=u.call(a,s)),h&&h.call(a,s);const g=a.delete(s);return d&&yi(a,"delete",s,void 0),g},clear(){const s=qt(this),a=s.size!==0,u=s.clear();return a&&yi(s,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Iy(s,n,t)}),e}function eh(n,t){const e=by(n,t);return(i,s,a)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Wt(e,s)&&s in i?e:i,s,a)}const Py={get:eh(!1,!1)},Ay={get:eh(!1,!0)},Sy={get:eh(!0,!1)};const um=new WeakMap,cm=new WeakMap,hm=new WeakMap,Cy=new WeakMap;function Ry(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xy(n){return n.__v_skip||!Object.isExtensible(n)?0:Ry(ny(n))}function su(n){return Vr(n)?n:nh(n,!1,wy,Py,um)}function Ly(n){return nh(n,!1,Ey,Ay,cm)}function fm(n){return nh(n,!0,Ty,Sy,hm)}function nh(n,t,e,i,s){if(!ce(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const a=xy(n);if(a===0)return n;const u=s.get(n);if(u)return u;const h=new Proxy(n,a===2?i:e);return s.set(n,h),h}function xr(n){return Vr(n)?xr(n.__v_raw):!!(n&&n.__v_isReactive)}function Vr(n){return!!(n&&n.__v_isReadonly)}function Nn(n){return!!(n&&n.__v_isShallow)}function ih(n){return n?!!n.__v_raw:!1}function qt(n){const t=n&&n.__v_raw;return t?qt(t):n}function rh(n){return!Wt(n,"__v_skip")&&Object.isExtensible(n)&&sc(n,"__v_skip",!0),n}const Ke=n=>ce(n)?su(n):n,cc=n=>ce(n)?fm(n):n;function de(n){return n?n.__v_isRef===!0:!1}function bn(n){return ky(n,!1)}function ky(n,t){return de(n)?n:new Oy(n,t)}class Oy{constructor(t,e){this.dep=new Yc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:qt(t),this._value=e?t:Ke(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||Nn(t)||Vr(t);t=i?t:qt(t),Xi(t,e)&&(this._rawValue=t,this._value=i?t:Ke(t),this.dep.trigger())}}function un(n){return de(n)?n.value:n}const My={get:(n,t,e)=>t==="__v_raw"?n:un(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return de(s)&&!de(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function dm(n){return xr(n)?n:new Proxy(n,My)}function Dy(n){const t=Pt(n)?new Array(n.length):{};for(const e in n)t[e]=Vy(n,e);return t}class Ny{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return py(qt(this._object),this._key)}}function Vy(n,t,e){const i=n[t];return de(i)?i:new Ny(n,t,e)}class Fy{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Yc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Jo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Yt!==this)return tm(this,!0),!0}get value(){const t=this.dep.track();return im(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function By(n,t,e=!1){let i,s;return Rt(n)?i=n:(i=n.get,s=n.set),new Fy(i,s,e)}const nl={},Rl=new WeakMap;let Pr;function Uy(n,t=!1,e=Pr){if(e){let i=Rl.get(e);i||Rl.set(e,i=[]),i.push(n)}}function zy(n,t,e=Xt){const{immediate:i,deep:s,once:a,scheduler:u,augmentJob:h,call:d}=e,g=et=>s?et:Nn(et)||s===!1||s===0?wi(et,1):wi(et);let v,w,E,x,F=!1,z=!1;if(de(n)?(w=()=>n.value,F=Nn(n)):xr(n)?(w=()=>g(n),F=!0):Pt(n)?(z=!0,F=n.some(et=>xr(et)||Nn(et)),w=()=>n.map(et=>{if(de(et))return et.value;if(xr(et))return g(et);if(Rt(et))return d?d(et,2):et()})):Rt(n)?t?w=d?()=>d(n,2):n:w=()=>{if(E){Pi();try{E()}finally{Ai()}}const et=Pr;Pr=v;try{return d?d(n,3,[x]):n(x)}finally{Pr=et}}:w=Gn,t&&s){const et=w,yt=s===!0?1/0:s;w=()=>wi(et(),yt)}const W=Jp(),ot=()=>{v.stop(),W&&W.active&&Wc(W.effects,v)};if(a&&t){const et=t;t=(...yt)=>{et(...yt),ot()}}let at=z?new Array(n.length).fill(nl):nl;const it=et=>{if(!(!(v.flags&1)||!v.dirty&&!et))if(t){const yt=v.run();if(s||F||(z?yt.some((Bt,O)=>Xi(Bt,at[O])):Xi(yt,at))){E&&E();const Bt=Pr;Pr=v;try{const O=[yt,at===nl?void 0:z&&at[0]===nl?[]:at,x];at=yt,d?d(t,3,O):t(...O)}finally{Pr=Bt}}}else v.run()};return h&&h(it),v=new Xp(w),v.scheduler=u?()=>u(it,!1):it,x=et=>Uy(et,!1,v),E=v.onStop=()=>{const et=Rl.get(v);if(et){if(d)d(et,4);else for(const yt of et)yt();Rl.delete(v)}},t?i?it(!0):at=v.run():u?u(it.bind(null,!0),!0):v.run(),ot.pause=v.pause.bind(v),ot.resume=v.resume.bind(v),ot.stop=ot,ot}function wi(n,t=1/0,e){if(t<=0||!ce(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,de(n))wi(n.value,t,e);else if(Pt(n))for(let i=0;i<n.length;i++)wi(n[i],t,e);else if(zp(n)||Ss(n))n.forEach(i=>{wi(i,t,e)});else if($p(n)){for(const i in n)wi(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&wi(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ca(n,t,e,i){try{return i?n(...i):n()}catch(s){ou(s,t,e)}}function ti(n,t,e,i){if(Rt(n)){const s=ca(n,t,e,i);return s&&jp(s)&&s.catch(a=>{ou(a,t,e)}),s}if(Pt(n)){const s=[];for(let a=0;a<n.length;a++)s.push(ti(n[a],t,e,i));return s}}function ou(n,t,e,i=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||Xt;if(t){let h=t.parent;const d=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${e}`;for(;h;){const v=h.ec;if(v){for(let w=0;w<v.length;w++)if(v[w](n,d,g)===!1)return}h=h.parent}if(a){Pi(),ca(a,null,10,[n,d,g]),Ai();return}}jy(n,e,s,i,u)}function jy(n,t,e,i=!0,s=!1){if(s)throw n;console.error(n)}const Qe=[];let qn=-1;const Cs=[];let Wi=null,ws=0;const pm=Promise.resolve();let xl=null;function mm(n){const t=xl||pm;return n?t.then(this?n.bind(this):n):t}function Hy(n){let t=qn+1,e=Qe.length;for(;t<e;){const i=t+e>>>1,s=Qe[i],a=Yo(s);a<n||a===n&&s.flags&2?t=i+1:e=i}return t}function sh(n){if(!(n.flags&1)){const t=Yo(n),e=Qe[Qe.length-1];!e||!(n.flags&2)&&t>=Yo(e)?Qe.push(n):Qe.splice(Hy(t),0,n),n.flags|=1,_m()}}function _m(){xl||(xl=pm.then(vm))}function $y(n){Pt(n)?Cs.push(...n):Wi&&n.id===-1?Wi.splice(ws+1,0,n):n.flags&1||(Cs.push(n),n.flags|=1),_m()}function Of(n,t,e=qn+1){for(;e<Qe.length;e++){const i=Qe[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Qe.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function gm(n){if(Cs.length){const t=[...new Set(Cs)].sort((e,i)=>Yo(e)-Yo(i));if(Cs.length=0,Wi){Wi.push(...t);return}for(Wi=t,ws=0;ws<Wi.length;ws++){const e=Wi[ws];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Wi=null,ws=0}}const Yo=n=>n.id==null?n.flags&2?-1:1/0:n.id;function vm(n){try{for(qn=0;qn<Qe.length;qn++){const t=Qe[qn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ca(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qn<Qe.length;qn++){const t=Qe[qn];t&&(t.flags&=-2)}qn=-1,Qe.length=0,gm(),xl=null,(Qe.length||Cs.length)&&vm()}}let Me=null,ym=null;function Ll(n){const t=Me;return Me=n,ym=n&&n.type.__scopeId||null,t}function dl(n,t=Me,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&jf(-1);const a=Ll(t);let u;try{u=n(...s)}finally{Ll(a),i._d&&jf(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function qy(n,t){if(Me===null)return n;const e=cu(Me),i=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[a,u,h,d=Xt]=t[s];a&&(Rt(a)&&(a={mounted:a,updated:a}),a.deep&&wi(u),i.push({dir:a,instance:e,value:u,oldValue:void 0,arg:h,modifiers:d}))}return n}function Ir(n,t,e,i){const s=n.dirs,a=t&&t.dirs;for(let u=0;u<s.length;u++){const h=s[u];a&&(h.oldValue=a[u].value);let d=h.dir[i];d&&(Pi(),ti(d,e,8,[n.el,h,n,t]),Ai())}}const Wy=Symbol("_vte"),Zy=n=>n.__isTeleport;function oh(n,t){n.shapeFlag&6&&n.component?(n.transition=t,oh(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function ha(n,t){return Rt(n)?He({name:n.name},t,{setup:n}):n}function wm(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Uo(n,t,e,i,s=!1){if(Pt(n)){n.forEach((F,z)=>Uo(F,t&&(Pt(t)?t[z]:t),e,i,s));return}if(Rs(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Uo(n,t,e,i.component.subTree);return}const a=i.shapeFlag&4?cu(i.component):i.el,u=s?null:a,{i:h,r:d}=n,g=t&&t.r,v=h.refs===Xt?h.refs={}:h.refs,w=h.setupState,E=qt(w),x=w===Xt?()=>!1:F=>Wt(E,F);if(g!=null&&g!==d&&(Pe(g)?(v[g]=null,x(g)&&(w[g]=null)):de(g)&&(g.value=null)),Rt(d))ca(d,h,12,[u,v]);else{const F=Pe(d),z=de(d);if(F||z){const W=()=>{if(n.f){const ot=F?x(d)?w[d]:v[d]:d.value;s?Pt(ot)&&Wc(ot,a):Pt(ot)?ot.includes(a)||ot.push(a):F?(v[d]=[a],x(d)&&(w[d]=v[d])):(d.value=[a],n.k&&(v[n.k]=d.value))}else F?(v[d]=u,x(d)&&(w[d]=u)):z&&(d.value=u,n.k&&(v[n.k]=u))};u?(W.id=-1,cn(W,e)):W()}}}ru().requestIdleCallback;ru().cancelIdleCallback;const Rs=n=>!!n.type.__asyncLoader,Tm=n=>n.type.__isKeepAlive;function Gy(n,t){Em(n,"a",t)}function Ky(n,t){Em(n,"da",t)}function Em(n,t,e=je){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(au(t,i,e),e){let s=e.parent;for(;s&&s.parent;)Tm(s.parent.vnode)&&Qy(i,t,e,s),s=s.parent}}function Qy(n,t,e,i){const s=au(t,n,i,!0);bm(()=>{Wc(i[t],s)},e)}function au(n,t,e=je,i=!1){if(e){const s=e[n]||(e[n]=[]),a=t.__weh||(t.__weh=(...u)=>{Pi();const h=fa(e),d=ti(t,e,n,u);return h(),Ai(),d});return i?s.unshift(a):s.push(a),a}}const Oi=n=>(t,e=je)=>{(!ea||n==="sp")&&au(n,(...i)=>t(...i),e)},Jy=Oi("bm"),Im=Oi("m"),Xy=Oi("bu"),Yy=Oi("u"),tw=Oi("bum"),bm=Oi("um"),ew=Oi("sp"),nw=Oi("rtg"),iw=Oi("rtc");function rw(n,t=je){au("ec",n,t)}const sw=Symbol.for("v-ndc");function il(n,t,e={},i,s){if(Me.ce||Me.parent&&Rs(Me.parent)&&Me.parent.ce)return t!=="default"&&(e.name=t),Fe(),Or(hn,null,[Pn("slot",e,i)],64);let a=n[t];a&&a._c&&(a._d=!1),Fe();const u=a&&Pm(a(e)),h=e.key||u&&u.key,d=Or(hn,{key:(h&&!ki(h)?h:`_${t}`)+""},u||[],u&&n._===1?64:-2);return a&&a._c&&(a._d=!0),d}function Pm(n){return n.some(t=>ch(t)?!(t.type===Si||t.type===hn&&!Pm(t.children)):!0)?n:null}const hc=n=>n?$m(n)?cu(n):hc(n.parent):null,zo=He(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>hc(n.parent),$root:n=>hc(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Sm(n),$forceUpdate:n=>n.f||(n.f=()=>{sh(n.update)}),$nextTick:n=>n.n||(n.n=mm.bind(n.proxy)),$watch:n=>Rw.bind(n)}),zu=(n,t)=>n!==Xt&&!n.__isScriptSetup&&Wt(n,t),ow={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:s,props:a,accessCache:u,type:h,appContext:d}=n;let g;if(t[0]!=="$"){const x=u[t];if(x!==void 0)switch(x){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return a[t]}else{if(zu(i,t))return u[t]=1,i[t];if(s!==Xt&&Wt(s,t))return u[t]=2,s[t];if((g=n.propsOptions[0])&&Wt(g,t))return u[t]=3,a[t];if(e!==Xt&&Wt(e,t))return u[t]=4,e[t];fc&&(u[t]=0)}}const v=zo[t];let w,E;if(v)return t==="$attrs"&&Ue(n.attrs,"get",""),v(n);if((w=h.__cssModules)&&(w=w[t]))return w;if(e!==Xt&&Wt(e,t))return u[t]=4,e[t];if(E=d.config.globalProperties,Wt(E,t))return E[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:a}=n;return zu(s,t)?(s[t]=e,!0):i!==Xt&&Wt(i,t)?(i[t]=e,!0):Wt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(a[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:a}},u){let h;return!!e[u]||n!==Xt&&Wt(n,u)||zu(t,u)||(h=a[0])&&Wt(h,u)||Wt(i,u)||Wt(zo,u)||Wt(s.config.globalProperties,u)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Wt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Mf(n){return Pt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let fc=!0;function aw(n){const t=Sm(n),e=n.proxy,i=n.ctx;fc=!1,t.beforeCreate&&Df(t.beforeCreate,n,"bc");const{data:s,computed:a,methods:u,watch:h,provide:d,inject:g,created:v,beforeMount:w,mounted:E,beforeUpdate:x,updated:F,activated:z,deactivated:W,beforeDestroy:ot,beforeUnmount:at,destroyed:it,unmounted:et,render:yt,renderTracked:Bt,renderTriggered:O,errorCaptured:I,serverPrefetch:b,expose:C,inheritAttrs:R,components:M,directives:A,filters:ee}=t;if(g&&lw(g,i,null),u)for(const wt in u){const nt=u[wt];Rt(nt)&&(i[wt]=nt.bind(e))}if(s){const wt=s.call(e,e);ce(wt)&&(n.data=su(wt))}if(fc=!0,a)for(const wt in a){const nt=a[wt],Xe=Rt(nt)?nt.bind(e,e):Rt(nt.get)?nt.get.bind(e,e):Gn,pt=!Rt(nt)&&Rt(nt.set)?nt.set.bind(e):Gn,$t=dh({get:Xe,set:pt});Object.defineProperty(i,wt,{enumerable:!0,configurable:!0,get:()=>$t.value,set:Ut=>$t.value=Ut})}if(h)for(const wt in h)Am(h[wt],i,e,wt);if(d){const wt=Rt(d)?d.call(e):d;Reflect.ownKeys(wt).forEach(nt=>{pw(nt,wt[nt])})}v&&Df(v,n,"c");function kt(wt,nt){Pt(nt)?nt.forEach(Xe=>wt(Xe.bind(e))):nt&&wt(nt.bind(e))}if(kt(Jy,w),kt(Im,E),kt(Xy,x),kt(Yy,F),kt(Gy,z),kt(Ky,W),kt(rw,I),kt(iw,Bt),kt(nw,O),kt(tw,at),kt(bm,et),kt(ew,b),Pt(C))if(C.length){const wt=n.exposed||(n.exposed={});C.forEach(nt=>{Object.defineProperty(wt,nt,{get:()=>e[nt],set:Xe=>e[nt]=Xe})})}else n.exposed||(n.exposed={});yt&&n.render===Gn&&(n.render=yt),R!=null&&(n.inheritAttrs=R),M&&(n.components=M),A&&(n.directives=A),b&&wm(n)}function lw(n,t,e=Gn){Pt(n)&&(n=dc(n));for(const i in n){const s=n[i];let a;ce(s)?"default"in s?a=kr(s.from||i,s.default,!0):a=kr(s.from||i):a=kr(s),de(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[i]=a}}function Df(n,t,e){ti(Pt(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function Am(n,t,e,i){let s=i.includes(".")?Bm(e,i):()=>e[i];if(Pe(n)){const a=t[n];Rt(a)&&pl(s,a)}else if(Rt(n))pl(s,n.bind(e));else if(ce(n))if(Pt(n))n.forEach(a=>Am(a,t,e,i));else{const a=Rt(n.handler)?n.handler.bind(e):t[n.handler];Rt(a)&&pl(s,a,n)}}function Sm(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:u}}=n.appContext,h=a.get(t);let d;return h?d=h:!s.length&&!e&&!i?d=t:(d={},s.length&&s.forEach(g=>kl(d,g,u,!0)),kl(d,t,u)),ce(t)&&a.set(t,d),d}function kl(n,t,e,i=!1){const{mixins:s,extends:a}=t;a&&kl(n,a,e,!0),s&&s.forEach(u=>kl(n,u,e,!0));for(const u in t)if(!(i&&u==="expose")){const h=uw[u]||e&&e[u];n[u]=h?h(n[u],t[u]):t[u]}return n}const uw={data:Nf,props:Vf,emits:Vf,methods:xo,computed:xo,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:xo,directives:xo,watch:hw,provide:Nf,inject:cw};function Nf(n,t){return t?n?function(){return He(Rt(n)?n.call(this,this):n,Rt(t)?t.call(this,this):t)}:t:n}function cw(n,t){return xo(dc(n),dc(t))}function dc(n){if(Pt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Ge(n,t){return n?[...new Set([].concat(n,t))]:t}function xo(n,t){return n?He(Object.create(null),n,t):t}function Vf(n,t){return n?Pt(n)&&Pt(t)?[...new Set([...n,...t])]:He(Object.create(null),Mf(n),Mf(t??{})):t}function hw(n,t){if(!n)return t;if(!t)return n;const e=He(Object.create(null),n);for(const i in t)e[i]=Ge(n[i],t[i]);return e}function Cm(){return{app:null,config:{isNativeTag:ty,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fw=0;function dw(n,t){return function(i,s=null){Rt(i)||(i=He({},i)),s!=null&&!ce(s)&&(s=null);const a=Cm(),u=new WeakSet,h=[];let d=!1;const g=a.app={_uid:fw++,_component:i,_props:s,_container:null,_context:a,_instance:null,version:Gw,get config(){return a.config},set config(v){},use(v,...w){return u.has(v)||(v&&Rt(v.install)?(u.add(v),v.install(g,...w)):Rt(v)&&(u.add(v),v(g,...w))),g},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),g},component(v,w){return w?(a.components[v]=w,g):a.components[v]},directive(v,w){return w?(a.directives[v]=w,g):a.directives[v]},mount(v,w,E){if(!d){const x=g._ceVNode||Pn(i,s);return x.appContext=a,E===!0?E="svg":E===!1&&(E=void 0),n(x,v,E),d=!0,g._container=v,v.__vue_app__=g,cu(x.component)}},onUnmount(v){h.push(v)},unmount(){d&&(ti(h,g._instance,16),n(null,g._container),delete g._container.__vue_app__)},provide(v,w){return a.provides[v]=w,g},runWithContext(v){const w=Lr;Lr=g;try{return v()}finally{Lr=w}}};return g}}let Lr=null;function pw(n,t){if(je){let e=je.provides;const i=je.parent&&je.parent.provides;i===e&&(e=je.provides=Object.create(i)),e[n]=t}}function kr(n,t,e=!1){const i=je||Me;if(i||Lr){let s=Lr?Lr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&Rt(t)?t.call(i&&i.proxy):t}}function mw(){return!!(je||Me||Lr)}const Rm={},xm=()=>Object.create(Rm),Lm=n=>Object.getPrototypeOf(n)===Rm;function _w(n,t,e,i=!1){const s={},a=xm();n.propsDefaults=Object.create(null),km(n,t,s,a);for(const u in n.propsOptions[0])u in s||(s[u]=void 0);e?n.props=i?s:Ly(s):n.type.props?n.props=s:n.props=a,n.attrs=a}function gw(n,t,e,i){const{props:s,attrs:a,vnode:{patchFlag:u}}=n,h=qt(s),[d]=n.propsOptions;let g=!1;if((i||u>0)&&!(u&16)){if(u&8){const v=n.vnode.dynamicProps;for(let w=0;w<v.length;w++){let E=v[w];if(lu(n.emitsOptions,E))continue;const x=t[E];if(d)if(Wt(a,E))x!==a[E]&&(a[E]=x,g=!0);else{const F=rr(E);s[F]=pc(d,h,F,x,n,!1)}else x!==a[E]&&(a[E]=x,g=!0)}}}else{km(n,t,s,a)&&(g=!0);let v;for(const w in h)(!t||!Wt(t,w)&&((v=Hr(w))===w||!Wt(t,v)))&&(d?e&&(e[w]!==void 0||e[v]!==void 0)&&(s[w]=pc(d,h,w,void 0,n,!0)):delete s[w]);if(a!==h)for(const w in a)(!t||!Wt(t,w))&&(delete a[w],g=!0)}g&&yi(n.attrs,"set","")}function km(n,t,e,i){const[s,a]=n.propsOptions;let u=!1,h;if(t)for(let d in t){if(Vo(d))continue;const g=t[d];let v;s&&Wt(s,v=rr(d))?!a||!a.includes(v)?e[v]=g:(h||(h={}))[v]=g:lu(n.emitsOptions,d)||(!(d in i)||g!==i[d])&&(i[d]=g,u=!0)}if(a){const d=qt(e),g=h||Xt;for(let v=0;v<a.length;v++){const w=a[v];e[w]=pc(s,d,w,g[w],n,!Wt(g,w))}}return u}function pc(n,t,e,i,s,a){const u=n[e];if(u!=null){const h=Wt(u,"default");if(h&&i===void 0){const d=u.default;if(u.type!==Function&&!u.skipFactory&&Rt(d)){const{propsDefaults:g}=s;if(e in g)i=g[e];else{const v=fa(s);i=g[e]=d.call(null,t),v()}}else i=d;s.ce&&s.ce._setProp(e,i)}u[0]&&(a&&!h?i=!1:u[1]&&(i===""||i===Hr(e))&&(i=!0))}return i}const vw=new WeakMap;function Om(n,t,e=!1){const i=e?vw:t.propsCache,s=i.get(n);if(s)return s;const a=n.props,u={},h=[];let d=!1;if(!Rt(n)){const v=w=>{d=!0;const[E,x]=Om(w,t,!0);He(u,E),x&&h.push(...x)};!e&&t.mixins.length&&t.mixins.forEach(v),n.extends&&v(n.extends),n.mixins&&n.mixins.forEach(v)}if(!a&&!d)return ce(n)&&i.set(n,As),As;if(Pt(a))for(let v=0;v<a.length;v++){const w=rr(a[v]);Ff(w)&&(u[w]=Xt)}else if(a)for(const v in a){const w=rr(v);if(Ff(w)){const E=a[v],x=u[w]=Pt(E)||Rt(E)?{type:E}:He({},E),F=x.type;let z=!1,W=!0;if(Pt(F))for(let ot=0;ot<F.length;++ot){const at=F[ot],it=Rt(at)&&at.name;if(it==="Boolean"){z=!0;break}else it==="String"&&(W=!1)}else z=Rt(F)&&F.name==="Boolean";x[0]=z,x[1]=W,(z||Wt(x,"default"))&&h.push(w)}}const g=[u,h];return ce(n)&&i.set(n,g),g}function Ff(n){return n[0]!=="$"&&!Vo(n)}const ah=n=>n[0]==="_"||n==="$stable",lh=n=>Pt(n)?n.map(Zn):[Zn(n)],yw=(n,t,e)=>{if(t._n)return t;const i=dl((...s)=>lh(t(...s)),e);return i._c=!1,i},Mm=(n,t,e)=>{const i=n._ctx;for(const s in n){if(ah(s))continue;const a=n[s];if(Rt(a))t[s]=yw(s,a,i);else if(a!=null){const u=lh(a);t[s]=()=>u}}},Dm=(n,t)=>{const e=lh(t);n.slots.default=()=>e},Nm=(n,t,e)=>{for(const i in t)(e||!ah(i))&&(n[i]=t[i])},ww=(n,t,e)=>{const i=n.slots=xm();if(n.vnode.shapeFlag&32){const s=t.__;s&&sc(i,"__",s,!0);const a=t._;a?(Nm(i,t,e),e&&sc(i,"_",a,!0)):Mm(t,i)}else t&&Dm(n,t)},Tw=(n,t,e)=>{const{vnode:i,slots:s}=n;let a=!0,u=Xt;if(i.shapeFlag&32){const h=t._;h?e&&h===1?a=!1:Nm(s,t,e):(a=!t.$stable,Mm(t,s)),u=t}else t&&(Dm(n,t),u={default:1});if(a)for(const h in s)!ah(h)&&u[h]==null&&delete s[h]},cn=Nw;function Ew(n){return Iw(n)}function Iw(n,t){const e=ru();e.__VUE__=!0;const{insert:i,remove:s,patchProp:a,createElement:u,createText:h,createComment:d,setText:g,setElementText:v,parentNode:w,nextSibling:E,setScopeId:x=Gn,insertStaticContent:F}=n,z=(P,k,U,G=null,$=null,Z=null,Y=void 0,J=null,Q=!!k.dynamicChildren)=>{if(P===k)return;P&&!Ro(P,k)&&(G=Te(P),Ut(P,$,Z,!0),P=null),k.patchFlag===-2&&(Q=!1,k.dynamicChildren=null);const{type:K,ref:ct,shapeFlag:tt}=k;switch(K){case uu:W(P,k,U,G);break;case Si:ot(P,k,U,G);break;case Hu:P==null&&at(k,U,G,Y);break;case hn:M(P,k,U,G,$,Z,Y,J,Q);break;default:tt&1?yt(P,k,U,G,$,Z,Y,J,Q):tt&6?A(P,k,U,G,$,Z,Y,J,Q):(tt&64||tt&128)&&K.process(P,k,U,G,$,Z,Y,J,Q,tn)}ct!=null&&$?Uo(ct,P&&P.ref,Z,k||P,!k):ct==null&&P&&P.ref!=null&&Uo(P.ref,null,Z,P,!0)},W=(P,k,U,G)=>{if(P==null)i(k.el=h(k.children),U,G);else{const $=k.el=P.el;k.children!==P.children&&g($,k.children)}},ot=(P,k,U,G)=>{P==null?i(k.el=d(k.children||""),U,G):k.el=P.el},at=(P,k,U,G)=>{[P.el,P.anchor]=F(P.children,k,U,G,P.el,P.anchor)},it=({el:P,anchor:k},U,G)=>{let $;for(;P&&P!==k;)$=E(P),i(P,U,G),P=$;i(k,U,G)},et=({el:P,anchor:k})=>{let U;for(;P&&P!==k;)U=E(P),s(P),P=U;s(k)},yt=(P,k,U,G,$,Z,Y,J,Q)=>{k.type==="svg"?Y="svg":k.type==="math"&&(Y="mathml"),P==null?Bt(k,U,G,$,Z,Y,J,Q):b(P,k,$,Z,Y,J,Q)},Bt=(P,k,U,G,$,Z,Y,J)=>{let Q,K;const{props:ct,shapeFlag:tt,transition:ut,dirs:mt}=P;if(Q=P.el=u(P.type,Z,ct&&ct.is,ct),tt&8?v(Q,P.children):tt&16&&I(P.children,Q,null,G,$,ju(P,Z),Y,J),mt&&Ir(P,null,G,"created"),O(Q,P,P.scopeId,Y,G),ct){for(const It in ct)It!=="value"&&!Vo(It)&&a(Q,It,null,ct[It],Z,G);"value"in ct&&a(Q,"value",null,ct.value,Z),(K=ct.onVnodeBeforeMount)&&$n(K,G,P)}mt&&Ir(P,null,G,"beforeMount");const ft=bw($,ut);ft&&ut.beforeEnter(Q),i(Q,k,U),((K=ct&&ct.onVnodeMounted)||ft||mt)&&cn(()=>{K&&$n(K,G,P),ft&&ut.enter(Q),mt&&Ir(P,null,G,"mounted")},$)},O=(P,k,U,G,$)=>{if(U&&x(P,U),G)for(let Z=0;Z<G.length;Z++)x(P,G[Z]);if($){let Z=$.subTree;if(k===Z||zm(Z.type)&&(Z.ssContent===k||Z.ssFallback===k)){const Y=$.vnode;O(P,Y,Y.scopeId,Y.slotScopeIds,$.parent)}}},I=(P,k,U,G,$,Z,Y,J,Q=0)=>{for(let K=Q;K<P.length;K++){const ct=P[K]=J?Zi(P[K]):Zn(P[K]);z(null,ct,k,U,G,$,Z,Y,J)}},b=(P,k,U,G,$,Z,Y)=>{const J=k.el=P.el;let{patchFlag:Q,dynamicChildren:K,dirs:ct}=k;Q|=P.patchFlag&16;const tt=P.props||Xt,ut=k.props||Xt;let mt;if(U&&br(U,!1),(mt=ut.onVnodeBeforeUpdate)&&$n(mt,U,k,P),ct&&Ir(k,P,U,"beforeUpdate"),U&&br(U,!0),(tt.innerHTML&&ut.innerHTML==null||tt.textContent&&ut.textContent==null)&&v(J,""),K?C(P.dynamicChildren,K,J,U,G,ju(k,$),Z):Y||nt(P,k,J,null,U,G,ju(k,$),Z,!1),Q>0){if(Q&16)R(J,tt,ut,U,$);else if(Q&2&&tt.class!==ut.class&&a(J,"class",null,ut.class,$),Q&4&&a(J,"style",tt.style,ut.style,$),Q&8){const ft=k.dynamicProps;for(let It=0;It<ft.length;It++){const Ot=ft[It],Ee=tt[Ot],pe=ut[Ot];(pe!==Ee||Ot==="value")&&a(J,Ot,Ee,pe,$,U)}}Q&1&&P.children!==k.children&&v(J,k.children)}else!Y&&K==null&&R(J,tt,ut,U,$);((mt=ut.onVnodeUpdated)||ct)&&cn(()=>{mt&&$n(mt,U,k,P),ct&&Ir(k,P,U,"updated")},G)},C=(P,k,U,G,$,Z,Y)=>{for(let J=0;J<k.length;J++){const Q=P[J],K=k[J],ct=Q.el&&(Q.type===hn||!Ro(Q,K)||Q.shapeFlag&198)?w(Q.el):U;z(Q,K,ct,null,G,$,Z,Y,!0)}},R=(P,k,U,G,$)=>{if(k!==U){if(k!==Xt)for(const Z in k)!Vo(Z)&&!(Z in U)&&a(P,Z,k[Z],null,$,G);for(const Z in U){if(Vo(Z))continue;const Y=U[Z],J=k[Z];Y!==J&&Z!=="value"&&a(P,Z,J,Y,$,G)}"value"in U&&a(P,"value",k.value,U.value,$)}},M=(P,k,U,G,$,Z,Y,J,Q)=>{const K=k.el=P?P.el:h(""),ct=k.anchor=P?P.anchor:h("");let{patchFlag:tt,dynamicChildren:ut,slotScopeIds:mt}=k;mt&&(J=J?J.concat(mt):mt),P==null?(i(K,U,G),i(ct,U,G),I(k.children||[],U,ct,$,Z,Y,J,Q)):tt>0&&tt&64&&ut&&P.dynamicChildren?(C(P.dynamicChildren,ut,U,$,Z,Y,J),(k.key!=null||$&&k===$.subTree)&&Vm(P,k,!0)):nt(P,k,U,ct,$,Z,Y,J,Q)},A=(P,k,U,G,$,Z,Y,J,Q)=>{k.slotScopeIds=J,P==null?k.shapeFlag&512?$.ctx.activate(k,U,G,Y,Q):ee(k,U,G,$,Z,Y,Q):dn(P,k,Q)},ee=(P,k,U,G,$,Z,Y)=>{const J=P.component=jw(P,G,$);if(Tm(P)&&(J.ctx.renderer=tn),Hw(J,!1,Y),J.asyncDep){if($&&$.registerDep(J,kt,Y),!P.el){const Q=J.subTree=Pn(Si);ot(null,Q,k,U)}}else kt(J,P,k,U,$,Z,Y)},dn=(P,k,U)=>{const G=k.component=P.component;if(Mw(P,k,U))if(G.asyncDep&&!G.asyncResolved){wt(G,k,U);return}else G.next=k,G.update();else k.el=P.el,G.vnode=k},kt=(P,k,U,G,$,Z,Y)=>{const J=()=>{if(P.isMounted){let{next:tt,bu:ut,u:mt,parent:ft,vnode:It}=P;{const Ae=Fm(P);if(Ae){tt&&(tt.el=It.el,wt(P,tt,Y)),Ae.asyncDep.then(()=>{P.isUnmounted||J()});return}}let Ot=tt,Ee;br(P,!1),tt?(tt.el=It.el,wt(P,tt,Y)):tt=It,ut&&hl(ut),(Ee=tt.props&&tt.props.onVnodeBeforeUpdate)&&$n(Ee,ft,tt,It),br(P,!0);const pe=Uf(P),qe=P.subTree;P.subTree=pe,z(qe,pe,w(qe.el),Te(qe),P,$,Z),tt.el=pe.el,Ot===null&&Dw(P,pe.el),mt&&cn(mt,$),(Ee=tt.props&&tt.props.onVnodeUpdated)&&cn(()=>$n(Ee,ft,tt,It),$)}else{let tt;const{el:ut,props:mt}=k,{bm:ft,m:It,parent:Ot,root:Ee,type:pe}=P,qe=Rs(k);br(P,!1),ft&&hl(ft),!qe&&(tt=mt&&mt.onVnodeBeforeMount)&&$n(tt,Ot,k),br(P,!0);{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(pe);const Ae=P.subTree=Uf(P);z(null,Ae,U,G,P,$,Z),k.el=Ae.el}if(It&&cn(It,$),!qe&&(tt=mt&&mt.onVnodeMounted)){const Ae=k;cn(()=>$n(tt,Ot,Ae),$)}(k.shapeFlag&256||Ot&&Rs(Ot.vnode)&&Ot.vnode.shapeFlag&256)&&P.a&&cn(P.a,$),P.isMounted=!0,k=U=G=null}};P.scope.on();const Q=P.effect=new Xp(J);P.scope.off();const K=P.update=Q.run.bind(Q),ct=P.job=Q.runIfDirty.bind(Q);ct.i=P,ct.id=P.uid,Q.scheduler=()=>sh(ct),br(P,!0),K()},wt=(P,k,U)=>{k.component=P;const G=P.vnode.props;P.vnode=k,P.next=null,gw(P,k.props,G,U),Tw(P,k.children,U),Pi(),Of(P),Ai()},nt=(P,k,U,G,$,Z,Y,J,Q=!1)=>{const K=P&&P.children,ct=P?P.shapeFlag:0,tt=k.children,{patchFlag:ut,shapeFlag:mt}=k;if(ut>0){if(ut&128){pt(K,tt,U,G,$,Z,Y,J,Q);return}else if(ut&256){Xe(K,tt,U,G,$,Z,Y,J,Q);return}}mt&8?(ct&16&&Ct(K,$,Z),tt!==K&&v(U,tt)):ct&16?mt&16?pt(K,tt,U,G,$,Z,Y,J,Q):Ct(K,$,Z,!0):(ct&8&&v(U,""),mt&16&&I(tt,U,G,$,Z,Y,J,Q))},Xe=(P,k,U,G,$,Z,Y,J,Q)=>{P=P||As,k=k||As;const K=P.length,ct=k.length,tt=Math.min(K,ct);let ut;for(ut=0;ut<tt;ut++){const mt=k[ut]=Q?Zi(k[ut]):Zn(k[ut]);z(P[ut],mt,U,null,$,Z,Y,J,Q)}K>ct?Ct(P,$,Z,!0,!1,tt):I(k,U,G,$,Z,Y,J,Q,tt)},pt=(P,k,U,G,$,Z,Y,J,Q)=>{let K=0;const ct=k.length;let tt=P.length-1,ut=ct-1;for(;K<=tt&&K<=ut;){const mt=P[K],ft=k[K]=Q?Zi(k[K]):Zn(k[K]);if(Ro(mt,ft))z(mt,ft,U,null,$,Z,Y,J,Q);else break;K++}for(;K<=tt&&K<=ut;){const mt=P[tt],ft=k[ut]=Q?Zi(k[ut]):Zn(k[ut]);if(Ro(mt,ft))z(mt,ft,U,null,$,Z,Y,J,Q);else break;tt--,ut--}if(K>tt){if(K<=ut){const mt=ut+1,ft=mt<ct?k[mt].el:G;for(;K<=ut;)z(null,k[K]=Q?Zi(k[K]):Zn(k[K]),U,ft,$,Z,Y,J,Q),K++}}else if(K>ut)for(;K<=tt;)Ut(P[K],$,Z,!0),K++;else{const mt=K,ft=K,It=new Map;for(K=ft;K<=ut;K++){const me=k[K]=Q?Zi(k[K]):Zn(k[K]);me.key!=null&&It.set(me.key,K)}let Ot,Ee=0;const pe=ut-ft+1;let qe=!1,Ae=0;const An=new Array(pe);for(K=0;K<pe;K++)An[K]=0;for(K=mt;K<=tt;K++){const me=P[K];if(Ee>=pe){Ut(me,$,Z,!0);continue}let en;if(me.key!=null)en=It.get(me.key);else for(Ot=ft;Ot<=ut;Ot++)if(An[Ot-ft]===0&&Ro(me,k[Ot])){en=Ot;break}en===void 0?Ut(me,$,Z,!0):(An[en-ft]=K+1,en>=Ae?Ae=en:qe=!0,z(me,k[en],U,null,$,Z,Y,J,Q),Ee++)}const ri=qe?Pw(An):As;for(Ot=ri.length-1,K=pe-1;K>=0;K--){const me=ft+K,en=k[me],Bn=me+1<ct?k[me+1].el:G;An[K]===0?z(null,en,U,Bn,$,Z,Y,J,Q):qe&&(Ot<0||K!==ri[Ot]?$t(en,U,Bn,2):Ot--)}}},$t=(P,k,U,G,$=null)=>{const{el:Z,type:Y,transition:J,children:Q,shapeFlag:K}=P;if(K&6){$t(P.component.subTree,k,U,G);return}if(K&128){P.suspense.move(k,U,G);return}if(K&64){Y.move(P,k,U,tn);return}if(Y===hn){i(Z,k,U);for(let tt=0;tt<Q.length;tt++)$t(Q[tt],k,U,G);i(P.anchor,k,U);return}if(Y===Hu){it(P,k,U);return}if(G!==2&&K&1&&J)if(G===0)J.beforeEnter(Z),i(Z,k,U),cn(()=>J.enter(Z),$);else{const{leave:tt,delayLeave:ut,afterLeave:mt}=J,ft=()=>{P.ctx.isUnmounted?s(Z):i(Z,k,U)},It=()=>{tt(Z,()=>{ft(),mt&&mt()})};ut?ut(Z,ft,It):It()}else i(Z,k,U)},Ut=(P,k,U,G=!1,$=!1)=>{const{type:Z,props:Y,ref:J,children:Q,dynamicChildren:K,shapeFlag:ct,patchFlag:tt,dirs:ut,cacheIndex:mt}=P;if(tt===-2&&($=!1),J!=null&&(Pi(),Uo(J,null,U,P,!0),Ai()),mt!=null&&(k.renderCache[mt]=void 0),ct&256){k.ctx.deactivate(P);return}const ft=ct&1&&ut,It=!Rs(P);let Ot;if(It&&(Ot=Y&&Y.onVnodeBeforeUnmount)&&$n(Ot,k,P),ct&6)Dt(P.component,U,G);else{if(ct&128){P.suspense.unmount(U,G);return}ft&&Ir(P,null,k,"beforeUnmount"),ct&64?P.type.remove(P,k,U,tn,G):K&&!K.hasOnce&&(Z!==hn||tt>0&&tt&64)?Ct(K,k,U,!1,!0):(Z===hn&&tt&384||!$&&ct&16)&&Ct(Q,k,U),G&&zt(P)}(It&&(Ot=Y&&Y.onVnodeUnmounted)||ft)&&cn(()=>{Ot&&$n(Ot,k,P),ft&&Ir(P,null,k,"unmounted")},U)},zt=P=>{const{type:k,el:U,anchor:G,transition:$}=P;if(k===hn){ie(U,G);return}if(k===Hu){et(P);return}const Z=()=>{s(U),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(P.shapeFlag&1&&$&&!$.persisted){const{leave:Y,delayLeave:J}=$,Q=()=>Y(U,Z);J?J(P.el,Z,Q):Q()}else Z()},ie=(P,k)=>{let U;for(;P!==k;)U=E(P),s(P),P=U;s(k)},Dt=(P,k,U)=>{const{bum:G,scope:$,job:Z,subTree:Y,um:J,m:Q,a:K,parent:ct,slots:{__:tt}}=P;Bf(Q),Bf(K),G&&hl(G),ct&&Pt(tt)&&tt.forEach(ut=>{ct.renderCache[ut]=void 0}),$.stop(),Z&&(Z.flags|=8,Ut(Y,P,k,U)),J&&cn(J,k),cn(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Ct=(P,k,U,G=!1,$=!1,Z=0)=>{for(let Y=Z;Y<P.length;Y++)Ut(P[Y],k,U,G,$)},Te=P=>{if(P.shapeFlag&6)return Te(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=E(P.anchor||P.el),U=k&&k[Wy];return U?E(U):k};let Ye=!1;const fr=(P,k,U)=>{P==null?k._vnode&&Ut(k._vnode,null,null,!0):z(k._vnode||null,P,k,null,null,null,U),k._vnode=P,Ye||(Ye=!0,Of(),gm(),Ye=!1)},tn={p:z,um:Ut,m:$t,r:zt,mt:ee,mc:I,pc:nt,pbc:C,n:Te,o:n};return{render:fr,hydrate:void 0,createApp:dw(fr)}}function ju({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function br({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function bw(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Vm(n,t,e=!1){const i=n.children,s=t.children;if(Pt(i)&&Pt(s))for(let a=0;a<i.length;a++){const u=i[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=Zi(s[a]),h.el=u.el),!e&&h.patchFlag!==-2&&Vm(u,h)),h.type===uu&&(h.el=u.el),h.type===Si&&!h.el&&(h.el=u.el)}}function Pw(n){const t=n.slice(),e=[0];let i,s,a,u,h;const d=n.length;for(i=0;i<d;i++){const g=n[i];if(g!==0){if(s=e[e.length-1],n[s]<g){t[i]=s,e.push(i);continue}for(a=0,u=e.length-1;a<u;)h=a+u>>1,n[e[h]]<g?a=h+1:u=h;g<n[e[a]]&&(a>0&&(t[i]=e[a-1]),e[a]=i)}}for(a=e.length,u=e[a-1];a-- >0;)e[a]=u,u=t[u];return e}function Fm(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fm(t)}function Bf(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const Aw=Symbol.for("v-scx"),Sw=()=>kr(Aw);function Cw(n,t){return uh(n,null,t)}function pl(n,t,e){return uh(n,t,e)}function uh(n,t,e=Xt){const{immediate:i,deep:s,flush:a,once:u}=e,h=He({},e),d=t&&i||!t&&a!=="post";let g;if(ea){if(a==="sync"){const x=Sw();g=x.__watcherHandles||(x.__watcherHandles=[])}else if(!d){const x=()=>{};return x.stop=Gn,x.resume=Gn,x.pause=Gn,x}}const v=je;h.call=(x,F,z)=>ti(x,v,F,z);let w=!1;a==="post"?h.scheduler=x=>{cn(x,v&&v.suspense)}:a!=="sync"&&(w=!0,h.scheduler=(x,F)=>{F?x():sh(x)}),h.augmentJob=x=>{t&&(x.flags|=4),w&&(x.flags|=2,v&&(x.id=v.uid,x.i=v))};const E=zy(n,t,h);return ea&&(g?g.push(E):d&&E()),E}function Rw(n,t,e){const i=this.proxy,s=Pe(n)?n.includes(".")?Bm(i,n):()=>i[n]:n.bind(i,i);let a;Rt(t)?a=t:(a=t.handler,e=t);const u=fa(this),h=uh(s,a.bind(i),e);return u(),h}function Bm(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}const xw=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${rr(t)}Modifiers`]||n[`${Hr(t)}Modifiers`];function Lw(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||Xt;let s=e;const a=t.startsWith("update:"),u=a&&xw(i,t.slice(7));u&&(u.trim&&(s=e.map(v=>Pe(v)?v.trim():v)),u.number&&(s=e.map(oc)));let h,d=i[h=Nu(t)]||i[h=Nu(rr(t))];!d&&a&&(d=i[h=Nu(Hr(t))]),d&&ti(d,n,6,s);const g=i[h+"Once"];if(g){if(!n.emitted)n.emitted={};else if(n.emitted[h])return;n.emitted[h]=!0,ti(g,n,6,s)}}function Um(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const a=n.emits;let u={},h=!1;if(!Rt(n)){const d=g=>{const v=Um(g,t,!0);v&&(h=!0,He(u,v))};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}return!a&&!h?(ce(n)&&i.set(n,null),null):(Pt(a)?a.forEach(d=>u[d]=null):He(u,a),ce(n)&&i.set(n,u),u)}function lu(n,t){return!n||!eu(t)?!1:(t=t.slice(2).replace(/Once$/,""),Wt(n,t[0].toLowerCase()+t.slice(1))||Wt(n,Hr(t))||Wt(n,t))}function Uf(n){const{type:t,vnode:e,proxy:i,withProxy:s,propsOptions:[a],slots:u,attrs:h,emit:d,render:g,renderCache:v,props:w,data:E,setupState:x,ctx:F,inheritAttrs:z}=n,W=Ll(n);let ot,at;try{if(e.shapeFlag&4){const et=s||i,yt=et;ot=Zn(g.call(yt,et,v,w,x,E,F)),at=h}else{const et=t;ot=Zn(et.length>1?et(w,{attrs:h,slots:u,emit:d}):et(w,null)),at=t.props?h:kw(h)}}catch(et){jo.length=0,ou(et,n,1),ot=Pn(Si)}let it=ot;if(at&&z!==!1){const et=Object.keys(at),{shapeFlag:yt}=it;et.length&&yt&7&&(a&&et.some(qc)&&(at=Ow(at,a)),it=Ds(it,at,!1,!0))}return e.dirs&&(it=Ds(it,null,!1,!0),it.dirs=it.dirs?it.dirs.concat(e.dirs):e.dirs),e.transition&&oh(it,e.transition),ot=it,Ll(W),ot}const kw=n=>{let t;for(const e in n)(e==="class"||e==="style"||eu(e))&&((t||(t={}))[e]=n[e]);return t},Ow=(n,t)=>{const e={};for(const i in n)(!qc(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function Mw(n,t,e){const{props:i,children:s,component:a}=n,{props:u,children:h,patchFlag:d}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&d>=0){if(d&1024)return!0;if(d&16)return i?zf(i,u,g):!!u;if(d&8){const v=t.dynamicProps;for(let w=0;w<v.length;w++){const E=v[w];if(u[E]!==i[E]&&!lu(g,E))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:i===u?!1:i?u?zf(i,u,g):!0:!!u;return!1}function zf(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const a=i[s];if(t[a]!==n[a]&&!lu(e,a))return!0}return!1}function Dw({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const zm=n=>n.__isSuspense;function Nw(n,t){t&&t.pendingBranch?Pt(n)?t.effects.push(...n):t.effects.push(n):$y(n)}const hn=Symbol.for("v-fgt"),uu=Symbol.for("v-txt"),Si=Symbol.for("v-cmt"),Hu=Symbol.for("v-stc"),jo=[];let fn=null;function Fe(n=!1){jo.push(fn=n?null:[])}function Vw(){jo.pop(),fn=jo[jo.length-1]||null}let ta=1;function jf(n,t=!1){ta+=n,n<0&&fn&&t&&(fn.hasOnce=!0)}function jm(n){return n.dynamicChildren=ta>0?fn||As:null,Vw(),ta>0&&fn&&fn.push(n),n}function vi(n,t,e,i,s,a){return jm(xe(n,t,e,i,s,a,!0))}function Or(n,t,e,i,s){return jm(Pn(n,t,e,i,s,!0))}function ch(n){return n?n.__v_isVNode===!0:!1}function Ro(n,t){return n.type===t.type&&n.key===t.key}const Hm=({key:n})=>n??null,ml=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Pe(n)||de(n)||Rt(n)?{i:Me,r:n,k:t,f:!!e}:n:null);function xe(n,t=null,e=null,i=0,s=null,a=n===hn?0:1,u=!1,h=!1){const d={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Hm(t),ref:t&&ml(t),scopeId:ym,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Me};return h?(hh(d,e),a&128&&n.normalize(d)):e&&(d.shapeFlag|=Pe(e)?8:16),ta>0&&!u&&fn&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&fn.push(d),d}const Pn=Fw;function Fw(n,t=null,e=null,i=0,s=null,a=!1){if((!n||n===sw)&&(n=Si),ch(n)){const h=Ds(n,t,!0);return e&&hh(h,e),ta>0&&!a&&fn&&(h.shapeFlag&6?fn[fn.indexOf(n)]=h:fn.push(h)),h.patchFlag=-2,h}if(Zw(n)&&(n=n.__vccOpts),t){t=Bw(t);let{class:h,style:d}=t;h&&!Pe(h)&&(t.class=Kc(h)),ce(d)&&(ih(d)&&!Pt(d)&&(d=He({},d)),t.style=Gc(d))}const u=Pe(n)?1:zm(n)?128:Zy(n)?64:ce(n)?4:Rt(n)?2:0;return xe(n,t,e,i,s,u,a,!0)}function Bw(n){return n?ih(n)||Lm(n)?He({},n):n:null}function Ds(n,t,e=!1,i=!1){const{props:s,ref:a,patchFlag:u,children:h,transition:d}=n,g=t?fh(s||{},t):s,v={__v_isVNode:!0,__v_skip:!0,type:n.type,props:g,key:g&&Hm(g),ref:t&&t.ref?e&&a?Pt(a)?a.concat(ml(t)):[a,ml(t)]:ml(t):a,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:h,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==hn?u===-1?16:u|16:u,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:d,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ds(n.ssContent),ssFallback:n.ssFallback&&Ds(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return d&&i&&oh(v,d.clone(v)),v}function Lo(n=" ",t=0){return Pn(uu,null,n,t)}function Hf(n="",t=!1){return t?(Fe(),Or(Si,null,n)):Pn(Si,null,n)}function Zn(n){return n==null||typeof n=="boolean"?Pn(Si):Pt(n)?Pn(hn,null,n.slice()):ch(n)?Zi(n):Pn(uu,null,String(n))}function Zi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ds(n)}function hh(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Pt(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),hh(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!Lm(t)?t._ctx=Me:s===3&&Me&&(Me.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Rt(t)?(t={default:t,_ctx:Me},e=32):(t=String(t),i&64?(e=16,t=[Lo(t)]):e=8);n.children=t,n.shapeFlag|=e}function fh(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Kc([t.class,i.class]));else if(s==="style")t.style=Gc([t.style,i.style]);else if(eu(s)){const a=t[s],u=i[s];u&&a!==u&&!(Pt(a)&&a.includes(u))&&(t[s]=a?[].concat(a,u):u)}else s!==""&&(t[s]=i[s])}return t}function $n(n,t,e,i=null){ti(n,t,7,[e,i])}const Uw=Cm();let zw=0;function jw(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||Uw,a={uid:zw++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Om(i,s),emitsOptions:Um(i,s),emit:null,emitted:null,propsDefaults:Xt,inheritAttrs:i.inheritAttrs,ctx:Xt,data:Xt,props:Xt,attrs:Xt,slots:Xt,refs:Xt,setupState:Xt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Lw.bind(null,a),n.ce&&n.ce(a),a}let je=null,Ol,mc;{const n=ru(),t=(e,i)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(i),a=>{s.length>1?s.forEach(u=>u(a)):s[0](a)}};Ol=t("__VUE_INSTANCE_SETTERS__",e=>je=e),mc=t("__VUE_SSR_SETTERS__",e=>ea=e)}const fa=n=>{const t=je;return Ol(n),n.scope.on(),()=>{n.scope.off(),Ol(t)}},$f=()=>{je&&je.scope.off(),Ol(null)};function $m(n){return n.vnode.shapeFlag&4}let ea=!1;function Hw(n,t=!1,e=!1){t&&mc(t);const{props:i,children:s}=n.vnode,a=$m(n);_w(n,i,a,t),ww(n,s,e||t);const u=a?$w(n,t):void 0;return t&&mc(!1),u}function $w(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,ow);const{setup:i}=e;if(i){Pi();const s=n.setupContext=i.length>1?Ww(n):null,a=fa(n),u=ca(i,n,0,[n.props,s]),h=jp(u);if(Ai(),a(),(h||n.sp)&&!Rs(n)&&wm(n),h){if(u.then($f,$f),t)return u.then(d=>{qf(n,d)}).catch(d=>{ou(d,n,0)});n.asyncDep=u}else qf(n,u)}else qm(n)}function qf(n,t,e){Rt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:ce(t)&&(n.setupState=dm(t)),qm(n)}function qm(n,t,e){const i=n.type;n.render||(n.render=i.render||Gn);{const s=fa(n);Pi();try{aw(n)}finally{Ai(),s()}}}const qw={get(n,t){return Ue(n,"get",""),n[t]}};function Ww(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,qw),slots:n.slots,emit:n.emit,expose:t}}function cu(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(dm(rh(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in zo)return zo[e](n)},has(t,e){return e in t||e in zo}})):n.proxy}function Zw(n){return Rt(n)&&"__vccOpts"in n}const dh=(n,t)=>By(n,t,ea),Gw="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _c;const Wf=typeof window<"u"&&window.trustedTypes;if(Wf)try{_c=Wf.createPolicy("vue",{createHTML:n=>n})}catch{}const Wm=_c?n=>_c.createHTML(n):n=>n,Kw="http://www.w3.org/2000/svg",Qw="http://www.w3.org/1998/Math/MathML",gi=typeof document<"u"?document:null,Zf=gi&&gi.createElement("template"),Jw={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t==="svg"?gi.createElementNS(Kw,n):t==="mathml"?gi.createElementNS(Qw,n):e?gi.createElement(n,{is:e}):gi.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>gi.createTextNode(n),createComment:n=>gi.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>gi.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,a){const u=e?e.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===a||!(s=s.nextSibling)););else{Zf.innerHTML=Wm(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const h=Zf.content;if(i==="svg"||i==="mathml"){const d=h.firstChild;for(;d.firstChild;)h.appendChild(d.firstChild);h.removeChild(d)}t.insertBefore(h,e)}return[u?u.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Xw=Symbol("_vtc");function Yw(n,t,e){const i=n[Xw];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Gf=Symbol("_vod"),tT=Symbol("_vsh"),eT=Symbol(""),nT=/(^|;)\s*display\s*:/;function iT(n,t,e){const i=n.style,s=Pe(e);let a=!1;if(e&&!s){if(t)if(Pe(t))for(const u of t.split(";")){const h=u.slice(0,u.indexOf(":")).trim();e[h]==null&&_l(i,h,"")}else for(const u in t)e[u]==null&&_l(i,u,"");for(const u in e)u==="display"&&(a=!0),_l(i,u,e[u])}else if(s){if(t!==e){const u=i[eT];u&&(e+=";"+u),i.cssText=e,a=nT.test(e)}}else t&&n.removeAttribute("style");Gf in n&&(n[Gf]=a?i.display:"",n[tT]&&(i.display="none"))}const Kf=/\s*!important$/;function _l(n,t,e){if(Pt(e))e.forEach(i=>_l(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=rT(n,t);Kf.test(e)?n.setProperty(Hr(i),e.replace(Kf,""),"important"):n[i]=e}}const Qf=["Webkit","Moz","ms"],$u={};function rT(n,t){const e=$u[t];if(e)return e;let i=rr(t);if(i!=="filter"&&i in n)return $u[t]=i;i=qp(i);for(let s=0;s<Qf.length;s++){const a=Qf[s]+i;if(a in n)return $u[t]=a}return t}const Jf="http://www.w3.org/1999/xlink";function Xf(n,t,e,i,s,a=cy(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Jf,t.slice(6,t.length)):n.setAttributeNS(Jf,t,e):e==null||a&&!Wp(e)?n.removeAttribute(t):n.setAttribute(t,a?"":ki(e)?String(e):e)}function Yf(n,t,e,i,s){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Wm(e):e);return}const a=n.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?n.getAttribute("value")||"":n.value,d=e==null?n.type==="checkbox"?"on":"":String(e);(h!==d||!("_value"in n))&&(n.value=d),e==null&&n.removeAttribute(t),n._value=e;return}let u=!1;if(e===""||e==null){const h=typeof n[t];h==="boolean"?e=Wp(e):e==null&&h==="string"?(e="",u=!0):h==="number"&&(e=0,u=!0)}try{n[t]=e}catch{}u&&n.removeAttribute(s||t)}function Ts(n,t,e,i){n.addEventListener(t,e,i)}function sT(n,t,e,i){n.removeEventListener(t,e,i)}const td=Symbol("_vei");function oT(n,t,e,i,s=null){const a=n[td]||(n[td]={}),u=a[t];if(i&&u)u.value=i;else{const[h,d]=aT(t);if(i){const g=a[t]=cT(i,s);Ts(n,h,g,d)}else u&&(sT(n,h,u,d),a[t]=void 0)}}const ed=/(?:Once|Passive|Capture)$/;function aT(n){let t;if(ed.test(n)){t={};let i;for(;i=n.match(ed);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Hr(n.slice(2)),t]}let qu=0;const lT=Promise.resolve(),uT=()=>qu||(lT.then(()=>qu=0),qu=Date.now());function cT(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;ti(hT(i,e.value),t,5,[i])};return e.value=n,e.attached=uT(),e}function hT(n,t){if(Pt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const nd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,fT=(n,t,e,i,s,a)=>{const u=s==="svg";t==="class"?Yw(n,i,u):t==="style"?iT(n,e,i):eu(t)?qc(t)||oT(n,t,e,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dT(n,t,i,u))?(Yf(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Xf(n,t,i,u,a,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!Pe(i))?Yf(n,rr(t),i,a,t):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),Xf(n,t,i,u))};function dT(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&nd(t)&&Rt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return nd(t)&&Pe(e)?!1:t in n}const id=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Pt(t)?e=>hl(t,e):t};function pT(n){n.target.composing=!0}function rd(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wu=Symbol("_assign"),mT={created(n,{modifiers:{lazy:t,trim:e,number:i}},s){n[Wu]=id(s);const a=i||s.props&&s.props.type==="number";Ts(n,t?"change":"input",u=>{if(u.target.composing)return;let h=n.value;e&&(h=h.trim()),a&&(h=oc(h)),n[Wu](h)}),e&&Ts(n,"change",()=>{n.value=n.value.trim()}),t||(Ts(n,"compositionstart",pT),Ts(n,"compositionend",rd),Ts(n,"change",rd))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:i,trim:s,number:a}},u){if(n[Wu]=id(u),n.composing)return;const h=(a||n.type==="number")&&!/^0\d/.test(n.value)?oc(n.value):n.value,d=t??"";h!==d&&(document.activeElement===n&&n.type!=="range"&&(i&&t===e||s&&n.value.trim()===d)||(n.value=d))}},_T=["ctrl","shift","alt","meta"],gT={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>_T.some(e=>n[`${e}Key`]&&!t.includes(e))},vT=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(s,...a)=>{for(let u=0;u<t.length;u++){const h=gT[t[u]];if(h&&h(s,t))return}return n(s,...a)})},yT=He({patchProp:fT},Jw);let sd;function wT(){return sd||(sd=Ew(yT))}const TT=(...n)=>{const t=wT().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=IT(i);if(!s)return;const a=t._component;!Rt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const u=e(s,!1,ET(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),u},t};function ET(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function IT(n){return Pe(n)?document.querySelector(n):n}const bT=()=>{};var od={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},PT=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[e++];t[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[e++],u=n[e++],h=n[e++],d=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const a=n[e++],u=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return t.join("")},Gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,g=d?n[s+2]:0,v=a>>2,w=(a&3)<<4|h>>4;let E=(h&15)<<2|g>>6,x=g&63;d||(x=64,u||(E=64)),i.push(e[v],e[w],e[E],e[x])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Zm(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):PT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=e[n.charAt(s++)],h=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const w=s<n.length?e[n.charAt(s)]:64;if(++s,a==null||h==null||g==null||w==null)throw new AT;const E=a<<2|h>>4;if(i.push(E),g!==64){const x=h<<4&240|g>>2;if(i.push(x),w!==64){const F=g<<6&192|w;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ST=function(n){const t=Zm(n);return Gm.encodeByteArray(t,!0)},Ml=function(n){return ST(n).replace(/\./g,"")},Km=function(n){try{return Gm.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>CT().__FIREBASE_DEFAULTS__,xT=()=>{if(typeof process>"u"||typeof od>"u")return;const n=od.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Km(n[1]);return t&&JSON.parse(t)},hu=()=>{try{return bT()||RT()||xT()||LT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qm=n=>{var t,e;return(e=(t=hu())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},kT=n=>{const t=Qm(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Jm=()=>{var n;return(n=hu())===null||n===void 0?void 0:n.config},Xm=n=>{var t;return(t=hu())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ym(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ml(JSON.stringify(e)),Ml(JSON.stringify(u)),""].join(".")}const Ho={};function DT(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ho))Ho[t]?n.emulator.push(t):n.prod.push(t);return n}function NT(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let ad=!1;function t_(n,t){if(typeof window>"u"||typeof document>"u"||!Hs(window.location.host)||Ho[n]===t||Ho[n]||ad)return;Ho[n]=t;function e(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=DT().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,x){E.setAttribute("width","24"),E.setAttribute("id",x),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ad=!0,u()},E}function v(E,x){E.setAttribute("id",x),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=NT(i),x=e("text"),F=document.getElementById(x)||document.createElement("span"),z=e("learnmore"),W=document.getElementById(z)||document.createElement("a"),ot=e("preprendIcon"),at=document.getElementById(ot)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const it=E.element;h(it),v(W,z);const et=g();d(at,ot),it.append(at,F,W,et),document.body.appendChild(it)}a?(F.innerText="Preview backend disconnected.",at.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(at.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function FT(){var n;const t=(n=hu())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jT(){const n=$e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HT(){return!FT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function qT(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="FirebaseError";class Mi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=WT,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,da.prototype.create)}}class da{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],u=a?ZT(a,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Mi(s,h,i)}}function ZT(n,t){return n.replace(GT,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const GT=/\{\$([^}]+)}/g;function KT(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Fr(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const a=n[s],u=t[s];if(ld(a)&&ld(u)){if(!Fr(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function ld(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function QT(n,t){const e=new JT(n,t);return e.subscribe.bind(e)}class JT{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");XT(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Zu),s.error===void 0&&(s.error=Zu),s.complete===void 0&&(s.complete=Zu);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XT(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Zu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(n){return n&&n._delegate?n._delegate:n}class Br{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new OT;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),s=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eE(t))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(t=Ar){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ar){return this.instances.has(t)}getOptions(t=Ar){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(t),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&t(u,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tE(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ar){return this.component?this.component.multipleInstances?t:Ar:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tE(n){return n===Ar?void 0:n}function eE(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new YT(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Vt||(Vt={}));const iE={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},rE=Vt.INFO,sE={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},oE=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=sE[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ph{constructor(t){this.name=t,this._logLevel=rE,this._logHandler=oE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const aE=(n,t)=>t.some(e=>n instanceof e);let ud,cd;function lE(){return ud||(ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uE(){return cd||(cd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,gc=new WeakMap,n_=new WeakMap,Gu=new WeakMap,mh=new WeakMap;function cE(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{e(Yi(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&e_.set(e,n)}).catch(()=>{}),mh.set(t,n),t}function hE(n){if(gc.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{e(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});gc.set(n,t)}let vc={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return gc.get(n);if(t==="objectStoreNames")return n.objectStoreNames||n_.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Yi(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function fE(n){vc=n(vc)}function dE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Ku(this),t,...e);return n_.set(i,t.sort?t.sort():[t]),Yi(i)}:uE().includes(n)?function(...t){return n.apply(Ku(this),t),Yi(e_.get(this))}:function(...t){return Yi(n.apply(Ku(this),t))}}function pE(n){return typeof n=="function"?dE(n):(n instanceof IDBTransaction&&hE(n),aE(n,lE())?new Proxy(n,vc):n)}function Yi(n){if(n instanceof IDBRequest)return cE(n);if(Gu.has(n))return Gu.get(n);const t=pE(n);return t!==n&&(Gu.set(n,t),mh.set(t,n)),t}const Ku=n=>mh.get(n);function mE(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(n,t),h=Yi(u);return i&&u.addEventListener("upgradeneeded",d=>{i(Yi(u.result),d.oldVersion,d.newVersion,Yi(u.transaction),d)}),e&&u.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const _E=["get","getKey","getAll","getAllKeys","count"],gE=["put","add","delete","clear"],Qu=new Map;function hd(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Qu.get(t))return Qu.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=gE.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||_E.includes(e)))return;const a=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let g=d.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),s&&d.done]))[0]};return Qu.set(t,a),a}fE(n=>({...n,get:(t,e,i)=>hd(t,e)||n.get(t,e,i),has:(t,e)=>!!hd(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(yE(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function yE(n){const t=n.getComponent();return t?.type==="VERSION"}const yc="@firebase/app",fd="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new ph("@firebase/app"),wE="@firebase/app-compat",TE="@firebase/analytics-compat",EE="@firebase/analytics",IE="@firebase/app-check-compat",bE="@firebase/app-check",PE="@firebase/auth",AE="@firebase/auth-compat",SE="@firebase/database",CE="@firebase/data-connect",RE="@firebase/database-compat",xE="@firebase/functions",LE="@firebase/functions-compat",kE="@firebase/installations",OE="@firebase/installations-compat",ME="@firebase/messaging",DE="@firebase/messaging-compat",NE="@firebase/performance",VE="@firebase/performance-compat",FE="@firebase/remote-config",BE="@firebase/remote-config-compat",UE="@firebase/storage",zE="@firebase/storage-compat",jE="@firebase/firestore",HE="@firebase/ai",$E="@firebase/firestore-compat",qE="firebase",WE="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="[DEFAULT]",ZE={[yc]:"fire-core",[wE]:"fire-core-compat",[EE]:"fire-analytics",[TE]:"fire-analytics-compat",[bE]:"fire-app-check",[IE]:"fire-app-check-compat",[PE]:"fire-auth",[AE]:"fire-auth-compat",[SE]:"fire-rtdb",[CE]:"fire-data-connect",[RE]:"fire-rtdb-compat",[xE]:"fire-fn",[LE]:"fire-fn-compat",[kE]:"fire-iid",[OE]:"fire-iid-compat",[ME]:"fire-fcm",[DE]:"fire-fcm-compat",[NE]:"fire-perf",[VE]:"fire-perf-compat",[FE]:"fire-rc",[BE]:"fire-rc-compat",[UE]:"fire-gcs",[zE]:"fire-gcs-compat",[jE]:"fire-fst",[$E]:"fire-fst-compat",[HE]:"fire-vertex","fire-js":"fire-js",[qE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,GE=new Map,Tc=new Map;function dd(n,t){try{n.container.addComponent(t)}catch(e){Ci.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ns(n){const t=n.name;if(Tc.has(t))return Ci.debug(`There were multiple attempts to register component ${t}.`),!1;Tc.set(t,n);for(const e of Dl.values())dd(e,n);for(const e of GE.values())dd(e,n);return!0}function _h(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new da("app","Firebase",KE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=WE;function i_(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:wc,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw tr.create("bad-app-name",{appName:String(s)});if(e||(e=Jm()),!e)throw tr.create("no-options");const a=Dl.get(s);if(a){if(Fr(e,a.options)&&Fr(i,a.config))return a;throw tr.create("duplicate-app",{appName:s})}const u=new nE(s);for(const d of Tc.values())u.addComponent(d);const h=new QE(e,i,u);return Dl.set(s,h),h}function r_(n=wc){const t=Dl.get(n);if(!t&&n===wc&&Jm())return i_();if(!t)throw tr.create("no-app",{appName:n});return t}function er(n,t,e){var i;let s=(i=ZE[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const a=s.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${t}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ci.warn(h.join(" "));return}Ns(new Br(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firebase-heartbeat-database",XE=1,na="firebase-heartbeat-store";let Ju=null;function s_(){return Ju||(Ju=mE(JE,XE,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(na)}catch(e){console.warn(e)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),Ju}async function YE(n){try{const e=(await s_()).transaction(na),i=await e.objectStore(na).get(o_(n));return await e.done,i}catch(t){if(t instanceof Mi)Ci.warn(t.message);else{const e=tr.create("idb-get",{originalErrorMessage:t?.message});Ci.warn(e.message)}}}async function pd(n,t){try{const i=(await s_()).transaction(na,"readwrite");await i.objectStore(na).put(t,o_(n)),await i.done}catch(e){if(e instanceof Mi)Ci.warn(e.message);else{const i=tr.create("idb-set",{originalErrorMessage:e?.message});Ci.warn(i.message)}}}function o_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,eI=30;class nI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new rI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=md();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>eI){const u=sI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ci.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=md(),{heartbeatsToSend:i,unsentEntries:s}=iI(this._heartbeatsCache.heartbeats),a=Ml(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ci.warn(e),""}}}function md(){return new Date().toISOString().substring(0,10)}function iI(n,t=tI){const e=[];let i=n.slice();for(const s of n){const a=e.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),_d(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),_d(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class rI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?qT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await YE(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return pd(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return pd(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function _d(n){return Ml(JSON.stringify({version:2,heartbeats:n})).length}function sI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){Ns(new Br("platform-logger",t=>new vE(t),"PRIVATE")),Ns(new Br("heartbeat",t=>new nI(t),"PRIVATE")),er(yc,fd,n),er(yc,fd,"esm2017"),er("fire-js","")}oI("");function gh(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e}function a_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aI=a_,l_=new da("auth","Firebase",a_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new ph("@firebase/auth");function lI(n,...t){Nl.logLevel<=Vt.WARN&&Nl.warn(`Auth (${$s}): ${n}`,...t)}function gl(n,...t){Nl.logLevel<=Vt.ERROR&&Nl.error(`Auth (${$s}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n,...t){throw yh(n,...t)}function Vn(n,...t){return yh(n,...t)}function vh(n,t,e){const i=Object.assign(Object.assign({},aI()),{[t]:e});return new da("auth","Firebase",i).create(t,{appName:n.name})}function Mr(n){return vh(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uI(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ei(n,"argument-error"),vh(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yh(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return l_.create(n,...t)}function Tt(n,t,...e){if(!n)throw yh(t,...e)}function Ei(n){const t="INTERNAL ASSERTION FAILED: "+n;throw gl(t),new Error(t)}function Ri(n,t){n||Ei(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cI(){return gd()==="http:"||gd()==="https:"}function gd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cI()||UT()||"connection"in navigator)?navigator.onLine:!0}function fI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ri(e>t,"Short delay should be less than long delay!"),this.isMobile=VT()||zT()}get(){return hI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n,t){Ri(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mI=new ma(3e4,6e4);function Th(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function qs(n,t,e,i,s={}){return c_(n,s,async()=>{let a={},u={};i&&(t==="GET"?u=i:a={body:JSON.stringify(i)});const h=pa(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:d},a);return BT()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Hs(n.emulatorConfig.host)&&(g.credentials="include"),u_.fetch()(await h_(n,n.config.apiHost,e,h),g)})}async function c_(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},dI),t);try{const s=new gI(n),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw rl(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[d,g]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw rl(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw rl(n,"user-disabled",u);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw vh(n,v,g);ei(n,v)}}catch(s){if(s instanceof Mi)throw s;ei(n,"network-request-failed",{message:String(s)})}}async function _I(n,t,e,i,s={}){const a=await qs(n,t,e,i,s);return"mfaPendingCredential"in a&&ei(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function h_(n,t,e,i){const s=`${t}${e}?${i}`,a=n,u=a.config.emulator?wh(n.config,s):`${n.config.apiScheme}://${s}`;return pI.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class gI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),mI.get())})}}function rl(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Vn(n,t,i);return s.customData._tokenResponse=e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(n,t){return qs(n,"POST","/v1/accounts:delete",t)}async function Vl(n,t){return qs(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yI(n,t=!1){const e=Je(n),i=await e.getIdToken(t),s=Eh(i);Tt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:i,authTime:$o(Xu(s.auth_time)),issuedAtTime:$o(Xu(s.iat)),expirationTime:$o(Xu(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Xu(n){return Number(n)*1e3}function Eh(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return gl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Km(e);return s?JSON.parse(s):(gl("Failed to decode base64 JWT payload"),null)}catch(s){return gl("Caught error parsing JWT payload as JSON",s?.toString()),null}}function vd(n){const t=Eh(n);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Mi&&wI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(n){var t;const e=n.auth,i=await n.getIdToken(),s=await ia(n,Vl(e,{idToken:i}));Tt(s?.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?f_(a.providerUserInfo):[],h=II(n.providerData,u),d=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!h?.length,v=d?g:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ic(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function EI(n){const t=Je(n);await Fl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function II(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function f_(n){return n.map(t=>{var{providerId:e}=t,i=gh(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(n,t){const e=await c_(n,{},async()=>{const i=pa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await h_(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Hs(n.emulatorConfig.host)&&(d.credentials="include"),u_.fetch()(u,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function PI(n,t){return qs(n,"POST","/v2/accounts:revokeToken",Th(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vd(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=vd(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:a}=await bI(t,e);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:a}=e,u=new xs;return i&&(Tt(typeof i=="string","internal-error",{appName:t}),u.refreshToken=i),s&&(Tt(typeof s=="string","internal-error",{appName:t}),u.accessToken=s),a&&(Tt(typeof a=="number","internal-error",{appName:t}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,t){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class On{constructor(t){var{uid:e,auth:i,stsTokenManager:s}=t,a=gh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ic(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await ia(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return yI(this,t)}reload(){return EI(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new On(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Fl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Mr(this.auth));const t=await this.getIdToken();return await ia(this,vI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,s,a,u,h,d,g,v;const w=(i=e.displayName)!==null&&i!==void 0?i:void 0,E=(s=e.email)!==null&&s!==void 0?s:void 0,x=(a=e.phoneNumber)!==null&&a!==void 0?a:void 0,F=(u=e.photoURL)!==null&&u!==void 0?u:void 0,z=(h=e.tenantId)!==null&&h!==void 0?h:void 0,W=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,ot=(g=e.createdAt)!==null&&g!==void 0?g:void 0,at=(v=e.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:it,emailVerified:et,isAnonymous:yt,providerData:Bt,stsTokenManager:O}=e;Tt(it&&O,t,"internal-error");const I=xs.fromJSON(this.name,O);Tt(typeof it=="string",t,"internal-error"),$i(w,t.name),$i(E,t.name),Tt(typeof et=="boolean",t,"internal-error"),Tt(typeof yt=="boolean",t,"internal-error"),$i(x,t.name),$i(F,t.name),$i(z,t.name),$i(W,t.name),$i(ot,t.name),$i(at,t.name);const b=new On({uid:it,auth:t,email:E,emailVerified:et,displayName:w,isAnonymous:yt,photoURL:F,phoneNumber:x,tenantId:z,stsTokenManager:I,createdAt:ot,lastLoginAt:at});return Bt&&Array.isArray(Bt)&&(b.providerData=Bt.map(C=>Object.assign({},C))),W&&(b._redirectEventId=W),b}static async _fromIdTokenResponse(t,e,i=!1){const s=new xs;s.updateFromServerResponse(e);const a=new On({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Fl(a),a}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Tt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?f_(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new xs;h.updateFromIdToken(i);const d=new On({uid:s.localId,auth:t,stsTokenManager:h,isAnonymous:u}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ic(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,g),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map;function Ii(n){Ri(n instanceof Function,"Expected a class definition");let t=yd.get(n);return t?(Ri(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,yd.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}d_.type="NONE";const wd=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n,t,e){return`firebase:${n}:${t}:${e}`}class Ls{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=vl(this.userKey,s.apiKey,a),this.fullPersistenceKey=vl("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Vl(this.auth,{idToken:t}).catch(()=>{});return e?On._fromGetAccountInfoResponse(this.auth,e,t):null}return On._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Ls(Ii(wd),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=s[0]||Ii(wd);const u=vl(i,t.config.apiKey,t.name);let h=null;for(const g of e)try{const v=await g._get(u);if(v){let w;if(typeof v=="string"){const E=await Vl(t,{idToken:v}).catch(()=>{});if(!E)break;w=await On._fromGetAccountInfoResponse(t,E,v)}else w=On._fromJSON(t,v);g!==a&&(h=w),a=g;break}}catch{}const d=s.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ls(a,t,i):(a=d[0],h&&await a._set(u,h.toJSON()),await Promise.all(e.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new Ls(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(g_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(p_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(y_(t))return"Blackberry";if(w_(t))return"Webos";if(m_(t))return"Safari";if((t.includes("chrome/")||__(t))&&!t.includes("edge/"))return"Chrome";if(v_(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function p_(n=$e()){return/firefox\//i.test(n)}function m_(n=$e()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function __(n=$e()){return/crios\//i.test(n)}function g_(n=$e()){return/iemobile/i.test(n)}function v_(n=$e()){return/android/i.test(n)}function y_(n=$e()){return/blackberry/i.test(n)}function w_(n=$e()){return/webos/i.test(n)}function Ih(n=$e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AI(n=$e()){var t;return Ih(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function SI(){return jT()&&document.documentMode===10}function T_(n=$e()){return Ih(n)||v_(n)||w_(n)||y_(n)||/windows phone/i.test(n)||g_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,t=[]){let e;switch(n){case"Browser":e=Td($e());break;case"Worker":e=`${Td($e())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${$s}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=a=>new Promise((u,h)=>{try{const d=t(a);u(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(n,t={}){return qs(n,"GET","/v2/passwordPolicy",Th(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=6;class LI{constructor(t){var e,i,s,a;const u=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=u.minPasswordLength)!==null&&e!==void 0?e:xI,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,s,a,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ed(this),this.idTokenSubscription=new Ed(this),this.beforeStateQueue=new CI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ii(e)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Vl(this,{idToken:t}),i=await On._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=s?._redirectEventId,d=await this.tryRedirectSignIn(t);(!u||u===h)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Fl(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kn(this.app))return Promise.reject(Mr(this));const e=t?Je(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await RI(this),e=new LI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new da("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await PI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ii(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Ii(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,s);return()=>{u=!0,d()}}else{const d=t.addObserver(e);return()=>{u=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&lI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fu(n){return Je(n)}class Ed{constructor(t){this.auth=t,this.observer=null,this.addObserver=QT(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OI(n){bh=n}function MI(n){return bh.loadJS(n)}function DI(){return bh.gapiScript}function NI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(n,t){const e=_h(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(Fr(a,t??{}))return s;ei(s,"already-initialized")}return e.initialize({options:t})}function FI(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Ii);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function BI(n,t,e){const i=fu(n);Tt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,a=I_(t),{host:u,port:h}=UI(t),d=h===null?"":`:${h}`,g={url:`${a}//${u}${d}/`},v=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Tt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Tt(Fr(g,i.config.emulator)&&Fr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Hs(u)?(Ym(`${a}//${u}${d}`),t_("Auth",!0)):zI()}function I_(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function UI(n){const t=I_(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:Id(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Id(u)}}}function Id(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function zI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ei("not implemented")}_getIdTokenResponse(t){return Ei("not implemented")}_linkToIdToken(t,e){return Ei("not implemented")}_getReauthenticationResolver(t){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(n,t){return _I(n,"POST","/v1/accounts:signInWithIdp",Th(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="http://localhost";class Ur extends b_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ur(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ei("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=e,a=gh(e,["providerId","signInMethod"]);if(!i||!s)return null;const u=new Ur(i,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(t){const e=this.buildRequest();return ks(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,ks(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ks(t,e)}buildRequest(){const t={requestUri:jI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=pa(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Ph{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends _a{constructor(){super("facebook.com")}static credential(t){return Ur._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gi.credentialFromTaggedObject(t)}static credentialFromError(t){return Gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gi.credential(t.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends _a{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ur._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ti.credentialFromTaggedObject(t)}static credentialFromError(t){return Ti.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ti.credential(e,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends _a{constructor(){super("github.com")}static credential(t){return Ur._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ki.credentialFromTaggedObject(t)}static credentialFromError(t){return Ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ki.credential(t.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends _a{constructor(){super("twitter.com")}static credential(t,e){return Ur._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Qi.credentialFromTaggedObject(t)}static credentialFromError(t){return Qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Qi.credential(e,i)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const a=await On._fromIdTokenResponse(t,i,s),u=bd(i);return new Vs({user:a,providerId:u,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=bd(i);return new Vs({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function bd(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Mi{constructor(t,e,i,s){var a;super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Bl.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Bl(t,e,i,s)}}function P_(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bl._fromErrorAndOperation(n,a,t,i):a})}async function HI(n,t,e=!1){const i=await ia(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Vs._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,t,e=!1){const{auth:i}=n;if(kn(i.app))return Promise.reject(Mr(i));const s="reauthenticate";try{const a=await ia(n,P_(i,s,t,n),e);Tt(a.idToken,i,"internal-error");const u=Eh(a.idToken);Tt(u,i,"internal-error");const{sub:h}=u;return Tt(n.uid===h,i,"user-mismatch"),Vs._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ei(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(n,t,e=!1){if(kn(n.app))return Promise.reject(Mr(n));const i="signIn",s=await P_(n,i,t),a=await Vs._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(a.user),a}function WI(n,t,e,i){return Je(n).onIdTokenChanged(t,e,i)}function ZI(n,t,e){return Je(n).beforeAuthStateChanged(t,e)}function A_(n,t,e,i){return Je(n).onAuthStateChanged(t,e,i)}function GI(n){return Je(n).signOut()}const Ul="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ul,"1"),this.storage.removeItem(Ul),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=1e3,QI=10;class C_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!e&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);SI()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,QI):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},KI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}C_.type="LOCAL";const JI=C_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}R_.type="SESSION";const x_=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new du(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:a}=e.data,u=this.handlersMap[s];if(!u?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(u).map(async g=>g(e.origin,a)),d=await XI(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,d)=>{const g=Ah("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(w){const E=w;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(v),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return window}function t0(n){Kn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}async function e0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n0(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function i0(){return L_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebaseLocalStorageDb",r0=1,zl="firebaseLocalStorage",O_="fbase_key";class ga{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function pu(n,t){return n.transaction([zl],t?"readwrite":"readonly").objectStore(zl)}function s0(){const n=indexedDB.deleteDatabase(k_);return new ga(n).toPromise()}function bc(){const n=indexedDB.open(k_,r0);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(zl,{keyPath:O_})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(zl)?t(i):(i.close(),await s0(),t(await bc()))})})}async function Pd(n,t,e){const i=pu(n,!0).put({[O_]:t,value:e});return new ga(i).toPromise()}async function o0(n,t){const e=pu(n,!1).get(t),i=await new ga(e).toPromise();return i===void 0?null:i.value}function Ad(n,t){const e=pu(n,!0).delete(t);return new ga(e).toPromise()}const a0=800,l0=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bc(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>l0)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(i0()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await e0(),!this.activeServiceWorker)return;this.sender=new YI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||n0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bc();return await Pd(t,Ul,"1"),await Ad(t,Ul),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Pd(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>o0(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Ad(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=pu(s,!1).getAll();return new ga(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const u0=M_;new ma(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n,t){return t?Ii(t):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends b_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ks(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ks(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ks(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function c0(n){return qI(n.auth,new Sh(n),n.bypassAuthState)}function h0(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),$I(e,new Sh(n),n.bypassAuthState)}async function f0(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),HI(e,new Sh(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(t,e,i,s,a=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:a,error:u,type:h}=t;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return c0;case"linkViaPopup":case"linkViaRedirect":return f0;case"reauthViaPopup":case"reauthViaRedirect":return h0;default:ei(this.auth,"internal-error")}}resolve(t){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new ma(2e3,1e4);async function p0(n,t,e){if(kn(n.app))return Promise.reject(Vn(n,"operation-not-supported-in-this-environment"));const i=fu(n);uI(n,t,Ph);const s=D_(i,e);return new Sr(i,"signInViaPopup",t,s).executeNotNull()}class Sr extends N_{constructor(t,e,i,s,a){super(t,e,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const t=Ah();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,d0.get())};t()}}Sr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="pendingRedirect",yl=new Map;class _0 extends N_{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=yl.get(this.auth._key());if(!t){try{const i=await g0(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}yl.set(this.auth._key(),t)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g0(n,t){const e=w0(t),i=y0(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function v0(n,t){yl.set(n._key(),t)}function y0(n){return Ii(n._redirectPersistence)}function w0(n){return vl(m0,n.config.apiKey,n.name)}async function T0(n,t,e=!1){if(kn(n.app))return Promise.reject(Mr(n));const i=fu(n),s=D_(i,t),u=await new _0(i,s,e).execute();return u&&!e&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,t)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=10*60*1e3;class I0{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!b0(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!V_(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Vn(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=E0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sd(t))}saveEventToCache(t){this.cachedEventUids.add(Sd(t)),this.lastProcessedEventTime=Date.now()}}function Sd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function V_({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function b0(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0(n,t={}){return qs(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S0=/^https?/;async function C0(n){if(n.config.emulator)return;const{authorizedDomains:t}=await P0(n);for(const e of t)try{if(R0(e))return}catch{}ei(n,"unauthorized-domain")}function R0(n){const t=Ec(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&u.hostname===i}if(!S0.test(e))return!1;if(A0.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new ma(3e4,6e4);function Cd(){const n=Kn().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function L0(n){return new Promise((t,e)=>{var i,s,a;function u(){Cd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cd(),e(Vn(n,"network-request-failed"))},timeout:x0.get()})}if(!((s=(i=Kn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((a=Kn().gapi)===null||a===void 0)&&a.load)u();else{const h=NI("iframefcb");return Kn()[h]=()=>{gapi.load?u():e(Vn(n,"network-request-failed"))},MI(`${DI()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw wl=null,t})}let wl=null;function k0(n){return wl=wl||L0(n),wl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new ma(5e3,15e3),M0="__/auth/iframe",D0="emulator/auth/iframe",N0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F0(n){const t=n.config;Tt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?wh(t,D0):`https://${n.config.authDomain}/${M0}`,i={apiKey:t.apiKey,appName:n.name,v:$s},s=V0.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${e}?${pa(i).slice(1)}`}async function B0(n){const t=await k0(n),e=Kn().gapi;return Tt(e,n,"internal-error"),t.open({where:document.body,url:F0(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N0,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const u=Vn(n,"network-request-failed"),h=Kn().setTimeout(()=>{a(u)},O0.get());function d(){Kn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z0=500,j0=600,H0="_blank",$0="http://localhost";class Rd{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q0(n,t,e,i=z0,s=j0){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},U0),{width:i.toString(),height:s.toString(),top:a,left:u}),g=$e().toLowerCase();e&&(h=__(g)?H0:e),p_(g)&&(t=t||$0,d.scrollbars="yes");const v=Object.entries(d).reduce((E,[x,F])=>`${E}${x}=${F},`,"");if(AI(g)&&h!=="_self")return W0(t||"",h),new Rd(null);const w=window.open(t||"",h,v);Tt(w,n,"popup-blocked");try{w.focus()}catch{}return new Rd(w)}function W0(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="__/auth/handler",G0="emulator/auth/handler",K0=encodeURIComponent("fac");async function xd(n,t,e,i,s,a){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:$s,eventId:s};if(t instanceof Ph){t.setDefaultLanguage(n.languageCode),u.providerId=t.providerId||"",KT(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(t instanceof _a){const v=t.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await n._getAppCheckToken(),g=d?`#${K0}=${encodeURIComponent(d)}`:"";return`${Q0(n)}?${pa(h).slice(1)}${g}`}function Q0({config:n}){return n.emulator?wh(n,G0):`https://${n.authDomain}/${Z0}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="webStorageSupport";class J0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x_,this._completeRedirectFn=T0,this._overrideRedirectResult=v0}async _openPopup(t,e,i,s){var a;Ri((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await xd(t,e,i,Ec(),s);return q0(t,u,Ah())}async _openRedirect(t,e,i,s){await this._originValidation(t);const a=await xd(t,e,i,Ec(),s);return t0(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(Ri(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await B0(t),i=new I0(t);return e.register("authEvent",s=>(Tt(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Yu,{type:Yu},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[Yu];u!==void 0&&e(!!u),ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=C0(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return T_()||m_()||Ih()}}const X0=J0;var Ld="@firebase/auth",kd="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eb(n){Ns(new Br("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Tt(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(n)},g=new kI(i,s,a,d);return FI(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ns(new Br("auth-internal",t=>{const e=fu(t.getProvider("auth").getImmediate());return(i=>new Y0(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(Ld,kd,tb(n)),er(Ld,kd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=5*60,ib=Xm("authIdTokenMaxAge")||nb;let Od=null;const rb=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>ib)return;const s=e?.token;Od!==s&&(Od=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sb(n=r_()){const t=_h(n,"auth");if(t.isInitialized())return t.getImmediate();const e=VI(n,{popupRedirectResolver:X0,persistence:[u0,JI,x_]}),i=Xm("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=rb(a.toString());ZI(e,u,()=>u(e.currentUser)),WI(e,h=>u(h))}}const s=Qm("auth");return s&&BI(e,`http://${s}`),e}function ob(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}OI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const a=Vn("internal-error");a.customData=s,e(a)},i.type="text/javascript",i.charset="UTF-8",ob().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eb("Browser");function ab(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ko={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var lb=ko.exports,Md;function ub(){return Md||(Md=1,function(n,t){(function(e,i){i(t)})(lb,function(e){var i="1.9.4";function s(r){var o,c,f,m;for(c=1,f=arguments.length;c<f;c++){m=arguments[c];for(o in m)r[o]=m[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function u(r,o){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(o,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function g(r,o,c){var f,m,y,S;return S=function(){f=!1,m&&(y.apply(c,m),m=!1)},y=function(){f?m=arguments:(r.apply(c,arguments),setTimeout(S,o),f=!0)},y}function v(r,o,c){var f=o[1],m=o[0],y=f-m;return r===f&&c?r:((r-m)%y+y)%y+m}function w(){return!1}function E(r,o){if(o===!1)return r;var c=Math.pow(10,o===void 0?6:o);return Math.round(r*c)/c}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return x(r).split(/\s+/)}function z(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var c in o)r.options[c]=o[c];return r.options}function W(r,o,c){var f=[];for(var m in r)f.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var ot=/\{ *([\w_ -]+) *\}/g;function at(r,o){return r.replace(ot,function(c,f){var m=o[f];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(o)),m})}var it=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function et(r,o){for(var c=0;c<r.length;c++)if(r[c]===o)return c;return-1}var yt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Bt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var O=0;function I(r){var o=+new Date,c=Math.max(0,16-(o-O));return O=o+c,window.setTimeout(r,c)}var b=window.requestAnimationFrame||Bt("RequestAnimationFrame")||I,C=window.cancelAnimationFrame||Bt("CancelAnimationFrame")||Bt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function R(r,o,c){if(c&&b===I)r.call(o);else return b.call(window,u(r,o))}function M(r){r&&C.call(window,r)}var A={__proto__:null,extend:s,create:a,bind:u,get lastId(){return h},stamp:d,throttle:g,wrapNum:v,falseFn:w,formatNum:E,trim:x,splitWords:F,setOptions:z,getParamString:W,template:at,isArray:it,indexOf:et,emptyImageUrl:yt,requestFn:b,cancelFn:C,requestAnimFrame:R,cancelAnimFrame:M};function ee(){}ee.extend=function(r){var o=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,f=a(c);f.constructor=o,o.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return r.statics&&s(o,r.statics),r.includes&&(dn(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?a(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,S=f._initHooks.length;y<S;y++)f._initHooks[y].call(this)}},o},ee.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},ee.mergeOptions=function(r){return s(this.prototype.options,r),this},ee.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function dn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=it(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var kt={on:function(r,o,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],o);else{r=F(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],o,c)}return this},off:function(r,o,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],o);else{r=F(r);for(var m=arguments.length===1,y=0,S=r.length;y<S;y++)m?this._off(r[y]):this._off(r[y],o,c)}return this},_on:function(r,o,c,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,c)===!1){c===this&&(c=void 0);var m={fn:o,ctx:c};f&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,o,c){var f,m,y;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=w;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var S=this._listens(r,o,c);if(S!==!1){var N=f[S];this._firingCount&&(N.fn=w,this._events[r]=f=f.slice()),f.splice(S,1)}}},fire:function(r,o,c){if(!this.listens(r,c))return this;var f=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,S=m.length;y<S;y++){var N=m[y],V=N.fn;N.once&&this.off(r,V,N.ctx),V.call(N.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,o,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(f=!!o,m=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,m,c)!==!1)return!0;if(f){for(var S in this._eventParents)if(this._eventParents[S].listens(r,o,c,f))return!0}return!1},_listens:function(r,o,c){if(!this._events)return!1;var f=this._events[r]||[];if(!o)return!!f.length;c===this&&(c=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===o&&f[m].ctx===c)return m;return!1},once:function(r,o,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],o,!0);else{r=F(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],o,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};kt.addEventListener=kt.on,kt.removeEventListener=kt.clearAllEventListeners=kt.off,kt.addOneTimeEventListener=kt.once,kt.fireEvent=kt.fire,kt.hasEventListeners=kt.listens;var wt=ee.extend(kt);function nt(r,o,c){this.x=c?Math.round(r):r,this.y=c?Math.round(o):o}var Xe=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};nt.prototype={clone:function(){return new nt(this.x,this.y)},add:function(r){return this.clone()._add(pt(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(pt(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new nt(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new nt(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xe(this.x),this.y=Xe(this.y),this},distanceTo:function(r){r=pt(r);var o=r.x-this.x,c=r.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(r){return r=pt(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=pt(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function pt(r,o,c){return r instanceof nt?r:it(r)?new nt(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new nt(r.x,r.y):new nt(r,o,c)}function $t(r,o){if(r)for(var c=o?[r,o]:r,f=0,m=c.length;f<m;f++)this.extend(c[f])}$t.prototype={extend:function(r){var o,c;if(!r)return this;if(r instanceof nt||typeof r[0]=="number"||"x"in r)o=c=pt(r);else if(r=Ut(r),o=r.min,c=r.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return pt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return pt(this.min.x,this.max.y)},getTopRight:function(){return pt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,c;return typeof r[0]=="number"||r instanceof nt?r=pt(r):r=Ut(r),r instanceof $t?(o=r.min,c=r.max):o=c=r,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=Ut(r);var o=this.min,c=this.max,f=r.min,m=r.max,y=m.x>=o.x&&f.x<=c.x,S=m.y>=o.y&&f.y<=c.y;return y&&S},overlaps:function(r){r=Ut(r);var o=this.min,c=this.max,f=r.min,m=r.max,y=m.x>o.x&&f.x<c.x,S=m.y>o.y&&f.y<c.y;return y&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,c=this.max,f=Math.abs(o.x-c.x)*r,m=Math.abs(o.y-c.y)*r;return Ut(pt(o.x-f,o.y-m),pt(c.x+f,c.y+m))},equals:function(r){return r?(r=Ut(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Ut(r,o){return!r||r instanceof $t?r:new $t(r,o)}function zt(r,o){if(r)for(var c=o?[r,o]:r,f=0,m=c.length;f<m;f++)this.extend(c[f])}zt.prototype={extend:function(r){var o=this._southWest,c=this._northEast,f,m;if(r instanceof Dt)f=r,m=r;else if(r instanceof zt){if(f=r._southWest,m=r._northEast,!f||!m)return this}else return r?this.extend(Ct(r)||ie(r)):this;return!o&&!c?(this._southWest=new Dt(f.lat,f.lng),this._northEast=new Dt(m.lat,m.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(r){var o=this._southWest,c=this._northEast,f=Math.abs(o.lat-c.lat)*r,m=Math.abs(o.lng-c.lng)*r;return new zt(new Dt(o.lat-f,o.lng-m),new Dt(c.lat+f,c.lng+m))},getCenter:function(){return new Dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Dt||"lat"in r?r=Ct(r):r=ie(r);var o=this._southWest,c=this._northEast,f,m;return r instanceof zt?(f=r.getSouthWest(),m=r.getNorthEast()):f=m=r,f.lat>=o.lat&&m.lat<=c.lat&&f.lng>=o.lng&&m.lng<=c.lng},intersects:function(r){r=ie(r);var o=this._southWest,c=this._northEast,f=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>=o.lat&&f.lat<=c.lat,S=m.lng>=o.lng&&f.lng<=c.lng;return y&&S},overlaps:function(r){r=ie(r);var o=this._southWest,c=this._northEast,f=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>o.lat&&f.lat<c.lat,S=m.lng>o.lng&&f.lng<c.lng;return y&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=ie(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(r,o){return r instanceof zt?r:new zt(r,o)}function Dt(r,o,c){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,c!==void 0&&(this.alt=+c)}Dt.prototype={equals:function(r,o){if(!r)return!1;r=Ct(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return Ye.distance(this,Ct(r))},wrap:function(){return Ye.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ie([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new Dt(this.lat,this.lng,this.alt)}};function Ct(r,o,c){return r instanceof Dt?r:it(r)&&typeof r[0]!="object"?r.length===3?new Dt(r[0],r[1],r[2]):r.length===2?new Dt(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Dt(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new Dt(r,o,c)}var Te={latLngToPoint:function(r,o){var c=this.projection.project(r),f=this.scale(o);return this.transformation._transform(c,f)},pointToLatLng:function(r,o){var c=this.scale(o),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(o.min,c),m=this.transformation.transform(o.max,c);return new $t(f,m)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new Dt(c,o,f)},wrapLatLngBounds:function(r){var o=r.getCenter(),c=this.wrapLatLng(o),f=o.lat-c.lat,m=o.lng-c.lng;if(f===0&&m===0)return r;var y=r.getSouthWest(),S=r.getNorthEast(),N=new Dt(y.lat-f,y.lng-m),V=new Dt(S.lat-f,S.lng-m);return new zt(N,V)}},Ye=s({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var c=Math.PI/180,f=r.lat*c,m=o.lat*c,y=Math.sin((o.lat-r.lat)*c/2),S=Math.sin((o.lng-r.lng)*c/2),N=y*y+Math.cos(f)*Math.cos(m)*S*S,V=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N));return this.R*V}}),fr=6378137,tn={R:fr,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),m=Math.sin(f*o);return new nt(this.R*r.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var o=180/Math.PI;return new Dt((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=fr*Math.PI;return new $t([-r,-r],[r,r])}()};function ii(r,o,c,f){if(it(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=c,this._d=f}ii.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new nt((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function P(r,o,c,f){return new ii(r,o,c,f)}var k=s({},Ye,{code:"EPSG:3857",projection:tn,transformation:function(){var r=.5/(Math.PI*tn.R);return P(r,.5,-r,.5)}()}),U=s({},k,{code:"EPSG:900913"});function G(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function $(r,o){var c="",f,m,y,S,N,V;for(f=0,y=r.length;f<y;f++){for(N=r[f],m=0,S=N.length;m<S;m++)V=N[m],c+=(m?"L":"M")+V.x+" "+V.y;c+=o?ht.svg?"z":"x":""}return c||"M0 0"}var Z=document.documentElement.style,Y="ActiveXObject"in window,J=Y&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),K=pn("webkit"),ct=pn("android"),tt=pn("android 2")||pn("android 3"),ut=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),mt=ct&&pn("Google")&&ut<537&&!("AudioNode"in window),ft=!!window.opera,It=!Q&&pn("chrome"),Ot=pn("gecko")&&!K&&!ft&&!Y,Ee=!It&&pn("safari"),pe=pn("phantom"),qe="OTransition"in Z,Ae=navigator.platform.indexOf("Win")===0,An=Y&&"transition"in Z,ri="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tt,me="MozPerspective"in Z,en=!window.L_DISABLE_3D&&(An||ri||me)&&!qe&&!pe,Bn=typeof orientation<"u"||pn("mobile"),Js=Bn&&K,ba=Bn&&ri,Xs=!window.PointerEvent&&window.MSPointerEvent,Di=!!(window.PointerEvent||Xs),Gr="ontouchstart"in window||!!window.TouchEvent,Ys=!window.L_NO_TOUCH&&(Gr||Di),si=Bn&&ft,Pa=Bn&&Ot,Kr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Aa=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,o),window.removeEventListener("testPassiveEventSupport",w,o)}catch{}return r}(),dr=function(){return!!document.createElement("canvas").getContext}(),Qr=!!(document.createElementNS&&G("svg").createSVGRect),Le=!!Qr&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Sa=!Qr&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),pr=navigator.platform.indexOf("Mac")===0,mr=navigator.platform.indexOf("Linux")===0;function pn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ht={ie:Y,ielt9:J,edge:Q,webkit:K,android:ct,android23:tt,androidStock:mt,opera:ft,chrome:It,gecko:Ot,safari:Ee,phantom:pe,opera12:qe,win:Ae,ie3d:An,webkit3d:ri,gecko3d:me,any3d:en,mobile:Bn,mobileWebkit:Js,mobileWebkit3d:ba,msPointer:Xs,pointer:Di,touch:Ys,touchNative:Gr,mobileOpera:si,mobileGecko:Pa,retina:Kr,passiveEvents:Aa,canvas:dr,svg:Qr,vml:Sa,inlineSvg:Le,mac:pr,linux:mr},oi=ht.msPointer?"MSPointerDown":"pointerdown",Ca=ht.msPointer?"MSPointerMove":"pointermove",Ra=ht.msPointer?"MSPointerUp":"pointerup",_r=ht.msPointer?"MSPointerCancel":"pointercancel",Jr={touchstart:oi,touchmove:Ca,touchend:Ra,touchcancel:_r},Xr={touchstart:ts,touchmove:Yr,touchend:Yr,touchcancel:Yr},Sn={},Cn=!1;function xa(r,o,c){return o==="touchstart"&&ka(),Xr[o]?(c=Xr[o].bind(this,c),r.addEventListener(Jr[o],c,!1),c):(console.warn("wrong event specified:",o),w)}function La(r,o,c){if(!Jr[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(Jr[o],c,!1)}function to(r){Sn[r.pointerId]=r}function eo(r){Sn[r.pointerId]&&(Sn[r.pointerId]=r)}function no(r){delete Sn[r.pointerId]}function ka(){Cn||(document.addEventListener(oi,to,!0),document.addEventListener(Ca,eo,!0),document.addEventListener(Ra,no,!0),document.addEventListener(_r,no,!0),Cn=!0)}function Yr(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in Sn)o.touches.push(Sn[c]);o.changedTouches=[o],r(o)}}function ts(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&oe(o),Yr(r,o)}function Oa(r){var o={},c,f;for(f in r)c=r[f],o[f]=c&&c.bind?c.bind(r):c;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var io=200;function gr(r,o){r.addEventListener("dblclick",o);var c=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var S=_o(y);if(!(S.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!S.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var N=Date.now();N-c<=io?(f++,f===2&&o(Oa(y))):f=1,c=N}}}return r.addEventListener("click",m),{dblclick:o,simDblclick:m}}function ai(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var vr=ui(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yr=ui(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ro=yr==="webkitTransition"||yr==="OTransition"?yr+"End":"transitionend";function so(r){return typeof r=="string"?document.getElementById(r):r}function Ni(r,o){var c=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[o]:null}return c==="auto"?null:c}function Nt(r,o,c){var f=document.createElement(r);return f.className=o||"",c&&c.appendChild(f),f}function Jt(r){var o=r.parentNode;o&&o.removeChild(r)}function wr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function li(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Vi(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function oo(r,o){if(r.classList!==void 0)return r.classList.contains(o);var c=mn(r);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function St(r,o){if(r.classList!==void 0)for(var c=F(o),f=0,m=c.length;f<m;f++)r.classList.add(c[f]);else if(!oo(r,o)){var y=mn(r);ao(r,(y?y+" ":"")+o)}}function re(r,o){r.classList!==void 0?r.classList.remove(o):ao(r,x((" "+mn(r)+" ").replace(" "+o+" "," ")))}function ao(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function mn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function ue(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&es(r,o)}function es(r,o){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):r.style.filter+=" progid:"+f+"(opacity="+o+")"}function ui(r){for(var o=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in o)return r[c];return!1}function Un(r,o,c){var f=o||new nt(0,0);r.style[vr]=(ht.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Et(r,o){r._leaflet_pos=o,ht.any3d?Un(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function _n(r){return r._leaflet_pos||new nt(0,0)}var Rn,xn,lo;if("onselectstart"in document)Rn=function(){_t(window,"selectstart",oe)},xn=function(){Kt(window,"selectstart",oe)};else{var Fi=ui(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rn=function(){if(Fi){var r=document.documentElement.style;lo=r[Fi],r[Fi]="none"}},xn=function(){Fi&&(document.documentElement.style[Fi]=lo,lo=void 0)}}function uo(){_t(window,"dragstart",oe)}function co(){Kt(window,"dragstart",oe)}var ns,ho;function ci(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(on(),ns=r,ho=r.style.outlineStyle,r.style.outlineStyle="none",_t(window,"keydown",on))}function on(){ns&&(ns.style.outlineStyle=ho,ns=void 0,ho=void 0,Kt(window,"keydown",on))}function fo(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function is(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var Ma={__proto__:null,TRANSFORM:vr,TRANSITION:yr,TRANSITION_END:ro,get:so,getStyle:Ni,create:Nt,remove:Jt,empty:wr,toFront:li,toBack:Vi,hasClass:oo,addClass:St,removeClass:re,setClass:ao,getClass:mn,setOpacity:ue,testProp:ui,setTransform:Un,setPosition:Et,getPosition:_n,get disableTextSelection(){return Rn},get enableTextSelection(){return xn},disableImageDrag:uo,enableImageDrag:co,preventOutline:ci,restoreOutline:on,getSizedParentNode:fo,getScale:is};function _t(r,o,c,f){if(o&&typeof o=="object")for(var m in o)po(r,m,o[m],c);else{o=F(o);for(var y=0,S=o.length;y<S;y++)po(r,o[y],c,f)}return this}var gn="_leaflet_events";function Kt(r,o,c,f){if(arguments.length===1)Da(r),delete r[gn];else if(o&&typeof o=="object")for(var m in o)mo(r,m,o[m],c);else if(o=F(o),arguments.length===2)Da(r,function(N){return et(o,N)!==-1});else for(var y=0,S=o.length;y<S;y++)mo(r,o[y],c,f);return this}function Da(r,o){for(var c in r[gn]){var f=c.split(/\d/)[0];(!o||o(f))&&mo(r,f,null,null,c)}}var vn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function po(r,o,c,f){var m=o+d(c)+(f?"_"+d(f):"");if(r[gn]&&r[gn][m])return this;var y=function(N){return c.call(f||r,N||window.event)},S=y;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?y=xa(r,o,y):ht.touch&&o==="dblclick"?y=gr(r,y):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(vn[o]||o,y,ht.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(N){N=N||window.event,go(r,N)&&S(N)},r.addEventListener(vn[o],y,!1)):r.addEventListener(o,S,!1):r.attachEvent("on"+o,y),r[gn]=r[gn]||{},r[gn][m]=y}function mo(r,o,c,f,m){m=m||o+d(c)+(f?"_"+d(f):"");var y=r[gn]&&r[gn][m];if(!y)return this;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?La(r,o,y):ht.touch&&o==="dblclick"?ai(r,y):"removeEventListener"in r?r.removeEventListener(vn[o]||o,y,!1):r.detachEvent("on"+o,y),r[gn][m]=null}function yn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Bi(r){return po(r,"wheel",yn),this}function Ui(r){return _t(r,"mousedown touchstart dblclick contextmenu",yn),r._leaflet_disable_click=!0,this}function oe(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function an(r){return oe(r),yn(r),this}function _o(r){if(r.composedPath)return r.composedPath();for(var o=[],c=r.target;c;)o.push(c),c=c.parentNode;return o}function rs(r,o){if(!o)return new nt(r.clientX,r.clientY);var c=is(o),f=c.boundingClientRect;return new nt((r.clientX-f.left)/c.x-o.clientLeft,(r.clientY-f.top)/c.y-o.clientTop)}var se=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Na(r){return ht.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/se:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function go(r,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Va={__proto__:null,on:_t,off:Kt,stopPropagation:yn,disableScrollPropagation:Bi,disableClickPropagation:Ui,preventDefault:oe,stop:an,getPropagationPath:_o,getMousePosition:rs,getWheelDelta:Na,isExternalTarget:go,addListener:_t,removeListener:Kt},vo=wt.extend({run:function(r,o,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=_n(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var c=this._startPos.add(this._offset.multiplyBy(r));o&&c._round(),Et(this._el,c),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Mt=wt.extend({options:{crs:k,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=z(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Ct(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yr&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_t(this._proxy,ro,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(Ct(r),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,c){var f=this.getZoomScale(o),m=this.getSize().divideBy(2),y=r instanceof nt?r:this.latLngToContainerPoint(r),S=y.subtract(m).multiplyBy(1-1/f),N=this.containerPointToLatLng(m.add(S));return this.setView(N,o,{zoom:c})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():ie(r);var c=pt(o.paddingTopLeft||o.padding||[0,0]),f=pt(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(r,!1,c.add(f));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var y=f.subtract(c).divideBy(2),S=this.project(r.getSouthWest(),m),N=this.project(r.getNorthEast(),m),V=this.unproject(S.add(N).divideBy(2).add(y),m);return{center:V,zoom:m}},fitBounds:function(r,o){if(r=ie(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=pt(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,c){if(c=c||{},c.animate===!1||!ht.any3d)return this.setView(r,o,c);this._stop();var f=this.project(this.getCenter()),m=this.project(r),y=this.getSize(),S=this._zoom;r=Ct(r),o=o===void 0?S:o;var N=Math.max(y.x,y.y),V=N*this.getZoomScale(S,o),q=m.distanceTo(f)||1,rt=1.42,gt=rt*rt;function Lt(ge){var Ya=ge?-1:1,Qv=ge?V:N,Jv=V*V-N*N+Ya*gt*gt*q*q,Xv=2*Qv*gt*q,Du=Jv/Xv,Rf=Math.sqrt(Du*Du+1)-Du,Yv=Rf<1e-9?-18:Math.log(Rf);return Yv}function Ze(ge){return(Math.exp(ge)-Math.exp(-ge))/2}function Ce(ge){return(Math.exp(ge)+Math.exp(-ge))/2}function Tn(ge){return Ze(ge)/Ce(ge)}var rn=Lt(0);function gs(ge){return N*(Ce(rn)/Ce(rn+rt*ge))}function Wv(ge){return N*(Ce(rn)*Tn(rn+rt*ge)-Ze(rn))/gt}function Zv(ge){return 1-Math.pow(1-ge,1.5)}var Gv=Date.now(),Sf=(Lt(1)-rn)/rt,Kv=c.duration?1e3*c.duration:1e3*Sf*.8;function Cf(){var ge=(Date.now()-Gv)/Kv,Ya=Zv(ge)*Sf;ge<=1?(this._flyToFrame=R(Cf,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(Wv(Ya)/q)),S),this.getScaleZoom(N/gs(Ya),S),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Cf.call(this),this},flyToBounds:function(r,o){var c=this._getBoundsCenterZoom(r,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(r){return r=ie(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,ie(r));return c.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var c=pt(o.paddingTopLeft||o.padding||[0,0]),f=pt(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(r),S=this.getPixelBounds(),N=Ut([S.min.add(c),S.max.subtract(f)]),V=N.getSize();if(!N.contains(y)){this._enforcingBounds=!0;var q=y.subtract(N.getCenter()),rt=N.extend(y).getSize().subtract(V);m.x+=q.x<0?-rt.x:rt.x,m.y+=q.y<0?-rt.y:rt.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=o.divideBy(2).round(),m=c.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u(this._handleGeolocationResponse,this),c=u(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,r):navigator.geolocation.getCurrentPosition(o,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,c=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,c=r.coords.longitude,f=new Dt(o,c),m=f.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var S=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(S,y.maxZoom):S)}var N={latlng:f,bounds:m,timestamp:r.timestamp};for(var V in r.coords)typeof r.coords[V]=="number"&&(N[V]=r.coords[V]);this.fire("locationfound",N)}},addHandler:function(r,o){if(!o)return this;var c=this[r]=new o(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Jt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Nt("div",c,o||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new zt(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,c){r=ie(r),c=pt(c||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),S=r.getNorthWest(),N=r.getSouthEast(),V=this.getSize().subtract(c),q=Ut(this.project(N,f),this.project(S,f)).getSize(),rt=ht.any3d?this.options.zoomSnap:1,gt=V.x/q.x,Lt=V.y/q.y,Ze=o?Math.max(gt,Lt):Math.min(gt,Lt);return f=this.getScaleZoom(Ze,f),rt&&(f=Math.round(f/(rt/100))*(rt/100),f=o?Math.ceil(f/rt)*rt:Math.floor(f/rt)*rt),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var c=this._getTopLeftPoint(r,o);return new $t(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(r)/c.scale(o)},getScaleZoom:function(r,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var f=c.zoom(r*c.scale(o));return isNaN(f)?1/0:f},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Ct(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(pt(r),o)},layerPointToLatLng:function(r){var o=pt(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(Ct(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Ct(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ie(r))},distance:function(r,o){return this.options.crs.distance(Ct(r),Ct(o))},containerPointToLayerPoint:function(r){return pt(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return pt(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(pt(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ct(r)))},mouseEventToContainerPoint:function(r){return rs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=so(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_t(o,"scroll",this._onScroll,this),this._containerId=d(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,St(r,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Ni(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Et(this._mapPane,new nt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(r.markerPane,"leaflet-zoom-hide"),St(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,c){Et(this._mapPane,new nt(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,c)._move(r,o)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,c,f){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Et(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var o=r?Kt:_t;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var c=[],f,m=o==="mouseout"||o==="mouseover",y=r.target||r.srcElement,S=!1;y;){if(f=this._targets[d(y)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){S=!0;break}if(f&&f.listens(o,!0)&&(m&&!go(y,r)||(c.push(f),m))||y===this._container)break;y=y.parentNode}return!c.length&&!S&&!m&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var c=r.type;c==="mousedown"&&ci(o),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var m=this._findEventTargets(r,o);if(c){for(var y=[],S=0;S<c.length;S++)c[S].listens(o,!0)&&y.push(c[S]);m=y.concat(m)}if(m.length){o==="contextmenu"&&oe(r);var N=m[0],V={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var q=N.getLatLng&&(!N._radius||N._radius<=10);V.containerPoint=q?this.latLngToContainerPoint(N.getLatLng()):this.mouseEventToContainerPoint(r),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=q?N.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(S=0;S<m.length;S++)if(m[S].fire(o,V,!0),V.originalEvent._stopped||m[S].options.bubblingMouseEvents===!1&&et(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return _n(this._mapPane)||new nt(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var c=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var c=this.getSize()._divideBy(2);return this.project(r,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,c){var f=this._getNewPixelOrigin(c,o);return this.project(r,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,o,c){var f=this._getNewPixelOrigin(c,o);return Ut([this.project(r.getSouthWest(),o)._subtract(f),this.project(r.getNorthWest(),o)._subtract(f),this.project(r.getSouthEast(),o)._subtract(f),this.project(r.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,c){if(!c)return r;var f=this.project(r,o),m=this.getSize().divideBy(2),y=new $t(f.subtract(m),f.add(m)),S=this._getBoundsOffset(y,c,o);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?r:this.unproject(f.add(S),o)},_limitOffset:function(r,o){if(!o)return r;var c=this.getPixelBounds(),f=new $t(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(r,o,c){var f=Ut(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),m=f.min.subtract(r.min),y=f.max.subtract(r.max),S=this._rebound(m.x,-y.x),N=this._rebound(m.y,-y.y);return new nt(S,N)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),c=this.getMaxZoom(),f=ht.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(o,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var c=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var r=this._proxy=Nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var c=vr,f=this._proxy.style[c];Un(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();Un(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),m=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(m)?!1:(R(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ss(r,o){return new Mt(r,o)}var nn=ee.extend({options:{position:"topright"},initialize:function(r){z(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return St(o,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),We=function(r){return new nn(r)};Mt.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",c=this._controlContainer=Nt("div",o+"control-container",this._container);function f(m,y){var S=o+m+" "+o+y;r[m+y]=Nt("div",S,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Jt(this._controlCorners[r]);Jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yo=nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,o,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return nn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(d(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=Nt("div",r),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ui(o),Bi(o);var f=this._section=Nt("section",r+"-list");c&&(this._map.on("click",this.collapse,this),_t(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Nt("a",r+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),_t(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){oe(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Nt("div",r+"-base",f),this._separator=Nt("div",r+"-separator",f),this._overlaysList=Nt("div",r+"-overlays",f),o.appendChild(f)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&d(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(u(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wr(this._baseLayersList),wr(this._overlaysList),this._layerControlInputs=[];var r,o,c,f,m=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),o=o||f.overlay,r=r||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(d(r.target)),c=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(r,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var o=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),_t(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(f),y.appendChild(m);var S=r.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,c,f=[],m=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)o=r[y],c=this._getLayer(o.layerId).layer,o.checked?f.push(c):o.checked||m.push(c);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,c,f=this._map.getZoom(),m=r.length-1;m>=0;m--)o=r[m],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,_t(r,"click",oe),this.expand();var o=this;setTimeout(function(){Kt(r,"click",oe),o._preventClick=!1})}}),Ru=function(r,o,c){return new yo(r,o,c)},hi=nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",c=Nt("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,c,f,m){var y=Nt("a",c,f);return y.innerHTML=r,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),Ui(y),_t(y,"click",an),_t(y,"click",m,this),_t(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";re(this._zoomInButton,o),re(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(St(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(St(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mt.mergeOptions({zoomControl:!0}),Mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))});var Fa=function(r){return new hi(r)},os=nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",c=Nt("div",o),f=this.options;return this._addScales(f,o+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,c){r.metric&&(this._mScale=Nt("div",o,c)),r.imperial&&(this._iScale=Nt("div",o,c))},_update:function(){var r=this._map,o=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/r)},_updateImperial:function(r){var o=r*3.2808399,c,f,m;o>5280?(c=o/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(r,o,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),c=r/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),as=function(r){return new os(r)},Ba='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zi=nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?Ba+" ":"")+"Leaflet</a>"},initialize:function(r){z(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Nt("div","leaflet-control-attribution"),Ui(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Mt.mergeOptions({attributionControl:!0}),Mt.addInitHook(function(){this.options.attributionControl&&new zi().addTo(this)});var xu=function(r){return new zi(r)};nn.Layers=yo,nn.Zoom=hi,nn.Scale=os,nn.Attribution=zi,We.layers=Ru,We.zoom=Fa,We.scale=as,We.attribution=xu;var ln=ee.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ln.addTo=function(r,o){return r.addHandler(o,this),this};var Tr={Events:kt},wo=ht.touch?"touchstart mousedown":"mousedown",Ln=wt.extend({options:{clickTolerance:3},initialize:function(r,o,c,f){z(this,f),this._element=r,this._dragStartTarget=o||r,this._preventOutline=c},enable:function(){this._enabled||(_t(this._dragStartTarget,wo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ln._dragging===this&&this.finishDrag(!0),Kt(this._dragStartTarget,wo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!oo(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Ln._dragging===this&&this.finishDrag();return}if(!(Ln._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Ln._dragging=this,this._preventOutline&&ci(this._element),uo(),Rn(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,c=fo(this._element);this._startPoint=new nt(o.clientX,o.clientY),this._startPos=_n(this._element),this._parentScale=is(c);var f=r.type==="mousedown";_t(document,f?"mousemove":"touchmove",this._onMove,this),_t(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,c=new nt(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,oe(r),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Et(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){re(document.body,"leaflet-dragging"),this._lastTarget&&(re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Kt(document,"mousemove touchmove",this._onMove,this),Kt(document,"mouseup touchend touchcancel",this._onUp,this),co(),xn();var o=this._moved&&this._moving;this._moving=!1,Ln._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ls(r,o,c){var f,m=[1,4,2,8],y,S,N,V,q,rt,gt,Lt;for(y=0,rt=r.length;y<rt;y++)r[y]._code=zn(r[y],o);for(N=0;N<4;N++){for(gt=m[N],f=[],y=0,rt=r.length,S=rt-1;y<rt;S=y++)V=r[y],q=r[S],V._code&gt?q._code&gt||(Lt=Se(q,V,gt,o,c),Lt._code=zn(Lt,o),f.push(Lt)):(q._code&gt&&(Lt=Se(q,V,gt,o,c),Lt._code=zn(Lt,o),f.push(Lt)),f.push(V));r=f}return r}function us(r,o){var c,f,m,y,S,N,V,q,rt;if(!r||r.length===0)throw new Error("latlngs not passed");l(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var gt=Ct([0,0]),Lt=ie(r),Ze=Lt.getNorthWest().distanceTo(Lt.getSouthWest())*Lt.getNorthEast().distanceTo(Lt.getNorthWest());Ze<1700&&(gt=cs(r));var Ce=r.length,Tn=[];for(c=0;c<Ce;c++){var rn=Ct(r[c]);Tn.push(o.project(Ct([rn.lat-gt.lat,rn.lng-gt.lng])))}for(N=V=q=0,c=0,f=Ce-1;c<Ce;f=c++)m=Tn[c],y=Tn[f],S=m.y*y.x-y.y*m.x,V+=(m.x+y.x)*S,q+=(m.y+y.y)*S,N+=S*3;N===0?rt=Tn[0]:rt=[V/N,q/N];var gs=o.unproject(pt(rt));return Ct([gs.lat+gt.lat,gs.lng+gt.lng])}function cs(r){for(var o=0,c=0,f=0,m=0;m<r.length;m++){var y=Ct(r[m]);o+=y.lat,c+=y.lng,f++}return Ct([o/f,c/f])}var hs={__proto__:null,clipPolygon:ls,polygonCenter:us,centroid:cs};function To(r,o){if(!o||!r.length)return r.slice();var c=o*o;return r=za(r,c),r=Ua(r,c),r}function Eo(r,o,c){return Math.sqrt(wn(r,o,c,!0))}function fi(r,o,c){return wn(r,o,c)}function Ua(r,o){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,m=new f(c);m[0]=m[c-1]=1,fs(r,m,o,0,c-1);var y,S=[];for(y=0;y<c;y++)m[y]&&S.push(r[y]);return S}function fs(r,o,c,f,m){var y=0,S,N,V;for(N=f+1;N<=m-1;N++)V=wn(r[N],r[f],r[m],!0),V>y&&(S=N,y=V);y>c&&(o[S]=1,fs(r,o,c,f,S),fs(r,o,c,S,m))}function za(r,o){for(var c=[r[0]],f=1,m=0,y=r.length;f<y;f++)ja(r[f],r[m])>o&&(c.push(r[f]),m=f);return m<y-1&&c.push(r[y-1]),c}var Io;function Er(r,o,c,f,m){var y=f?Io:zn(r,c),S=zn(o,c),N,V,q;for(Io=S;;){if(!(y|S))return[r,o];if(y&S)return!1;N=y||S,V=Se(r,o,N,c,m),q=zn(V,c),N===y?(r=V,y=q):(o=V,S=q)}}function Se(r,o,c,f,m){var y=o.x-r.x,S=o.y-r.y,N=f.min,V=f.max,q,rt;return c&8?(q=r.x+y*(V.y-r.y)/S,rt=V.y):c&4?(q=r.x+y*(N.y-r.y)/S,rt=N.y):c&2?(q=V.x,rt=r.y+S*(V.x-r.x)/y):c&1&&(q=N.x,rt=r.y+S*(N.x-r.x)/y),new nt(q,rt,m)}function zn(r,o){var c=0;return r.x<o.min.x?c|=1:r.x>o.max.x&&(c|=2),r.y<o.min.y?c|=4:r.y>o.max.y&&(c|=8),c}function ja(r,o){var c=o.x-r.x,f=o.y-r.y;return c*c+f*f}function wn(r,o,c,f){var m=o.x,y=o.y,S=c.x-m,N=c.y-y,V=S*S+N*N,q;return V>0&&(q=((r.x-m)*S+(r.y-y)*N)/V,q>1?(m=c.x,y=c.y):q>0&&(m+=S*q,y+=N*q)),S=r.x-m,N=r.y-y,f?S*S+N*N:new nt(m,y)}function l(r){return!it(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),l(r)}function _(r,o){var c,f,m,y,S,N,V,q;if(!r||r.length===0)throw new Error("latlngs not passed");l(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var rt=Ct([0,0]),gt=ie(r),Lt=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Lt<1700&&(rt=cs(r));var Ze=r.length,Ce=[];for(c=0;c<Ze;c++){var Tn=Ct(r[c]);Ce.push(o.project(Ct([Tn.lat-rt.lat,Tn.lng-rt.lng])))}for(c=0,f=0;c<Ze-1;c++)f+=Ce[c].distanceTo(Ce[c+1])/2;if(f===0)q=Ce[0];else for(c=0,y=0;c<Ze-1;c++)if(S=Ce[c],N=Ce[c+1],m=S.distanceTo(N),y+=m,y>f){V=(y-f)/m,q=[N.x-V*(N.x-S.x),N.y-V*(N.y-S.y)];break}var rn=o.unproject(pt(q));return Ct([rn.lat+rt.lat,rn.lng+rt.lng])}var T={__proto__:null,simplify:To,pointToSegmentDistance:Eo,closestPointOnSegment:fi,clipSegment:Er,_getEdgeIntersection:Se,_getBitCode:zn,_sqClosestPointOnSegment:wn,isFlat:l,_flat:p,polylineCenter:_},D={project:function(r){return new nt(r.lng,r.lat)},unproject:function(r){return new Dt(r.y,r.x)},bounds:new $t([-180,-90],[180,90])},B={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $t([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,c=this.R,f=r.lat*o,m=this.R_MINOR/c,y=Math.sqrt(1-m*m),S=y*Math.sin(f),N=Math.tan(Math.PI/4-f/2)/Math.pow((1-S)/(1+S),y/2);return f=-c*Math.log(Math.max(N,1e-10)),new nt(r.lng*o*c,f)},unproject:function(r){for(var o=180/Math.PI,c=this.R,f=this.R_MINOR/c,m=Math.sqrt(1-f*f),y=Math.exp(-r.y/c),S=Math.PI/2-2*Math.atan(y),N=0,V=.1,q;N<15&&Math.abs(V)>1e-7;N++)q=m*Math.sin(S),q=Math.pow((1-q)/(1+q),m/2),V=Math.PI/2-2*Math.atan(y*q)-S,S+=V;return new Dt(S*o,r.x*o/c)}},X={__proto__:null,LonLat:D,Mercator:B,SphericalMercator:tn},Gt=s({},Ye,{code:"EPSG:3395",projection:B,transformation:function(){var r=.5/(Math.PI*B.R);return P(r,.5,-r,.5)}()}),_e=s({},Ye,{code:"EPSG:4326",projection:D,transformation:P(1/180,1,-1/180,.5)}),jt=s({},Te,{projection:D,transformation:P(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var c=o.lng-r.lng,f=o.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});Te.Earth=Ye,Te.EPSG3395=Gt,Te.EPSG3857=k,Te.EPSG900913=U,Te.EPSG4326=_e,Te.Simple=jt;var Qt=wt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Mt.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=d(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=d(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},_addLayers:function(r){r=r?it(r)?r:[r]:[];for(var o=0,c=r.length;o<c;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=d(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ae=Qt.extend({initialize:function(r,o){z(this,o),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),ji=function(r,o){return new ae(r,o)},he=ae.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),ae.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),ae.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new zt;for(var o in this._layers){var c=this._layers[o];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),ds=function(r,o){return new he(r,o)},jn=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){z(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,o){var c=this.options,f=c[o+"Size"];typeof f=="number"&&(f=[f,f]);var m=pt(f),y=pt(o==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return ht.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Sv(r){return new jn(r)}var bo=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof bo.imagePath!="string"&&(bo.imagePath=this._detectIconPath()),(this.options.imagePath||bo.imagePath)+jn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(c,f,m){var y=f.exec(c);return y&&y[m]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Nt("div","leaflet-default-icon-path",document.body),o=Ni(r,"background-image")||Ni(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),lf=ln.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Ln(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,c=o._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=_n(o._icon),S=c.getPixelBounds(),N=c.getPixelOrigin(),V=Ut(S.min._subtract(N).add(m),S.max._subtract(N).subtract(m));if(!V.contains(y)){var q=pt((Math.max(V.max.x,y.x)-V.max.x)/(S.max.x-V.max.x)-(Math.min(V.min.x,y.x)-V.min.x)/(S.min.x-V.min.x),(Math.max(V.max.y,y.y)-V.max.y)/(S.max.y-V.max.y)-(Math.min(V.min.y,y.y)-V.min.y)/(S.min.y-V.min.y)).multiplyBy(f);c.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),Et(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=R(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,c=o._shadow,f=_n(o._icon),m=o._map.layerPointToLatLng(f);c&&Et(c,f),o._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Ha=Qt.extend({options:{icon:new bo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){z(this,o),this._latlng=Ct(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=Ct(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),St(c,o),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(c,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(St(m,o),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kt(this._icon,"focus",this._panOnFocus,this),Jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Jt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Et(this._icon,r),this._shadow&&Et(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),lf)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new lf(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&ue(this._icon,r),this._shadow&&ue(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,c=o.iconSize?pt(o.iconSize):pt(0,0),f=o.iconAnchor?pt(o.iconAnchor):pt(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cv(r,o){return new Ha(r,o)}var Hi=Qt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return z(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$a=Hi.extend({options:{fill:!0,radius:10},initialize:function(r,o){z(this,o),this._latlng=Ct(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=Ct(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Hi.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,c=this._clickTolerance(),f=[r+c,o+c];this._pxBounds=new $t(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rv(r,o){return new $a(r,o)}var Lu=$a.extend({initialize:function(r,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),z(this,o),this._latlng=Ct(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new zt(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Ye.distance){var m=Math.PI/180,y=this._mRadius/Ye.R/m,S=c.project([o+y,r]),N=c.project([o-y,r]),V=S.add(N).divideBy(2),q=c.unproject(V).lat,rt=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(q*m))/(Math.cos(o*m)*Math.cos(q*m)))/m;(isNaN(rt)||rt===0)&&(rt=y/Math.cos(Math.PI/180*o)),this._point=V.subtract(c.getPixelOrigin()),this._radius=isNaN(rt)?0:V.x-c.project([q,r-rt]).x,this._radiusY=V.y-S.y}else{var gt=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(gt).x}this._updateBounds()}});function xv(r,o,c){return new Lu(r,o,c)}var di=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){z(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,c=null,f=wn,m,y,S=0,N=this._parts.length;S<N;S++)for(var V=this._parts[S],q=1,rt=V.length;q<rt;q++){m=V[q-1],y=V[q];var gt=f(r,m,y,!0);gt<o&&(o=gt,c=f(r,m,y))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=Ct(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new zt,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return l(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],c=l(r),f=0,m=r.length;f<m;f++)c?(o[f]=Ct(r[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(r[f]);return o},_project:function(){var r=new $t;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new nt(r,r);this._rawPxBounds&&(this._pxBounds=new $t([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,c){var f=r[0]instanceof Dt,m=r.length,y,S;if(f){for(S=[],y=0;y<m;y++)S[y]=this._map.latLngToLayerPoint(r[y]),c.extend(S[y]);o.push(S)}else for(y=0;y<m;y++)this._projectLatlngs(r[y],o,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,f,m,y,S,N,V;for(c=0,m=0,y=this._rings.length;c<y;c++)for(V=this._rings[c],f=0,S=V.length;f<S-1;f++)N=Er(V[f],V[f+1],r,f,!0),N&&(o[m]=o[m]||[],o[m].push(N[0]),(N[1]!==V[f+1]||f===S-2)&&(o[m].push(N[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=To(r[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var c,f,m,y,S,N,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(N=this._parts[c],f=0,S=N.length,m=S-1;f<S;m=f++)if(!(!o&&f===0)&&Eo(r,N[m],N[f])<=V)return!0;return!1}});function Lv(r,o){return new di(r,o)}di._flat=p;var ps=di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return us(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=di.prototype._convertLatLngs.call(this,r),c=o.length;return c>=2&&o[0]instanceof Dt&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(r){di.prototype._setLatLngs.call(this,r),l(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return l(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,c=new nt(o,o);if(r=new $t(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=ls(this._rings[f],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,c,f,m,y,S,N,V,q;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,V=this._parts.length;y<V;y++)for(c=this._parts[y],S=0,q=c.length,N=q-1;S<q;N=S++)f=c[S],m=c[N],f.y>r.y!=m.y>r.y&&r.x<(m.x-f.x)*(r.y-f.y)/(m.y-f.y)+f.x&&(o=!o);return o||di.prototype._containsPoint.call(this,r,!0)}});function kv(r,o){return new ps(r,o)}var pi=he.extend({initialize:function(r,o){z(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=it(r)?r:r.features,c,f,m;if(o){for(c=0,f=o.length;c<f;c++)m=o[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var S=qa(r,y);return S?(S.feature=Ga(r),S.defaultOptions=S.options,this.resetStyle(S),y.onEachFeature&&y.onEachFeature(r,S),this.addLayer(S)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function qa(r,o){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,m=[],y=o&&o.pointToLayer,S=o&&o.coordsToLatLng||ku,N,V,q,rt;if(!f&&!c)return null;switch(c.type){case"Point":return N=S(f),uf(y,r,N,o);case"MultiPoint":for(q=0,rt=f.length;q<rt;q++)N=S(f[q]),m.push(uf(y,r,N,o));return new he(m);case"LineString":case"MultiLineString":return V=Wa(f,c.type==="LineString"?0:1,S),new di(V,o);case"Polygon":case"MultiPolygon":return V=Wa(f,c.type==="Polygon"?1:2,S),new ps(V,o);case"GeometryCollection":for(q=0,rt=c.geometries.length;q<rt;q++){var gt=qa({geometry:c.geometries[q],type:"Feature",properties:r.properties},o);gt&&m.push(gt)}return new he(m);case"FeatureCollection":for(q=0,rt=c.features.length;q<rt;q++){var Lt=qa(c.features[q],o);Lt&&m.push(Lt)}return new he(m);default:throw new Error("Invalid GeoJSON object.")}}function uf(r,o,c,f){return r?r(o,c):new Ha(c,f&&f.markersInheritOptions&&f)}function ku(r){return new Dt(r[1],r[0],r[2])}function Wa(r,o,c){for(var f=[],m=0,y=r.length,S;m<y;m++)S=o?Wa(r[m],o-1,c):(c||ku)(r[m]),f.push(S);return f}function Ou(r,o){return r=Ct(r),r.alt!==void 0?[E(r.lng,o),E(r.lat,o),E(r.alt,o)]:[E(r.lng,o),E(r.lat,o)]}function Za(r,o,c,f){for(var m=[],y=0,S=r.length;y<S;y++)m.push(o?Za(r[y],l(r[y])?0:o-1,c,f):Ou(r[y],f));return!o&&c&&m.length>0&&m.push(m[0].slice()),m}function ms(r,o){return r.feature?s({},r.feature,{geometry:o}):Ga(o)}function Ga(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Mu={toGeoJSON:function(r){return ms(this,{type:"Point",coordinates:Ou(this.getLatLng(),r)})}};Ha.include(Mu),Lu.include(Mu),$a.include(Mu),di.include({toGeoJSON:function(r){var o=!l(this._latlngs),c=Za(this._latlngs,o?1:0,!1,r);return ms(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),ps.include({toGeoJSON:function(r){var o=!l(this._latlngs),c=o&&!l(this._latlngs[0]),f=Za(this._latlngs,c?2:o?1:0,!0,r);return o||(f=[f]),ms(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),ae.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(r).geometry.coordinates)}),ms(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var c=o==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(r);if(c)f.push(y.geometry);else{var S=Ga(y);S.type==="FeatureCollection"?f.push.apply(f,S.features):f.push(S)}}}),c?ms(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function cf(r,o){return new pi(r,o)}var Ov=cf,Ka=Qt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,c){this._url=r,this._bounds=ie(o),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&li(this._image),this},bringToBack:function(){return this._map&&Vi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ie(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:Nt("img");if(St(o,"leaflet-image-layer"),this._zoomAnimated&&St(o,"leaflet-zoom-animated"),this.options.className&&St(o,this.options.className),o.onselectstart=w,o.onmousemove=w,o.onload=u(this.fire,this,"load"),o.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Un(this._image,c,o)},_reset:function(){var r=this._image,o=new $t(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Et(r,o.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){ue(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Mv=function(r,o,c){return new Ka(r,o,c)},hf=Ka.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:Nt("video");if(St(o,"leaflet-image-layer"),this._zoomAnimated&&St(o,"leaflet-zoom-animated"),this.options.className&&St(o,this.options.className),o.onselectstart=w,o.onmousemove=w,o.onloadeddata=u(this.fire,this,"load"),r){for(var c=o.getElementsByTagName("source"),f=[],m=0;m<c.length;m++)f.push(c[m].src);this._url=c.length>0?f:[o.src];return}it(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var S=Nt("source");S.src=this._url[y],o.appendChild(S)}}});function Dv(r,o,c){return new hf(r,o,c)}var ff=Ka.extend({_initImage:function(){var r=this._image=this._url;St(r,"leaflet-image-layer"),this._zoomAnimated&&St(r,"leaflet-zoom-animated"),this.options.className&&St(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function Nv(r,o,c){return new ff(r,o,c)}var Hn=Qt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof Dt||it(r))?(this._latlng=Ct(r),z(this,o)):(z(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&ue(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&ue(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(ue(this._container,0),this._removeTimeout=setTimeout(u(Jt,void 0,this._container),200)):Jt(this._container),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Ct(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&li(this._container),this},bringToBack:function(){return this._map&&Vi(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof he){o=null;var c=this._source._layers;for(var f in c)if(c[f]._map){o=c[f];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=pt(this.options.offset),c=this._getAnchor();this._zoomAnimated?Et(this._container,r.add(c)):o=o.add(r).add(c);var f=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Mt.include({_initOverlay:function(r,o,c,f){var m=o;return m instanceof r||(m=new r(f).setContent(o)),c&&m.setLatLng(c),m}}),Qt.include({_initOverlay:function(r,o,c,f){var m=c;return m instanceof r?(z(m,f),m._source=this):(m=o&&!f?o:new r(f,this),m.setContent(c)),m}});var Qa=Hn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Hn.prototype.openOn.call(this,r)},onAdd:function(r){Hn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",yn))},onRemove:function(r){Hn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",yn))},getEvents:function(){var r=Hn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=Nt("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Nt("div",r+"-content-wrapper",o);if(this._contentNode=Nt("div",r+"-content",c),Ui(o),Bi(this._contentNode),_t(o,"contextmenu",yn),this._tipContainer=Nt("div",r+"-tip-container",o),this._tip=Nt("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Nt("a",r+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',_t(f,"click",function(m){oe(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var f=r.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(o.height=m+"px",St(r,y)):re(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Et(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(Ni(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,f=this._containerWidth,m=new nt(this._containerLeft,-c-this._containerBottom);m._add(_n(this._container));var y=r.layerPointToContainerPoint(m),S=pt(this.options.autoPanPadding),N=pt(this.options.autoPanPaddingTopLeft||S),V=pt(this.options.autoPanPaddingBottomRight||S),q=r.getSize(),rt=0,gt=0;y.x+f+V.x>q.x&&(rt=y.x+f-q.x+V.x),y.x-rt-N.x<0&&(rt=y.x-N.x),y.y+c+V.y>q.y&&(gt=y.y+c-q.y+V.y),y.y-gt-N.y<0&&(gt=y.y-N.y),(rt||gt)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([rt,gt]))}},_getAnchor:function(){return pt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Vv=function(r,o){return new Qa(r,o)};Mt.mergeOptions({closePopupOnClick:!0}),Mt.include({openPopup:function(r,o,c){return this._initOverlay(Qa,r,o,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Qt.include({bindPopup:function(r,o){return this._popup=this._initOverlay(Qa,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof he||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){an(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ja=Hn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Hn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Hn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Hn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Nt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,c,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),S=f.layerPointToContainerPoint(r),N=this.options.direction,V=m.offsetWidth,q=m.offsetHeight,rt=pt(this.options.offset),gt=this._getAnchor();N==="top"?(o=V/2,c=q):N==="bottom"?(o=V/2,c=0):N==="center"?(o=V/2,c=q/2):N==="right"?(o=0,c=q/2):N==="left"?(o=V,c=q/2):S.x<y.x?(N="right",o=0,c=q/2):(N="left",o=V+(rt.x+gt.x)*2,c=q/2),r=r.subtract(pt(o,c,!0)).add(rt).add(gt),re(m,"leaflet-tooltip-right"),re(m,"leaflet-tooltip-left"),re(m,"leaflet-tooltip-top"),re(m,"leaflet-tooltip-bottom"),St(m,"leaflet-tooltip-"+N),Et(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&ue(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return pt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fv=function(r,o){return new Ja(r,o)};Mt.include({openTooltip:function(r,o,c){return this._initOverlay(Ja,r,o,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Qt.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ja,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof he||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(_t(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),_t(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var df=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(wr(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=pt(c.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Bv(r){return new df(r)}jn.Default=bo;var Po=Qt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){z(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Jt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof nt?r:new nt(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,c=-r(-1/0,1/0),f=0,m=o.length,y;f<m;f++)y=o[f].style.zIndex,o[f]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){ue(this._container,this.options.opacity);var r=+new Date,o=!1,c=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(r-m.loaded)/200);ue(m.el,y),y<1?o=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=o-Math.abs(r-c),this._onUpdateLevel(c)):(Jt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],m=this._map;return f||(f=this._levels[r]={},f.el=Nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,m.getCenter(),m.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Jt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,c,f){var m=Math.floor(r/2),y=Math.floor(o/2),S=c-1,N=new nt(+m,+y);N.z=+S;var V=this._tileCoordsToKey(N),q=this._tiles[V];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),S>f?this._retainParent(m,y,S,f):!1)},_retainChildren:function(r,o,c,f){for(var m=2*r;m<2*r+2;m++)for(var y=2*o;y<2*o+2;y++){var S=new nt(m,y);S.z=c+1;var N=this._tileCoordsToKey(S),V=this._tiles[N];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);c+1<f&&this._retainChildren(m,y,c+1,f)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,c,f){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,o)},_setZoomTransform:function(r,o,c){var f=this._map.getZoomScale(c,r.zoom),m=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,c)).round();ht.any3d?Un(r.el,m,f):Et(r.el,m)},_resetGrid:function(){var r=this._map,o=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,o.wrapLng[1]],f).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([o.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(c,this._tileZoom),m=o.project(r,this._tileZoom).floor(),y=o.getSize().divideBy(f*2);return new $t(m.subtract(y),m.add(y))},_update:function(r){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(f),y=m.getCenter(),S=[],N=this.options.keepBuffer,V=new $t(m.getBottomLeft().subtract([N,-N]),m.getTopRight().add([N,-N]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var rt=this._tiles[q].coords;(rt.z!==this._tileZoom||!V.contains(new nt(rt.x,rt.y)))&&(this._tiles[q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var gt=m.min.y;gt<=m.max.y;gt++)for(var Lt=m.min.x;Lt<=m.max.x;Lt++){var Ze=new nt(Lt,gt);if(Ze.z=this._tileZoom,!!this._isValidTile(Ze)){var Ce=this._tiles[this._tileCoordsToKey(Ze)];Ce?Ce.current=!0:S.push(Ze)}}if(S.sort(function(rn,gs){return rn.distanceTo(y)-gs.distanceTo(y)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Lt=0;Lt<S.length;Lt++)this._addTile(S[Lt],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!o.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return ie(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,c=this.getTileSize(),f=r.scaleBy(c),m=f.add(c),y=o.unproject(f,r.z),S=o.unproject(m,r.z);return[y,S]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),c=new zt(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),c=new nt(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(r){var o=this._tiles[r];o&&(Jt(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){St(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=w,r.onmousemove=w,ht.ielt9&&this.options.opacity<1&&ue(r,this.options.opacity)},_addTile:function(r,o){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),u(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&R(u(this._tileReady,this,r,null,m)),Et(m,c),this._tiles[f]={el:m,coords:r,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(ue(c.el,0),M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(St(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new nt(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new $t(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Uv(r){return new Po(r)}var _s=Po.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=z(this,o),o.detectRetina&&ht.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var c=document.createElement("img");return _t(c,"load",u(this._tileOnLoad,this,o,c)),_t(c,"error",u(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var o={r:ht.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=c),o["-y"]=c}return at(this._url,s(o,this.options))},_tileOnLoad:function(r,o){ht.ielt9?setTimeout(u(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,c){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),r(c,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=o-r),r+f},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=w,o.onerror=w,!o.complete)){o.src=yt;var c=this._tiles[r].coords;Jt(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",yt),Po.prototype._removeTile.call(this,r)},_tileReady:function(r,o,c){if(!(!this._map||c&&c.getAttribute("src")===yt))return Po.prototype._tileReady.call(this,r,o,c)}});function pf(r,o){return new _s(r,o)}var mf=_s.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var c=s({},this.defaultWmsParams);for(var f in o)f in this.options||(c[f]=o[f]);o=z(this,o);var m=o.detectRetina&&ht.retina?2:1,y=this.getTileSize();c.width=y.x*m,c.height=y.y*m,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,_s.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),c=this._crs,f=Ut(c.project(o[0]),c.project(o[1])),m=f.min,y=f.max,S=(this._wmsVersion>=1.3&&this._crs===_e?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),N=_s.prototype.getTileUrl.call(this,r);return N+W(this.wmsParams,N,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function zv(r,o){return new mf(r,o)}_s.WMS=mf,pf.wms=zv;var mi=Qt.extend({options:{padding:.1},initialize:function(r){z(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var c=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=f.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(r,o));ht.any3d?Un(this._container,y,c):Et(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new $t(c,c.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_f=mi.extend({options:{tolerance:0},getEvents:function(){var r=mi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");_t(r,"mousemove",this._onMouseMove,this),_t(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_t(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Jt(this._container),Kt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var r=this._bounds,o=this._container,c=r.getSize(),f=ht.retina?2:1;Et(o,r.min),o.width=f*c.x,o.height=f*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,c=o.next,f=o.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),c=[],f,m;for(m=0;m<o.length;m++){if(f=Number(o[m]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $t,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var c,f,m,y,S=r._parts,N=S.length,V=this._ctx;if(N){for(V.beginPath(),c=0;c<N;c++){for(f=0,m=S[c].length;f<m;f++)y=S[c][f],V[f?"lineTo":"moveTo"](y.x,y.y);o&&V.closePath()}this._fillStroke(V,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||f)/f;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(o.x,o.y/m,f,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,o){var c=o.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),c,f,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(re(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var c,f,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(St(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,c){this._map._fireDOMEvent(o,c||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var c=o.next,f=o.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var c=o.next,f=o.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function gf(r){return ht.canvas?new _f(r):null}var Ao=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jv={_initContainer:function(){this._container=Nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Ao("shape");St(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Ao("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;Jt(o),r.removeInteractiveTarget(o),delete this._layers[d(r)]},_updateStyle:function(r){var o=r._stroke,c=r._fill,f=r.options,m=r._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(o||(o=r._stroke=Ao("stroke")),m.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=it(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(m.removeChild(o),r._stroke=null),f.fill?(c||(c=r._fill=Ao("fill")),m.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(m.removeChild(c),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){li(r._container)},_bringToBack:function(r){Vi(r._container)}},Xa=ht.vml?Ao:G,So=mi.extend({_initContainer:function(){this._container=Xa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Jt(this._container),Kt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var r=this._bounds,o=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Et(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=Xa("path");r.options.className&&St(o,r.options.className),r.options.interactive&&St(o,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Jt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,c=r.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,$(r._parts,o))},_updateCircle:function(r){var o=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,m="a"+c+","+f+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(o.x-c)+","+o.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){li(r._path)},_bringToBack:function(r){Vi(r._path)}});ht.vml&&So.include(jv);function vf(r){return ht.svg||ht.vml?new So(r):null}Mt.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&gf(r)||vf(r)}});var yf=ps.extend({initialize:function(r,o){ps.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ie(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Hv(r,o){return new yf(r,o)}So.create=Xa,So.pointsToPath=$,pi.geometryToLayer=qa,pi.coordsToLatLng=ku,pi.coordsToLatLngs=Wa,pi.latLngToCoords=Ou,pi.latLngsToCoords=Za,pi.getFeature=ms,pi.asFeature=Ga,Mt.mergeOptions({boxZoom:!0});var wf=ln.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rn(),uo(),this._startPoint=this._map.mouseEventToContainerPoint(r),_t(document,{contextmenu:an,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Nt("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new $t(this._point,this._startPoint),c=o.getSize();Et(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Jt(this._box),re(this._container,"leaflet-crosshair")),xn(),co(),Kt(document,{contextmenu:an,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var o=new zt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mt.addInitHook("addHandler","boxZoom",wf),Mt.mergeOptions({doubleClickZoom:!0});var Tf=ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,c=o.getZoom(),f=o.options.zoomDelta,m=r.originalEvent.shiftKey?c-f:c+f;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(r.containerPoint,m)}});Mt.addInitHook("addHandler","doubleClickZoom",Tf),Mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ef=ln.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Ln(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){re(this._map._container,"leaflet-grab"),re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ie(this._map.options.maxBounds);this._offsetLimit=Ut(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-o+c)%r+o-c,y=(f+o+c)%r-o-c,S=Math.abs(m+c)<Math.abs(y+c)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(r){var o=this._map,c=o.options,f=!c.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),f)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,S=c.easeLinearity,N=m.multiplyBy(S/y),V=N.distanceTo([0,0]),q=Math.min(c.inertiaMaxSpeed,V),rt=N.multiplyBy(q/V),gt=q/(c.inertiaDeceleration*S),Lt=rt.multiplyBy(-gt/2).round();!Lt.x&&!Lt.y?o.fire("moveend"):(Lt=o._limitOffset(Lt,o.options.maxBounds),R(function(){o.panBy(Lt,{duration:gt,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Mt.addInitHook("addHandler","dragging",Ef),Mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var If=ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),_t(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,c=r.scrollTop||o.scrollTop,f=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},c=this.keyCodes,f,m;for(f=0,m=c.left.length;f<m;f++)o[c.left[f]]=[-1*r,0];for(f=0,m=c.right.length;f<m;f++)o[c.right[f]]=[r,0];for(f=0,m=c.down.length;f<m;f++)o[c.down[f]]=[0,r];for(f=0,m=c.up.length;f<m;f++)o[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},c=this.keyCodes,f,m;for(f=0,m=c.zoomIn.length;f<m;f++)o[c.zoomIn[f]]=r;for(f=0,m=c.zoomOut.length;f<m;f++)o[c.zoomOut[f]]=-r},_addHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,c=this._map,f;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[o],r.shiftKey&&(f=pt(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(pt(f),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(m)}else c.panBy(f)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;an(r)}}});Mt.addInitHook("addHandler","keyboard",If),Mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bf=ln.extend({addHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=Na(r),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),f),an(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=c?Math.ceil(m/c)*c:m,S=r._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,S&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+S):r.setZoomAround(this._lastMousePos,o+S))}});Mt.addInitHook("addHandler","scrollWheelZoom",bf);var $v=600;Mt.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var Pf=ln.extend({addHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new nt(o.clientX,o.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(_t(document,"touchend",oe),_t(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),$v),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Kt(document,"touchend",oe),Kt(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Kt(document,"touchend touchcancel contextmenu",this._cancel,this),Kt(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new nt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});Mt.addInitHook("addHandler","tapHold",Pf),Mt.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var Af=ln.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){re(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(r.touches[0]),f=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),oe(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(r.touches[0]),f=o.mouseEventToContainerPoint(r.touches[1]),m=c.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var S=u(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(S,this,!0),oe(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mt.addInitHook("addHandler","touchZoom",Af),Mt.BoxZoom=wf,Mt.DoubleClickZoom=Tf,Mt.Drag=Ef,Mt.Keyboard=If,Mt.ScrollWheelZoom=bf,Mt.TapHold=Pf,Mt.TouchZoom=Af,e.Bounds=$t,e.Browser=ht,e.CRS=Te,e.Canvas=_f,e.Circle=Lu,e.CircleMarker=$a,e.Class=ee,e.Control=nn,e.DivIcon=df,e.DivOverlay=Hn,e.DomEvent=Va,e.DomUtil=Ma,e.Draggable=Ln,e.Evented=wt,e.FeatureGroup=he,e.GeoJSON=pi,e.GridLayer=Po,e.Handler=ln,e.Icon=jn,e.ImageOverlay=Ka,e.LatLng=Dt,e.LatLngBounds=zt,e.Layer=Qt,e.LayerGroup=ae,e.LineUtil=T,e.Map=Mt,e.Marker=Ha,e.Mixin=Tr,e.Path=Hi,e.Point=nt,e.PolyUtil=hs,e.Polygon=ps,e.Polyline=di,e.Popup=Qa,e.PosAnimation=vo,e.Projection=X,e.Rectangle=yf,e.Renderer=mi,e.SVG=So,e.SVGOverlay=ff,e.TileLayer=_s,e.Tooltip=Ja,e.Transformation=ii,e.Util=A,e.VideoOverlay=hf,e.bind=u,e.bounds=Ut,e.canvas=gf,e.circle=xv,e.circleMarker=Rv,e.control=We,e.divIcon=Bv,e.extend=s,e.featureGroup=ds,e.geoJSON=cf,e.geoJson=Ov,e.gridLayer=Uv,e.icon=Sv,e.imageOverlay=Mv,e.latLng=Ct,e.latLngBounds=ie,e.layerGroup=ji,e.map=ss,e.marker=Cv,e.point=pt,e.polygon=kv,e.polyline=Lv,e.popup=Vv,e.rectangle=Hv,e.setOptions=z,e.stamp=d,e.svg=vf,e.svgOverlay=Nv,e.tileLayer=pf,e.tooltip=Fv,e.transformation=P,e.version=i,e.videoOverlay=Dv;var qv=window.L;e.noConflict=function(){return window.L=qv,this},window.L=e})}(ko,ko.exports)),ko.exports}var cb=ub();const sl=ab(cb);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let F_;const mu=n=>F_=n,B_=Symbol();function Pc(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var qo;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(qo||(qo={}));function hb(){const n=Qp(!0),t=n.run(()=>bn({}));let e=[],i=[];const s=rh({install(a){mu(s),s._a=a,a.provide(B_,s),a.config.globalProperties.$pinia=s,i.forEach(u=>e.push(u)),i=[]},use(a){return this._a?e.push(a):i.push(a),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return s}const U_=()=>{};function Dd(n,t,e,i=U_){n.push(t);const s=()=>{const a=n.indexOf(t);a>-1&&(n.splice(a,1),i())};return!e&&Jp()&&hy(s),s}function ys(n,...t){n.slice().forEach(e=>{e(...t)})}const fb=n=>n(),Nd=Symbol(),tc=Symbol();function Ac(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,i)=>n.set(i,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e],s=n[e];Pc(s)&&Pc(i)&&n.hasOwnProperty(e)&&!de(i)&&!xr(i)?n[e]=Ac(s,i):n[e]=i}return n}const db=Symbol();function pb(n){return!Pc(n)||!Object.prototype.hasOwnProperty.call(n,db)}const{assign:qi}=Object;function mb(n){return!!(de(n)&&n.effect)}function _b(n,t,e,i){const{state:s,actions:a,getters:u}=t,h=e.state.value[n];let d;function g(){h||(e.state.value[n]=s?s():{});const v=Dy(e.state.value[n]);return qi(v,a,Object.keys(u||{}).reduce((w,E)=>(w[E]=rh(dh(()=>{mu(e);const x=e._s.get(n);return u[E].call(x,x)})),w),{}))}return d=z_(n,g,t,e,i,!0),d}function z_(n,t,e={},i,s,a){let u;const h=qi({actions:{}},e),d={deep:!0};let g,v,w=[],E=[],x;const F=i.state.value[n];!a&&!F&&(i.state.value[n]={}),bn({});let z;function W(I){let b;g=v=!1,typeof I=="function"?(I(i.state.value[n]),b={type:qo.patchFunction,storeId:n,events:x}):(Ac(i.state.value[n],I),b={type:qo.patchObject,payload:I,storeId:n,events:x});const C=z=Symbol();mm().then(()=>{z===C&&(g=!0)}),v=!0,ys(w,b,i.state.value[n])}const ot=a?function(){const{state:b}=e,C=b?b():{};this.$patch(R=>{qi(R,C)})}:U_;function at(){u.stop(),w=[],E=[],i._s.delete(n)}const it=(I,b="")=>{if(Nd in I)return I[tc]=b,I;const C=function(){mu(i);const R=Array.from(arguments),M=[],A=[];function ee(wt){M.push(wt)}function dn(wt){A.push(wt)}ys(E,{args:R,name:C[tc],store:yt,after:ee,onError:dn});let kt;try{kt=I.apply(this&&this.$id===n?this:yt,R)}catch(wt){throw ys(A,wt),wt}return kt instanceof Promise?kt.then(wt=>(ys(M,wt),wt)).catch(wt=>(ys(A,wt),Promise.reject(wt))):(ys(M,kt),kt)};return C[Nd]=!0,C[tc]=b,C},et={_p:i,$id:n,$onAction:Dd.bind(null,E),$patch:W,$reset:ot,$subscribe(I,b={}){const C=Dd(w,I,b.detached,()=>R()),R=u.run(()=>pl(()=>i.state.value[n],M=>{(b.flush==="sync"?v:g)&&I({storeId:n,type:qo.direct,events:x},M)},qi({},d,b)));return C},$dispose:at},yt=su(et);i._s.set(n,yt);const O=(i._a&&i._a.runWithContext||fb)(()=>i._e.run(()=>(u=Qp()).run(()=>t({action:it}))));for(const I in O){const b=O[I];if(de(b)&&!mb(b)||xr(b))a||(F&&pb(b)&&(de(b)?b.value=F[I]:Ac(b,F[I])),i.state.value[n][I]=b);else if(typeof b=="function"){const C=it(b,I);O[I]=C,h.actions[I]=b}}return qi(yt,O),qi(qt(yt),O),Object.defineProperty(yt,"$state",{get:()=>i.state.value[n],set:I=>{W(b=>{qi(b,I)})}}),i._p.forEach(I=>{qi(yt,u.run(()=>I({store:yt,app:i._a,pinia:i,options:h})))}),F&&a&&e.hydrate&&e.hydrate(yt.$state,F),g=!0,v=!0,yt}/*! #__NO_SIDE_EFFECTS__ */function Ch(n,t,e){let i;const s=typeof t=="function";i=s?e:t;function a(u,h){const d=mw();return u=u||(d?kr(B_,null):null),u&&mu(u),u=F_,u._s.has(n)||(s?z_(n,t,i,u):_b(n,i,u)),u._s.get(n)}return a.$id=n,a}var gb="firebase",vb="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(gb,vb,"app");var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,j_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,I){function b(){}b.prototype=I.prototype,O.D=I.prototype,O.prototype=new b,O.prototype.constructor=O,O.C=function(C,R,M){for(var A=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)A[ee-2]=arguments[ee];return I.prototype[R].apply(C,A)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,I,b){b||(b=0);var C=Array(16);if(typeof I=="string")for(var R=0;16>R;++R)C[R]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(R=0;16>R;++R)C[R]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=O.g[0],b=O.g[1],R=O.g[2];var M=O.g[3],A=I+(M^b&(R^M))+C[0]+3614090360&4294967295;I=b+(A<<7&4294967295|A>>>25),A=M+(R^I&(b^R))+C[1]+3905402710&4294967295,M=I+(A<<12&4294967295|A>>>20),A=R+(b^M&(I^b))+C[2]+606105819&4294967295,R=M+(A<<17&4294967295|A>>>15),A=b+(I^R&(M^I))+C[3]+3250441966&4294967295,b=R+(A<<22&4294967295|A>>>10),A=I+(M^b&(R^M))+C[4]+4118548399&4294967295,I=b+(A<<7&4294967295|A>>>25),A=M+(R^I&(b^R))+C[5]+1200080426&4294967295,M=I+(A<<12&4294967295|A>>>20),A=R+(b^M&(I^b))+C[6]+2821735955&4294967295,R=M+(A<<17&4294967295|A>>>15),A=b+(I^R&(M^I))+C[7]+4249261313&4294967295,b=R+(A<<22&4294967295|A>>>10),A=I+(M^b&(R^M))+C[8]+1770035416&4294967295,I=b+(A<<7&4294967295|A>>>25),A=M+(R^I&(b^R))+C[9]+2336552879&4294967295,M=I+(A<<12&4294967295|A>>>20),A=R+(b^M&(I^b))+C[10]+4294925233&4294967295,R=M+(A<<17&4294967295|A>>>15),A=b+(I^R&(M^I))+C[11]+2304563134&4294967295,b=R+(A<<22&4294967295|A>>>10),A=I+(M^b&(R^M))+C[12]+1804603682&4294967295,I=b+(A<<7&4294967295|A>>>25),A=M+(R^I&(b^R))+C[13]+4254626195&4294967295,M=I+(A<<12&4294967295|A>>>20),A=R+(b^M&(I^b))+C[14]+2792965006&4294967295,R=M+(A<<17&4294967295|A>>>15),A=b+(I^R&(M^I))+C[15]+1236535329&4294967295,b=R+(A<<22&4294967295|A>>>10),A=I+(R^M&(b^R))+C[1]+4129170786&4294967295,I=b+(A<<5&4294967295|A>>>27),A=M+(b^R&(I^b))+C[6]+3225465664&4294967295,M=I+(A<<9&4294967295|A>>>23),A=R+(I^b&(M^I))+C[11]+643717713&4294967295,R=M+(A<<14&4294967295|A>>>18),A=b+(M^I&(R^M))+C[0]+3921069994&4294967295,b=R+(A<<20&4294967295|A>>>12),A=I+(R^M&(b^R))+C[5]+3593408605&4294967295,I=b+(A<<5&4294967295|A>>>27),A=M+(b^R&(I^b))+C[10]+38016083&4294967295,M=I+(A<<9&4294967295|A>>>23),A=R+(I^b&(M^I))+C[15]+3634488961&4294967295,R=M+(A<<14&4294967295|A>>>18),A=b+(M^I&(R^M))+C[4]+3889429448&4294967295,b=R+(A<<20&4294967295|A>>>12),A=I+(R^M&(b^R))+C[9]+568446438&4294967295,I=b+(A<<5&4294967295|A>>>27),A=M+(b^R&(I^b))+C[14]+3275163606&4294967295,M=I+(A<<9&4294967295|A>>>23),A=R+(I^b&(M^I))+C[3]+4107603335&4294967295,R=M+(A<<14&4294967295|A>>>18),A=b+(M^I&(R^M))+C[8]+1163531501&4294967295,b=R+(A<<20&4294967295|A>>>12),A=I+(R^M&(b^R))+C[13]+2850285829&4294967295,I=b+(A<<5&4294967295|A>>>27),A=M+(b^R&(I^b))+C[2]+4243563512&4294967295,M=I+(A<<9&4294967295|A>>>23),A=R+(I^b&(M^I))+C[7]+1735328473&4294967295,R=M+(A<<14&4294967295|A>>>18),A=b+(M^I&(R^M))+C[12]+2368359562&4294967295,b=R+(A<<20&4294967295|A>>>12),A=I+(b^R^M)+C[5]+4294588738&4294967295,I=b+(A<<4&4294967295|A>>>28),A=M+(I^b^R)+C[8]+2272392833&4294967295,M=I+(A<<11&4294967295|A>>>21),A=R+(M^I^b)+C[11]+1839030562&4294967295,R=M+(A<<16&4294967295|A>>>16),A=b+(R^M^I)+C[14]+4259657740&4294967295,b=R+(A<<23&4294967295|A>>>9),A=I+(b^R^M)+C[1]+2763975236&4294967295,I=b+(A<<4&4294967295|A>>>28),A=M+(I^b^R)+C[4]+1272893353&4294967295,M=I+(A<<11&4294967295|A>>>21),A=R+(M^I^b)+C[7]+4139469664&4294967295,R=M+(A<<16&4294967295|A>>>16),A=b+(R^M^I)+C[10]+3200236656&4294967295,b=R+(A<<23&4294967295|A>>>9),A=I+(b^R^M)+C[13]+681279174&4294967295,I=b+(A<<4&4294967295|A>>>28),A=M+(I^b^R)+C[0]+3936430074&4294967295,M=I+(A<<11&4294967295|A>>>21),A=R+(M^I^b)+C[3]+3572445317&4294967295,R=M+(A<<16&4294967295|A>>>16),A=b+(R^M^I)+C[6]+76029189&4294967295,b=R+(A<<23&4294967295|A>>>9),A=I+(b^R^M)+C[9]+3654602809&4294967295,I=b+(A<<4&4294967295|A>>>28),A=M+(I^b^R)+C[12]+3873151461&4294967295,M=I+(A<<11&4294967295|A>>>21),A=R+(M^I^b)+C[15]+530742520&4294967295,R=M+(A<<16&4294967295|A>>>16),A=b+(R^M^I)+C[2]+3299628645&4294967295,b=R+(A<<23&4294967295|A>>>9),A=I+(R^(b|~M))+C[0]+4096336452&4294967295,I=b+(A<<6&4294967295|A>>>26),A=M+(b^(I|~R))+C[7]+1126891415&4294967295,M=I+(A<<10&4294967295|A>>>22),A=R+(I^(M|~b))+C[14]+2878612391&4294967295,R=M+(A<<15&4294967295|A>>>17),A=b+(M^(R|~I))+C[5]+4237533241&4294967295,b=R+(A<<21&4294967295|A>>>11),A=I+(R^(b|~M))+C[12]+1700485571&4294967295,I=b+(A<<6&4294967295|A>>>26),A=M+(b^(I|~R))+C[3]+2399980690&4294967295,M=I+(A<<10&4294967295|A>>>22),A=R+(I^(M|~b))+C[10]+4293915773&4294967295,R=M+(A<<15&4294967295|A>>>17),A=b+(M^(R|~I))+C[1]+2240044497&4294967295,b=R+(A<<21&4294967295|A>>>11),A=I+(R^(b|~M))+C[8]+1873313359&4294967295,I=b+(A<<6&4294967295|A>>>26),A=M+(b^(I|~R))+C[15]+4264355552&4294967295,M=I+(A<<10&4294967295|A>>>22),A=R+(I^(M|~b))+C[6]+2734768916&4294967295,R=M+(A<<15&4294967295|A>>>17),A=b+(M^(R|~I))+C[13]+1309151649&4294967295,b=R+(A<<21&4294967295|A>>>11),A=I+(R^(b|~M))+C[4]+4149444226&4294967295,I=b+(A<<6&4294967295|A>>>26),A=M+(b^(I|~R))+C[11]+3174756917&4294967295,M=I+(A<<10&4294967295|A>>>22),A=R+(I^(M|~b))+C[2]+718787259&4294967295,R=M+(A<<15&4294967295|A>>>17),A=b+(M^(R|~I))+C[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+R&4294967295,O.g[3]=O.g[3]+M&4294967295}i.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var b=I-this.blockSize,C=this.B,R=this.h,M=0;M<I;){if(R==0)for(;M<=b;)s(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<I;)if(C[R++]=O.charCodeAt(M++),R==this.blockSize){s(this,C),R=0;break}}else for(;M<I;)if(C[R++]=O[M++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=I},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var b=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=b&255,b/=256;for(this.u(O),O=Array(16),I=b=0;4>I;++I)for(var C=0;32>C;C+=8)O[b++]=this.g[I]>>>C&255;return O};function a(O,I){var b=h;return Object.prototype.hasOwnProperty.call(b,O)?b[O]:b[O]=I(O)}function u(O,I){this.h=I;for(var b=[],C=!0,R=O.length-1;0<=R;R--){var M=O[R]|0;C&&M==I||(b[R]=M,C=!1)}this.g=b}var h={};function d(O){return-128<=O&&128>O?a(O,function(I){return new u([I|0],0>I?-1:0)}):new u([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return w;if(0>O)return W(g(-O));for(var I=[],b=1,C=0;O>=b;C++)I[C]=O/b|0,b*=4294967296;return new u(I,0)}function v(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return W(v(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(I,8)),C=w,R=0;R<O.length;R+=8){var M=Math.min(8,O.length-R),A=parseInt(O.substring(R,R+M),I);8>M?(M=g(Math.pow(I,M)),C=C.j(M).add(g(A))):(C=C.j(b),C=C.add(g(A)))}return C}var w=d(0),E=d(1),x=d(16777216);n=u.prototype,n.m=function(){if(z(this))return-W(this).m();for(var O=0,I=1,b=0;b<this.g.length;b++){var C=this.i(b);O+=(0<=C?C:4294967296+C)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(F(this))return"0";if(z(this))return"-"+W(this).toString(O);for(var I=g(Math.pow(O,6)),b=this,C="";;){var R=et(b,I).g;b=ot(b,R.j(I));var M=((0<b.g.length?b.g[0]:b.h)>>>0).toString(O);if(b=R,F(b))return M+C;for(;6>M.length;)M="0"+M;C=M+C}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function F(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function z(O){return O.h==-1}n.l=function(O){return O=ot(this,O),z(O)?-1:F(O)?0:1};function W(O){for(var I=O.g.length,b=[],C=0;C<I;C++)b[C]=~O.g[C];return new u(b,~O.h).add(E)}n.abs=function(){return z(this)?W(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),b=[],C=0,R=0;R<=I;R++){var M=C+(this.i(R)&65535)+(O.i(R)&65535),A=(M>>>16)+(this.i(R)>>>16)+(O.i(R)>>>16);C=A>>>16,M&=65535,A&=65535,b[R]=A<<16|M}return new u(b,b[b.length-1]&-2147483648?-1:0)};function ot(O,I){return O.add(W(I))}n.j=function(O){if(F(this)||F(O))return w;if(z(this))return z(O)?W(this).j(W(O)):W(W(this).j(O));if(z(O))return W(this.j(W(O)));if(0>this.l(x)&&0>O.l(x))return g(this.m()*O.m());for(var I=this.g.length+O.g.length,b=[],C=0;C<2*I;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<O.g.length;R++){var M=this.i(C)>>>16,A=this.i(C)&65535,ee=O.i(R)>>>16,dn=O.i(R)&65535;b[2*C+2*R]+=A*dn,at(b,2*C+2*R),b[2*C+2*R+1]+=M*dn,at(b,2*C+2*R+1),b[2*C+2*R+1]+=A*ee,at(b,2*C+2*R+1),b[2*C+2*R+2]+=M*ee,at(b,2*C+2*R+2)}for(C=0;C<I;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=I;C<2*I;C++)b[C]=0;return new u(b,0)};function at(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function it(O,I){this.g=O,this.h=I}function et(O,I){if(F(I))throw Error("division by zero");if(F(O))return new it(w,w);if(z(O))return I=et(W(O),I),new it(W(I.g),W(I.h));if(z(I))return I=et(O,W(I)),new it(W(I.g),I.h);if(30<O.g.length){if(z(O)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var b=E,C=I;0>=C.l(O);)b=yt(b),C=yt(C);var R=Bt(b,1),M=Bt(C,1);for(C=Bt(C,2),b=Bt(b,2);!F(C);){var A=M.add(C);0>=A.l(O)&&(R=R.add(b),M=A),C=Bt(C,1),b=Bt(b,1)}return I=ot(O,R.j(I)),new it(R,I)}for(R=w;0<=O.l(I);){for(b=Math.max(1,Math.floor(O.m()/I.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),M=g(b),A=M.j(I);z(A)||0<A.l(O);)b-=C,M=g(b),A=M.j(I);F(M)&&(M=E),R=R.add(M),O=ot(O,A)}return new it(R,O)}n.A=function(O){return et(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),b=[],C=0;C<I;C++)b[C]=this.i(C)&O.i(C);return new u(b,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),b=[],C=0;C<I;C++)b[C]=this.i(C)|O.i(C);return new u(b,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),b=[],C=0;C<I;C++)b[C]=this.i(C)^O.i(C);return new u(b,this.h^O.h)};function yt(O){for(var I=O.g.length+1,b=[],C=0;C<I;C++)b[C]=O.i(C)<<1|O.i(C-1)>>>31;return new u(b,O.h)}function Bt(O,I){var b=I>>5;I%=32;for(var C=O.g.length-b,R=[],M=0;M<C;M++)R[M]=0<I?O.i(M+b)>>>I|O.i(M+b+1)<<32-I:O.i(M+b);return new u(R,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,nr=u}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H_,Oo,$_,Tl,Sc,q_,W_,Z_;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ol=="object"&&ol];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=e(this);function s(l,p){if(p)t:{var _=i;l=l.split(".");for(var T=0;T<l.length-1;T++){var D=l[T];if(!(D in _))break t;_=_[D]}l=l[l.length-1],T=_[l],p=p(T),p!=T&&p!=null&&t(_,l,{configurable:!0,writable:!0,value:p})}}function a(l,p){l instanceof String&&(l+="");var _=0,T=!1,D={next:function(){if(!T&&_<l.length){var B=_++;return{value:p(B,l[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return a(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function g(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function v(l,p,_){return l.call.apply(l.bind,arguments)}function w(l,p,_){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),l.apply(p,D)}}return function(){return l.apply(p,arguments)}}function E(l,p,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,E.apply(null,arguments)}function x(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function F(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(T,D,B){for(var X=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)X[Gt-2]=arguments[Gt];return p.prototype[D].apply(T,X)}}function z(l){const p=l.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=l[T];return _}return[]}function W(l,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(d(T)){const D=l.length||0,B=T.length||0;l.length=D+B;for(let X=0;X<B;X++)l[D+X]=T[X]}else l.push(T)}}class ot{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function at(l){return/^[\s\xa0]*$/.test(l)}function it(){var l=h.navigator;return l&&(l=l.userAgent)?l:""}function et(l){return et[" "](l),l}et[" "]=function(){};var yt=it().indexOf("Gecko")!=-1&&!(it().toLowerCase().indexOf("webkit")!=-1&&it().indexOf("Edge")==-1)&&!(it().indexOf("Trident")!=-1||it().indexOf("MSIE")!=-1)&&it().indexOf("Edge")==-1;function Bt(l,p,_){for(const T in l)p.call(_,l[T],T,l)}function O(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function I(l){const p={};for(const _ in l)p[_]=l[_];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,p){let _,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(_ in T)l[_]=T[_];for(let B=0;B<b.length;B++)_=b[B],Object.prototype.hasOwnProperty.call(T,_)&&(l[_]=T[_])}}function R(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function M(l){h.setTimeout(()=>{throw l},0)}function A(){var l=Xe;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,_){const T=dn.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var dn=new ot(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,nt=!1,Xe=new ee,pt=()=>{const l=h.Promise.resolve(void 0);wt=()=>{l.then($t)}};var $t=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(_){M(_)}var p=dn;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}nt=!1};function Ut(){this.s=this.s,this.C=this.C}Ut.prototype.s=!1,Ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return l}();function Dt(l,p){if(zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(yt){t:{try{et(p.nodeName);var D=!0;break t}catch{}D=!1}D||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ct[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Dt.aa.h.call(this)}}F(Dt,zt);var Ct={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function fr(l,p,_,T,D){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=D,this.key=++Ye,this.da=this.fa=!1}function tn(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ii(l){this.src=l,this.g={},this.h=0}ii.prototype.add=function(l,p,_,T,D){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var X=k(l,p,T,D);return-1<X?(p=l[X],_||(p.fa=!1)):(p=new fr(p,this.src,B,!!T,D),p.fa=_,l.push(p)),p};function P(l,p){var _=p.type;if(_ in l.g){var T=l.g[_],D=Array.prototype.indexOf.call(T,p,void 0),B;(B=0<=D)&&Array.prototype.splice.call(T,D,1),B&&(tn(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function k(l,p,_,T){for(var D=0;D<l.length;++D){var B=l[D];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==T)return D}return-1}var U="closure_lm_"+(1e6*Math.random()|0),G={};function $(l,p,_,T,D){if(Array.isArray(p)){for(var B=0;B<p.length;B++)$(l,p[B],_,T,D);return null}return _=mt(_),l&&l[Te]?l.K(p,_,g(T)?!!T.capture:!1,D):Z(l,p,_,!1,T,D)}function Z(l,p,_,T,D,B){if(!p)throw Error("Invalid event type");var X=g(D)?!!D.capture:!!D,Gt=tt(l);if(Gt||(l[U]=Gt=new ii(l)),_=Gt.add(p,_,T,X,B),_.proxy)return _;if(T=Y(),_.proxy=T,T.src=l,T.listener=_,l.addEventListener)ie||(D=X),D===void 0&&(D=!1),l.addEventListener(p.toString(),T,D);else if(l.attachEvent)l.attachEvent(K(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Y(){function l(_){return p.call(l.src,l.listener,_)}const p=ct;return l}function J(l,p,_,T,D){if(Array.isArray(p))for(var B=0;B<p.length;B++)J(l,p[B],_,T,D);else T=g(T)?!!T.capture:!!T,_=mt(_),l&&l[Te]?(l=l.i,p=String(p).toString(),p in l.g&&(B=l.g[p],_=k(B,_,T,D),-1<_&&(tn(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete l.g[p],l.h--)))):l&&(l=tt(l))&&(p=l.g[p.toString()],l=-1,p&&(l=k(p,_,T,D)),(_=-1<l?p[l]:null)&&Q(_))}function Q(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Te])P(p.i,l);else{var _=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(_,T,l.capture):p.detachEvent?p.detachEvent(K(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=tt(p))?(P(_,l),_.h==0&&(_.src=null,p[U]=null)):tn(l)}}}function K(l){return l in G?G[l]:G[l]="on"+l}function ct(l,p){if(l.da)l=!0;else{p=new Dt(p,this);var _=l.listener,T=l.ha||l.src;l.fa&&Q(l),l=_.call(T,p)}return l}function tt(l){return l=l[U],l instanceof ii?l:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(l){return typeof l=="function"?l:(l[ut]||(l[ut]=function(p){return l.handleEvent(p)}),l[ut])}function ft(){Ut.call(this),this.i=new ii(this),this.M=this,this.F=null}F(ft,Ut),ft.prototype[Te]=!0,ft.prototype.removeEventListener=function(l,p,_,T){J(this,l,p,_,T)};function It(l,p){var _,T=l.F;if(T)for(_=[];T;T=T.F)_.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new zt(p,l);else if(p instanceof zt)p.target=p.target||l;else{var D=p;p=new zt(T,l),C(p,D)}if(D=!0,_)for(var B=_.length-1;0<=B;B--){var X=p.g=_[B];D=Ot(X,T,!0,p)&&D}if(X=p.g=l,D=Ot(X,T,!0,p)&&D,D=Ot(X,T,!1,p)&&D,_)for(B=0;B<_.length;B++)X=p.g=_[B],D=Ot(X,T,!1,p)&&D}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],T=0;T<_.length;T++)tn(_[T]);delete l.g[p],l.h--}}this.F=null},ft.prototype.K=function(l,p,_,T){return this.i.add(String(l),p,!1,_,T)},ft.prototype.L=function(l,p,_,T){return this.i.add(String(l),p,!0,_,T)};function Ot(l,p,_,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var D=!0,B=0;B<p.length;++B){var X=p[B];if(X&&!X.da&&X.capture==_){var Gt=X.listener,_e=X.ha||X.src;X.fa&&P(l.i,X),D=Gt.call(_e,T)!==!1&&D}}return D&&!T.defaultPrevented}function Ee(l,p,_){if(typeof l=="function")_&&(l=E(l,_));else if(l&&typeof l.handleEvent=="function")l=E(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(l,p||0)}function pe(l){l.g=Ee(()=>{l.g=null,l.i&&(l.i=!1,pe(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class qe extends Ut{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ae(l){Ut.call(this),this.h=l,this.g={}}F(Ae,Ut);var An=[];function ri(l){Bt(l.g,function(p,_){this.g.hasOwnProperty(_)&&Q(p)},l),l.g={}}Ae.prototype.N=function(){Ae.aa.N.call(this),ri(this)},Ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=h.JSON.stringify,en=h.JSON.parse,Bn=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function Js(){}Js.prototype.h=null;function ba(l){return l.h||(l.h=l.i())}function Xs(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gr(){zt.call(this,"d")}F(Gr,zt);function Ys(){zt.call(this,"c")}F(Ys,zt);var si={},Pa=null;function Kr(){return Pa=Pa||new ft}si.La="serverreachability";function Aa(l){zt.call(this,si.La,l)}F(Aa,zt);function dr(l){const p=Kr();It(p,new Aa(p))}si.STAT_EVENT="statevent";function Qr(l,p){zt.call(this,si.STAT_EVENT,l),this.stat=p}F(Qr,zt);function Le(l){const p=Kr();It(p,new Qr(p,l))}si.Ma="timingevent";function Sa(l,p){zt.call(this,si.Ma,l),this.size=p}F(Sa,zt);function pr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},p)}function mr(){this.g=!0}mr.prototype.xa=function(){this.g=!1};function pn(l,p,_,T,D,B){l.info(function(){if(l.g)if(B)for(var X="",Gt=B.split("&"),_e=0;_e<Gt.length;_e++){var jt=Gt[_e].split("=");if(1<jt.length){var Qt=jt[0];jt=jt[1];var ae=Qt.split("_");X=2<=ae.length&&ae[1]=="type"?X+(Qt+"="+jt+"&"):X+(Qt+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+p+`
`+_+`
`+X})}function ht(l,p,_,T,D,B,X){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+p+`
`+_+`
`+B+" "+X})}function oi(l,p,_,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ra(l,_)+(T?" "+T:"")})}function Ca(l,p){l.info(function(){return"TIMEOUT: "+p})}mr.prototype.info=function(){};function Ra(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var T=_[l];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var B=D[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<D.length;X++)D[X]=""}}}}return me(_)}catch{return p}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xr;function Sn(){}F(Sn,Js),Sn.prototype.g=function(){return new XMLHttpRequest},Sn.prototype.i=function(){return{}},Xr=new Sn;function Cn(l,p,_,T){this.j=l,this.i=p,this.l=_,this.R=T||1,this.U=new Ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xa}function xa(){this.i=null,this.g="",this.h=!1}var La={},to={};function eo(l,p,_){l.L=1,l.v=_n(ue(p)),l.m=_,l.P=!0,no(l,null)}function no(l,p){l.F=Date.now(),ts(l),l.A=ue(l.v);var _=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Ma(_.i,"t",T),l.C=0,_=l.j.J,l.h=new xa,l.g=za(l.j,_?p:null,!l.m),0<l.O&&(l.M=new qe(E(l.Y,l,l.g),l.O)),p=l.U,_=l.g,T=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(An[0]=D.toString()),D=An);for(var B=0;B<D.length;B++){var X=$(_,D[B],T||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),dr(),pn(l.i,l.u,l.A,l.l,l.R,l.m)}Cn.prototype.ca=function(l){l=l.target;const p=this.M;p&&We(l)==3?p.j():this.Y(l)},Cn.prototype.Y=function(l){try{if(l==this.g)t:{const ae=We(this.g);var p=this.g.Ba();const ji=this.g.Z();if(!(3>ae)&&(ae!=3||this.g&&(this.h.h||this.g.oa()||yo(this.g)))){this.J||ae!=4||p==7||(p==8||0>=ji?dr(3):dr(2)),io(this);var _=this.g.Z();this.X=_;e:if(ka(this)){var T=yo(this.g);l="";var D=T.length,B=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),gr(this);var X="";break e}this.h.i=new h.TextDecoder}for(p=0;p<D;p++)this.h.h=!0,l+=this.h.i.decode(T[p],{stream:!(B&&p==D-1)});T.length=0,this.h.g+=l,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=_==200,ht(this.i,this.u,this.A,this.l,this.R,ae,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Gt,_e=this.g;if((Gt=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(Gt)){var jt=Gt;break e}}jt=null}if(_=jt)oi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vr(this,_);else{this.o=!1,this.s=3,Le(12),ai(this),gr(this);break t}}if(this.P){_=!0;let he;for(;!this.J&&this.C<X.length;)if(he=Yr(this,X),he==to){ae==4&&(this.s=4,Le(14),_=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(he==La){this.s=4,Le(15),oi(this.i,this.l,X,"[Invalid Chunk]"),_=!1;break}else oi(this.i,this.l,he,null),vr(this,he);if(ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||X.length!=0||this.h.h||(this.s=1,Le(16),_=!1),this.o=this.o&&_,!_)oi(this.i,this.l,X,"[Invalid Chunked Response]"),ai(this),gr(this);else if(0<X.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),us(Qt),Qt.M=!0,Le(11))}}else oi(this.i,this.l,X,null),vr(this,X);ae==4&&ai(this),this.o&&!this.J&&(ae==4?To(this.j,this):(this.o=!1,ts(this)))}else Ru(this.g),_==400&&0<X.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),ai(this),gr(this)}}}catch{}finally{}};function ka(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Yr(l,p){var _=l.C,T=p.indexOf(`
`,_);return T==-1?to:(_=Number(p.substring(_,T)),isNaN(_)?La:(T+=1,T+_>p.length?to:(p=p.slice(T,T+_),l.C=T+_,p)))}Cn.prototype.cancel=function(){this.J=!0,ai(this)};function ts(l){l.S=Date.now()+l.I,Oa(l,l.I)}function Oa(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=pr(E(l.ba,l),p)}function io(l){l.B&&(h.clearTimeout(l.B),l.B=null)}Cn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ca(this.i,this.A),this.L!=2&&(dr(),Le(17)),ai(this),this.s=2,gr(this)):Oa(this,this.S-l)};function gr(l){l.j.G==0||l.J||To(l.j,l)}function ai(l){io(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,ri(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function vr(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||Nt(_.h,l))){if(!l.K&&Nt(_.h,l)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)hs(_),as(_);else break t;ls(_),Le(18)}}else _.za=D[1],0<_.za-_.T&&37500>D[2]&&_.F&&_.v==0&&!_.C&&(_.C=pr(E(_.Za,_),6e3));if(1>=Ni(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else fi(_,11)}else if((l.K||_.g==l)&&hs(_),!at(p))for(D=_.Da.g.parse(p),p=0;p<D.length;p++){let jt=D[p];if(_.T=jt[0],jt=jt[1],_.G==2)if(jt[0]=="c"){_.K=jt[1],_.ia=jt[2];const Qt=jt[3];Qt!=null&&(_.la=Qt,_.j.info("VER="+_.la));const ae=jt[4];ae!=null&&(_.Aa=ae,_.j.info("SVER="+_.Aa));const ji=jt[5];ji!=null&&typeof ji=="number"&&0<ji&&(T=1.5*ji,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const he=l.g;if(he){const ds=he.g?he.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ds){var B=T.h;B.g||ds.indexOf("spdy")==-1&&ds.indexOf("quic")==-1&&ds.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Jt(B,B.h),B.h=null))}if(T.D){const jn=he.g?he.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(T.ya=jn,Et(T.I,T.D,jn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var X=l;if(T.qa=fs(T,T.J?T.ia:null,T.W),X.K){wr(T.h,X);var Gt=X,_e=T.L;_e&&(Gt.I=_e),Gt.B&&(io(Gt),ts(Gt)),T.g=X}else Ln(T);0<_.i.length&&zi(_)}else jt[0]!="stop"&&jt[0]!="close"||fi(_,7);else _.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?fi(_,7):os(_):jt[0]!="noop"&&_.l&&_.l.ta(jt),_.v=0)}}dr(4)}catch{}}var yr=class{constructor(l,p){this.g=l,this.map=p}};function ro(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function so(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ni(l){return l.h?1:l.g?l.g.size:0}function Nt(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Jt(l,p){l.g?l.g.add(p):l.h=p}function wr(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}ro.prototype.cancel=function(){if(this.i=li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function li(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return z(l.i)}function Vi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var p=[],_=l.length,T=0;T<_;T++)p.push(l[T]);return p}p=[],_=0;for(T in l)p[_++]=l[T];return p}function oo(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const T in l)p[_++]=T;return p}}}function St(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=oo(l),T=Vi(l),D=T.length,B=0;B<D;B++)p.call(void 0,T[B],_&&_[B],l)}var re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ao(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var T=l[_].indexOf("="),D=null;if(0<=T){var B=l[_].substring(0,T);D=l[_].substring(T+1)}else B=l[_];p(B,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function mn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof mn){this.h=l.h,es(this,l.j),this.o=l.o,this.g=l.g,ui(this,l.s),this.l=l.l;var p=l.i,_=new ci;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Un(this,_),this.m=l.m}else l&&(p=String(l).match(re))?(this.h=!1,es(this,p[1]||"",!0),this.o=Rn(p[2]||""),this.g=Rn(p[3]||"",!0),ui(this,p[4]),this.l=Rn(p[5]||"",!0),Un(this,p[6]||"",!0),this.m=Rn(p[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}mn.prototype.toString=function(){var l=[],p=this.j;p&&l.push(xn(p,Fi,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(xn(p,Fi,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(xn(_,_.charAt(0)=="/"?co:uo,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",xn(_,ho)),l.join("")};function ue(l){return new mn(l)}function es(l,p,_){l.j=_?Rn(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function ui(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Un(l,p,_){p instanceof ci?(l.i=p,gn(l.i,l.h)):(_||(p=xn(p,ns)),l.i=new ci(p,l.h))}function Et(l,p,_){l.i.set(p,_)}function _n(l){return Et(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Rn(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xn(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,lo),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function lo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fi=/[#\/\?@]/g,uo=/[#\?:]/g,co=/[#\?]/g,ns=/[#\?@]/g,ho=/#/g;function ci(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function on(l){l.g||(l.g=new Map,l.h=0,l.i&&ao(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=ci.prototype,n.add=function(l,p){on(this),this.i=null,l=_t(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function fo(l,p){on(l),p=_t(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function is(l,p){return on(l),p=_t(l,p),l.g.has(p)}n.forEach=function(l,p){on(this),this.g.forEach(function(_,T){_.forEach(function(D){l.call(p,D,T,this)},this)},this)},n.na=function(){on(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const D=l[T];for(let B=0;B<D.length;B++)_.push(p[T])}return _},n.V=function(l){on(this);let p=[];if(typeof l=="string")is(this,l)&&(p=p.concat(this.g.get(_t(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},n.set=function(l,p){return on(this),this.i=null,l=_t(this,l),is(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Ma(l,p,_){fo(l,p),0<_.length&&(l.i=null,l.g.set(_t(l,p),z(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const B=encodeURIComponent(String(T)),X=this.V(T);for(T=0;T<X.length;T++){var D=B;X[T]!==""&&(D+="="+encodeURIComponent(String(X[T]))),l.push(D)}}return this.i=l.join("&")};function _t(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function gn(l,p){p&&!l.j&&(on(l),l.i=null,l.g.forEach(function(_,T){var D=T.toLowerCase();T!=D&&(fo(this,T),Ma(this,D,_))},l)),l.j=p}function Kt(l,p){const _=new mr;if(h.Image){const T=new Image;T.onload=x(vn,_,"TestLoadImage: loaded",!0,p,T),T.onerror=x(vn,_,"TestLoadImage: error",!1,p,T),T.onabort=x(vn,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=x(vn,_,"TestLoadImage: timeout",!1,p,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function Da(l,p){const _=new mr,T=new AbortController,D=setTimeout(()=>{T.abort(),vn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(B=>{clearTimeout(D),B.ok?vn(_,"TestPingServer: ok",!0,p):vn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(D),vn(_,"TestPingServer: error",!1,p)})}function vn(l,p,_,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(_)}catch{}}function po(){this.g=new Bn}function mo(l,p,_){const T=_||"";try{St(l,function(D,B){let X=D;g(D)&&(X=me(D)),p.push(T+B+"="+encodeURIComponent(X))})}catch(D){throw p.push(T+"type="+encodeURIComponent("_badmap")),D}}function yn(l){this.l=l.Ub||null,this.j=l.eb||!1}F(yn,Js),yn.prototype.g=function(){return new Bi(this.l,this.j)},yn.prototype.i=function(l){return function(){return l}}({});function Bi(l,p){ft.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Bi,ft),n=Bi.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,an(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oe(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,an(this)),this.g&&(this.readyState=3,an(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ui(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ui(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?oe(this):an(this),this.readyState==3&&Ui(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,oe(this))},n.Qa=function(l){this.g&&(this.response=l,oe(this))},n.ga=function(){this.g&&oe(this)};function oe(l){l.readyState=4,l.l=null,l.j=null,l.v=null,an(l)}n.setRequestHeader=function(l,p){this.u.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function an(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _o(l){let p="";return Bt(l,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function rs(l,p,_){t:{for(T in _){var T=!1;break t}T=!0}T||(_=_o(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Et(l,p,_))}function se(l){ft.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(se,ft);var Na=/^https?$/i,go=["POST","PUT"];n=se.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xr.g(),this.v=this.o?ba(this.o):ba(Xr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(B){Va(this,B);return}if(l=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)_.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())_.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),D=h.FormData&&l instanceof h.FormData,!(0<=Array.prototype.indexOf.call(go,p,void 0))||T||D||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of _)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Va(this,B)}};function Va(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,vo(l),ss(l)}function vo(l){l.A||(l.A=!0,It(l,"complete"),It(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,It(this,"complete"),It(this,"abort"),ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mt(this):this.bb())},n.bb=function(){Mt(this)};function Mt(l){if(l.h&&typeof u<"u"&&(!l.v[1]||We(l)!=4||l.Z()!=2)){if(l.u&&We(l)==4)Ee(l.Ea,0,l);else if(It(l,"readystatechange"),We(l)==4){l.h=!1;try{const X=l.Z();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var T;if(T=X===0){var D=String(l.D).match(re)[1]||null;!D&&h.self&&h.self.location&&(D=h.self.location.protocol.slice(0,-1)),T=!Na.test(D?D.toLowerCase():"")}_=T}if(_)It(l,"complete"),It(l,"success");else{l.m=6;try{var B=2<We(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",vo(l)}}finally{ss(l)}}}}function ss(l,p){if(l.g){nn(l);const _=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||It(l,"ready");try{_.onreadystatechange=T}catch{}}}function nn(l){l.I&&(h.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function We(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),en(p)}};function yo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ru(l){const p={};l=(l.g&&2<=We(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(at(l[T]))continue;var _=R(l[T]);const D=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=p[D]||[];p[D]=B,B.push(_)}O(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function Fa(l){this.Aa=0,this.i=[],this.j=new mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hi("baseRetryDelayMs",5e3,l),this.cb=hi("retryDelaySeedMs",1e4,l),this.Wa=hi("forwardChannelMaxRetries",2,l),this.wa=hi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(l&&l.concurrentRequestLimit),this.Da=new po,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fa.prototype,n.la=8,n.G=1,n.connect=function(l,p,_,T){Le(0),this.W=l,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=fs(this,null,this.W),zi(this)};function os(l){if(Ba(l),l.G==3){var p=l.U++,_=ue(l.I);if(Et(_,"SID",l.K),Et(_,"RID",p),Et(_,"TYPE","terminate"),Tr(l,_),p=new Cn(l,l.j,p),p.L=2,p.v=_n(ue(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=za(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ts(p)}Ua(l)}function as(l){l.g&&(us(l),l.g.cancel(),l.g=null)}function Ba(l){as(l),l.u&&(h.clearTimeout(l.u),l.u=null),hs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&h.clearTimeout(l.s),l.s=null)}function zi(l){if(!so(l.h)&&!l.s){l.s=!0;var p=l.Ga;wt||pt(),nt||(wt(),nt=!0),Xe.add(p,l),l.B=0}}function xu(l,p){return Ni(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=pr(E(l.Ga,l,p),Eo(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new Cn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=I(B),C(B,this.S)):B=this.S),this.m!==null||this.O||(D.H=B,B=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=wo(this,D,p),_=ue(this.I),Et(_,"RID",l),Et(_,"CVER",22),this.D&&Et(_,"X-HTTP-Session-Id",this.D),Tr(this,_),B&&(this.O?p="headers="+encodeURIComponent(String(_o(B)))+"&"+p:this.m&&rs(_,this.m,B)),Jt(this.h,D),this.Ua&&Et(_,"TYPE","init"),this.P?(Et(_,"$req",p),Et(_,"SID","null"),D.T=!0,eo(D,_,null)):eo(D,_,p),this.G=2}}else this.G==3&&(l?ln(this,l):this.i.length==0||so(this.h)||ln(this))};function ln(l,p){var _;p?_=p.l:_=l.U++;const T=ue(l.I);Et(T,"SID",l.K),Et(T,"RID",_),Et(T,"AID",l.T),Tr(l,T),l.m&&l.o&&rs(T,l.m,l.o),_=new Cn(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=wo(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Jt(l.h,_),eo(_,T,p)}function Tr(l,p){l.H&&Bt(l.H,function(_,T){Et(p,T,_)}),l.l&&St({},function(_,T){Et(p,T,_)})}function wo(l,p,_){_=Math.min(l.i.length,_);var T=l.l?E(l.l.Na,l.l,l):null;t:{var D=l.i;let B=-1;for(;;){const X=["count="+_];B==-1?0<_?(B=D[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Gt=!0;for(let _e=0;_e<_;_e++){let jt=D[_e].g;const Qt=D[_e].map;if(jt-=B,0>jt)B=Math.max(0,D[_e].g-100),Gt=!1;else try{mo(Qt,X,"req"+jt+"_")}catch{T&&T(Qt)}}if(Gt){T=X.join("&");break t}}}return l=l.i.splice(0,_),p.D=l,T}function Ln(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;wt||pt(),nt||(wt(),nt=!0),Xe.add(p,l),l.v=0}}function ls(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=pr(E(l.Fa,l),Eo(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,cs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=pr(E(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),as(this),cs(this))};function us(l){l.A!=null&&(h.clearTimeout(l.A),l.A=null)}function cs(l){l.g=new Cn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=ue(l.qa);Et(p,"RID","rpc"),Et(p,"SID",l.K),Et(p,"AID",l.T),Et(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Et(p,"TO",l.ja),Et(p,"TYPE","xmlhttp"),Tr(l,p),l.m&&l.o&&rs(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=_n(ue(p)),_.m=null,_.P=!0,no(_,l)}n.Za=function(){this.C!=null&&(this.C=null,as(this),ls(this),Le(19))};function hs(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function To(l,p){var _=null;if(l.g==p){hs(l),us(l),l.g=null;var T=2}else if(Nt(l.h,p))_=p.D,wr(l.h,p),T=1;else return;if(l.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var D=l.B;T=Kr(),It(T,new Sa(T,_)),zi(l)}else Ln(l);else if(D=p.s,D==3||D==0&&0<p.X||!(T==1&&xu(l,p)||T==2&&ls(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),D){case 1:fi(l,5);break;case 4:fi(l,10);break;case 3:fi(l,6);break;default:fi(l,2)}}}function Eo(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function fi(l,p){if(l.j.info("Error code "+p),p==2){var _=E(l.fb,l),T=l.Xa;const D=!T;T=new mn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||es(T,"https"),_n(T),D?Kt(T.toString(),_):Da(T.toString(),_)}else Le(2);l.G=0,l.l&&l.l.sa(p),Ua(l),Ba(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ua(l){if(l.G=0,l.ka=[],l.l){const p=li(l.h);(p.length!=0||l.i.length!=0)&&(W(l.ka,p),W(l.ka,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.ra()}}function fs(l,p,_){var T=_ instanceof mn?ue(_):new mn(_);if(T.g!="")p&&(T.g=p+"."+T.g),ui(T,T.s);else{var D=h.location;T=D.protocol,p=p?p+"."+D.hostname:D.hostname,D=+D.port;var B=new mn(null);T&&es(B,T),p&&(B.g=p),D&&ui(B,D),_&&(B.l=_),T=B}return _=l.D,p=l.ya,_&&p&&Et(T,_,p),Et(T,"VER",l.la),Tr(l,T),T}function za(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new se(new yn({eb:_})):new se(l.pa),p.Ha(l.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Io(){}n=Io.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Er(){}Er.prototype.g=function(l,p){return new Se(l,p)};function Se(l,p){ft.call(this),this.g=new Fa(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!at(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!at(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new wn(this)}F(Se,ft),Se.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Se.prototype.close=function(){os(this.g)},Se.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=me(l),l=_);p.i.push(new yr(p.Ya++,l)),p.G==3&&zi(p)},Se.prototype.N=function(){this.g.l=null,delete this.j,os(this.g),delete this.g,Se.aa.N.call(this)};function zn(l){Gr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){t:{for(const _ in p){l=_;break t}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}F(zn,Gr);function ja(){Ys.call(this),this.status=1}F(ja,Ys);function wn(l){this.g=l}F(wn,Io),wn.prototype.ua=function(){It(this.g,"a")},wn.prototype.ta=function(l){It(this.g,new zn(l))},wn.prototype.sa=function(l){It(this.g,new ja)},wn.prototype.ra=function(){It(this.g,"b")},Er.prototype.createWebChannel=Er.prototype.g,Se.prototype.send=Se.prototype.o,Se.prototype.open=Se.prototype.m,Se.prototype.close=Se.prototype.close,Z_=function(){return new Er},W_=function(){return Kr()},q_=si,Sc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,Tl=_r,Jr.COMPLETE="complete",$_=Jr,Xs.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Oo=Xs,se.prototype.listenOnce=se.prototype.L,se.prototype.getLastError=se.prototype.Ka,se.prototype.getLastErrorCode=se.prototype.Ba,se.prototype.getStatus=se.prototype.Z,se.prototype.getResponseJson=se.prototype.Oa,se.prototype.getResponseText=se.prototype.oa,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Ha,H_=se}).apply(typeof ol<"u"?ol:typeof self<"u"?self:typeof window<"u"?window:{});const Fd="@firebase/firestore",Bd="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new ph("@firebase/firestore");function Es(){return zr.logLevel}function st(n,...t){if(zr.logLevel<=Vt.DEBUG){const e=t.map(Rh);zr.debug(`Firestore (${Ws}): ${n}`,...e)}}function xi(n,...t){if(zr.logLevel<=Vt.ERROR){const e=t.map(Rh);zr.error(`Firestore (${Ws}): ${n}`,...e)}}function sr(n,...t){if(zr.logLevel<=Vt.WARN){const e=t.map(Rh);zr.warn(`Firestore (${Ws}): ${n}`,...e)}}function Rh(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,G_(n,i,e)}function G_(n,t,e){let i=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw xi(i),new Error(i)}function Zt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||G_(t,s,i)}function At(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Mi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Be.UNAUTHENTICATED))}shutdown(){}}class wb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Tb{constructor(t){this.t=t,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let a=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Dr,t.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=a;t.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Dr)}},0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Zt(typeof i.accessToken=="string",31837,{l:i}),new K_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new Be(t)}}class Eb{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ib{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new Eb(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ud{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bb{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Zt(this.o===void 0,3512);const i=a=>{a.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,st("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>i(a))};const s=a=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ud(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Zt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Ud(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Pb(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<e&&(i+=t.charAt(s[a]%62))}return i}}function xt(n,t){return n<t?-1:n>t?1:0}function Cc(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return xt(i,s);{const a=Q_(),u=Ab(a.encode(zd(n,e)),a.encode(zd(t,e)));return u!==0?u:xt(i,s)}}e+=i>65535?2:1}return xt(n.length,t.length)}function zd(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function Ab(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return xt(n[e],t[e]);return xt(n.length,t.length)}function Fs(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="__name__";class Wn{constructor(t,e,i){e===void 0?e=0:e>t.length&&vt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&vt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Wn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Wn?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const a=Wn.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return xt(t.length,e.length)}static compareSegments(t,e){const i=Wn.isNumericId(t),s=Wn.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Wn.extractNumericId(t).compare(Wn.extractNumericId(e)):Cc(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return nr.fromString(t.substring(4,t.length-2))}}class te extends Wn{construct(t,e,i){return new te(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new lt(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new te(e)}static emptyPath(){return new te([])}}const Sb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oe extends Wn{construct(t,e,i){return new Oe(t,e,i)}static isValidIdentifier(t){return Sb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jd}static keyField(){return new Oe([jd])}static fromServerFormat(t){const e=[];let i="",s=0;const a=()=>{if(i.length===0)throw new lt(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;s<t.length;){const h=t[s];if(h==="\\"){if(s+1===t.length)throw new lt(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new lt(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(i+=h,s++):(a(),s++)}if(a(),u)throw new lt(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Oe(e)}static emptyPath(){return new Oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(te.fromString(t))}static fromName(t){return new dt(te.fromString(t).popFirst(5))}static empty(){return new dt(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&te.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return te.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new te(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n,t,e){if(!e)throw new lt(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Cb(n,t,e,i){if(t===!0&&i===!0)throw new lt(j.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Hd(n){if(!dt.isDocumentKey(n))throw new lt(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $d(n){if(dt.isDocumentKey(n))throw new lt(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _u(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":vt(12329,{type:typeof n})}function Wo(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new lt(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=_u(n);throw new lt(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,t){const e={typeString:n};return t&&(e.value=t),e}function va(n,t){if(!X_(n))throw new lt(j.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const u=n[i];if(s&&typeof u!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){e=`Expected '${i}' field to equal '${a.value}'`;break}}if(e)throw new lt(j.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=-62135596800,Wd=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(t){return ne.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Wd);return new ne(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new lt(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new lt(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<qd)throw new lt(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wd}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(va(t,ne._jsonSchema))return new ne(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-qd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ne._jsonSchemaVersion="firestore/timestamp/1.0",ne._jsonSchema={type:we("string",ne._jsonSchemaVersion),seconds:we("number"),nanoseconds:we("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new ne(0,0))}static max(){return new bt(new ne(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function Rb(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=bt.fromTimestamp(i===1e9?new ne(e+1,0):new ne(e,i));return new or(s,dt.empty(),t)}function xb(n){return new or(n.readTime,n.key,ra)}class or{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new or(bt.min(),dt.empty(),ra)}static max(){return new or(bt.max(),dt.empty(),ra)}}function Lb(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=dt.comparator(n.documentKey,t.documentKey),e!==0?e:xt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==kb)throw n;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new H((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof H?e:H.resolve(e)}catch(e){return H.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):H.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):H.reject(e)}static resolve(t){return new H((e,i)=>{e(t)})}static reject(t){return new H((e,i)=>{i(t)})}static waitFor(t){return new H((e,i)=>{let s=0,a=0,u=!1;t.forEach(h=>{++s,h.next(()=>{++a,u&&a===s&&e()},d=>i(d))}),u=!0,a===s&&e()})}static or(t){let e=H.resolve(!1);for(const i of t)e=e.next(s=>s?H.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,a)=>{i.push(e.call(this,s,a))}),this.waitFor(i)}static mapArray(t,e){return new H((i,s)=>{const a=t.length,u=new Array(a);let h=0;for(let d=0;d<a;d++){const g=d;e(t[g]).next(v=>{u[g]=v,++h,h===a&&i(u)},v=>s(v))}})}static doWhile(t,e){return new H((i,s)=>{const a=()=>{t()===!0?e().next(()=>{a()},s):i()};a()})}}function Mb(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Gs(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}gu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=-1;function vu(n){return n==null}function jl(n){return n===0&&1/n==-1/0}function Db(n){return typeof n=="number"&&Number.isInteger(n)&&!jl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="";function Nb(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Zd(t)),t=Vb(n.get(e),t);return Zd(t)}function Vb(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":e+="";break;case Y_:e+="";break;default:e+=a}}return e}function Zd(n){return n+Y_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function $r(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function tg(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,e){this.comparator=t,this.root=e||ke.EMPTY}insert(t,e){return new le(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(t){return new le(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ke.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new al(this.root,t,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new al(this.root,t,this.comparator,!0)}}class al{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ke{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??ke.RED,this.left=s??ke.EMPTY,this.right=a??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,a){return new ke(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return ke.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1;ke.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,e,i,s,a){return this}insert(t,e,i){return new ke(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.comparator=t,this.data=new le(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Kd(this.data.getIterator())}getIteratorFrom(t){return new Kd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof be)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new be(this.comparator);return e.data=t,e}}class Kd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.fields=t,t.sort(Oe.comparator)}static empty(){return new Mn([])}unionWith(t){let e=new be(Oe.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Mn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Fs(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new eg("Invalid base64 string: "+a):a}}(t);return new De(e)}static fromUint8Array(t){const e=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(t);return new De(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}De.EMPTY_BYTE_STRING=new De("");const Fb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(Zt(!!n,39018),typeof n=="string"){let t=0;const e=Fb.exec(n);if(Zt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fe(n.seconds),nanos:fe(n.nanos)}}function fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lr(n){return typeof n=="string"?De.fromBase64String(n):De.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="server_timestamp",ig="__type__",rg="__previous_value__",sg="__local_write_time__";function kh(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[ig])===null||e===void 0?void 0:e.stringValue)===ng}function yu(n){const t=n.mapValue.fields[rg];return kh(t)?yu(t):t}function sa(n){const t=ar(n.mapValue.fields[sg].timestampValue);return new ne(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,e,i,s,a,u,h,d,g,v){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=g,this.isUsingEmulator=v}}const Hl="(default)";class oa{constructor(t,e){this.projectId=t,this.database=e||Hl}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database===Hl}isEqual(t){return t instanceof oa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="__type__",Ub="__max__",ll={mapValue:{}},ag="__vector__",$l="value";function ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kh(n)?4:jb(n)?9007199254740991:zb(n)?10:11:vt(28295,{value:n})}function ni(n,t){if(n===t)return!0;const e=ur(n);if(e!==ur(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return sa(n).isEqual(sa(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=ar(s.timestampValue),h=ar(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,a){return lr(s.bytesValue).isEqual(lr(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,a){return fe(s.geoPointValue.latitude)===fe(a.geoPointValue.latitude)&&fe(s.geoPointValue.longitude)===fe(a.geoPointValue.longitude)}(n,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fe(s.integerValue)===fe(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=fe(s.doubleValue),h=fe(a.doubleValue);return u===h?jl(u)===jl(h):isNaN(u)&&isNaN(h)}return!1}(n,t);case 9:return Fs(n.arrayValue.values||[],t.arrayValue.values||[],ni);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Gd(u)!==Gd(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!ni(u[d],h[d])))return!1;return!0}(n,t);default:return vt(52216,{left:n})}}function aa(n,t){return(n.values||[]).find(e=>ni(e,t))!==void 0}function Bs(n,t){if(n===t)return 0;const e=ur(n),i=ur(t);if(e!==i)return xt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,t.booleanValue);case 2:return function(a,u){const h=fe(a.integerValue||a.doubleValue),d=fe(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Qd(n.timestampValue,t.timestampValue);case 4:return Qd(sa(n),sa(t));case 5:return Cc(n.stringValue,t.stringValue);case 6:return function(a,u){const h=lr(a),d=lr(u);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(a,u){const h=a.split("/"),d=u.split("/");for(let g=0;g<h.length&&g<d.length;g++){const v=xt(h[g],d[g]);if(v!==0)return v}return xt(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,u){const h=xt(fe(a.latitude),fe(u.latitude));return h!==0?h:xt(fe(a.longitude),fe(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Jd(n.arrayValue,t.arrayValue);case 10:return function(a,u){var h,d,g,v;const w=a.fields||{},E=u.fields||{},x=(h=w[$l])===null||h===void 0?void 0:h.arrayValue,F=(d=E[$l])===null||d===void 0?void 0:d.arrayValue,z=xt(((g=x?.values)===null||g===void 0?void 0:g.length)||0,((v=F?.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:Jd(x,F)}(n.mapValue,t.mapValue);case 11:return function(a,u){if(a===ll.mapValue&&u===ll.mapValue)return 0;if(a===ll.mapValue)return 1;if(u===ll.mapValue)return-1;const h=a.fields||{},d=Object.keys(h),g=u.fields||{},v=Object.keys(g);d.sort(),v.sort();for(let w=0;w<d.length&&w<v.length;++w){const E=Cc(d[w],v[w]);if(E!==0)return E;const x=Bs(h[d[w]],g[v[w]]);if(x!==0)return x}return xt(d.length,v.length)}(n.mapValue,t.mapValue);default:throw vt(23264,{le:e})}}function Qd(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return xt(n,t);const e=ar(n),i=ar(t),s=xt(e.seconds,i.seconds);return s!==0?s:xt(e.nanos,i.nanos)}function Jd(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const a=Bs(e[s],i[s]);if(a)return a}return xt(e.length,i.length)}function Us(n){return Rc(n)}function Rc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ar(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return lr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return dt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const a of e.values||[])s?s=!1:i+=",",i+=Rc(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${Rc(e.fields[u])}`;return s+"}"}(n.mapValue):vt(61005,{value:n})}function El(n){switch(ur(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yu(n);return t?16+El(t):16;case 5:return 2*n.stringValue.length;case 6:return lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+El(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return $r(i.fields,(a,u)=>{s+=a.length+El(u)}),s}(n.mapValue);default:throw vt(13486,{value:n})}}function Xd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function xc(n){return!!n&&"integerValue"in n}function Oh(n){return!!n&&"arrayValue"in n}function Yd(n){return!!n&&"nullValue"in n}function tp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Il(n){return!!n&&"mapValue"in n}function zb(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[og])===null||e===void 0?void 0:e.stringValue)===ag}function Zo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return $r(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Zo(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Zo(n.arrayValue.values[e]);return t}return Object.assign({},n)}function jb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ub}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.value=t}static empty(){return new En({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Il(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zo(e)}setAll(t){let e=Oe.emptyPath(),i={},s=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,s),i={},s=[],e=h.popLast()}u?i[h.lastSegment()]=Zo(u):s.push(h.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,i,s)}delete(t){const e=this.field(t.popLast());Il(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ni(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Il(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){$r(e,(s,a)=>t[s]=a);for(const s of i)delete t[s]}clone(){return new En(Zo(this.value))}}function lg(n){const t=[];return $r(n.fields,(e,i)=>{const s=new Oe([e]);if(Il(i)){const a=lg(i.mapValue).fields;if(a.length===0)t.push(s);else for(const u of a)t.push(s.child(u))}else t.push(s)}),new Mn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t,e,i,s,a,u,h){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(t){return new ze(t,0,bt.min(),bt.min(),bt.min(),En.empty(),0)}static newFoundDocument(t,e,i,s){return new ze(t,1,e,bt.min(),i,s,0)}static newNoDocument(t,e){return new ze(t,2,e,bt.min(),bt.min(),En.empty(),0)}static newUnknownDocument(t,e){return new ze(t,3,e,bt.min(),bt.min(),En.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,e){this.position=t,this.inclusive=e}}function ep(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const a=t[s],u=n.position[s];if(a.field.isKeyField()?i=dt.comparator(dt.fromName(u.referenceValue),e.key):i=Bs(u,e.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function np(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ni(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,e="asc"){this.field=t,this.dir=e}}function Hb(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{}class ye extends ug{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new qb(t,e,i):e==="array-contains"?new Gb(t,i):e==="in"?new Kb(t,i):e==="not-in"?new Qb(t,i):e==="array-contains-any"?new Jb(t,i):new ye(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Wb(t,i):new Zb(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Bs(e,this.value)):e!==null&&ur(this.value)===ur(e)&&this.matchesComparison(Bs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends ug{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Fn(t,e)}matches(t){return cg(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cg(n){return n.op==="and"}function hg(n){return $b(n)&&cg(n)}function $b(n){for(const t of n.filters)if(t instanceof Fn)return!1;return!0}function Lc(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+Us(n.value);if(hg(n))return n.filters.map(t=>Lc(t)).join(",");{const t=n.filters.map(e=>Lc(e)).join(",");return`${n.op}(${t})`}}function fg(n,t){return n instanceof ye?function(i,s){return s instanceof ye&&i.op===s.op&&i.field.isEqual(s.field)&&ni(i.value,s.value)}(n,t):n instanceof Fn?function(i,s){return s instanceof Fn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,u,h)=>a&&fg(u,s.filters[h]),!0):!1}(n,t):void vt(19439)}function dg(n){return n instanceof ye?function(e){return`${e.field.canonicalString()} ${e.op} ${Us(e.value)}`}(n):n instanceof Fn?function(e){return e.op.toString()+" {"+e.getFilters().map(dg).join(" ,")+"}"}(n):"Filter"}class qb extends ye{constructor(t,e,i){super(t,e,i),this.key=dt.fromName(i.referenceValue)}matches(t){const e=dt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Wb extends ye{constructor(t,e){super(t,"in",e),this.keys=pg("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Zb extends ye{constructor(t,e){super(t,"not-in",e),this.keys=pg("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function pg(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>dt.fromName(i.referenceValue))}class Gb extends ye{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Oh(e)&&aa(e.arrayValue,this.value)}}class Kb extends ye{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&aa(this.value.arrayValue,e)}}class Qb extends ye{constructor(t,e){super(t,"not-in",e)}matches(t){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!aa(this.value.arrayValue,e)}}class Jb extends ye{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Oh(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>aa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,e=null,i=[],s=[],a=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.Pe=null}}function ip(n,t=null,e=[],i=[],s=null,a=null,u=null){return new Xb(n,t,e,i,s,a,u)}function Mh(n){const t=At(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Lc(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),vu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Us(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Us(i)).join(",")),t.Pe=e}return t.Pe}function Dh(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Hb(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!fg(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!np(n.startAt,t.startAt)&&np(n.endAt,t.endAt)}function kc(n){return dt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,e=null,i=[],s=[],a=null,u="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Yb(n,t,e,i,s,a,u,h){return new ya(n,t,e,i,s,a,u,h)}function Nh(n){return new ya(n)}function rp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mg(n){return n.collectionGroup!==null}function Go(n){const t=At(n);if(t.Te===null){t.Te=[];const e=new Set;for(const a of t.explicitOrderBy)t.Te.push(a),e.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new be(Oe.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Te.push(new Wl(a,i))}),e.has(Oe.keyField().canonicalString())||t.Te.push(new Wl(Oe.keyField(),i))}return t.Te}function Qn(n){const t=At(n);return t.Ie||(t.Ie=tP(t,Go(n))),t.Ie}function tP(n,t){if(n.limitType==="F")return ip(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Wl(s.field,a)});const e=n.endAt?new ql(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ql(n.startAt.position,n.startAt.inclusive):null;return ip(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Oc(n,t){const e=n.filters.concat([t]);return new ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Mc(n,t,e){return new ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function wu(n,t){return Dh(Qn(n),Qn(t))&&n.limitType===t.limitType}function _g(n){return`${Mh(Qn(n))}|lt:${n.limitType}`}function Is(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>dg(s)).join(", ")}]`),vu(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Us(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Us(s)).join(",")),`Target(${i})`}(Qn(n))}; limitType=${n.limitType})`}function Tu(n,t){return t.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):dt.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,t)&&function(i,s){for(const a of Go(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(u,h,d){const g=ep(u,h,d);return u.inclusive?g<=0:g<0}(i.startAt,Go(i),s)||i.endAt&&!function(u,h,d){const g=ep(u,h,d);return u.inclusive?g>=0:g>0}(i.endAt,Go(i),s))}(n,t)}function eP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gg(n){return(t,e)=>{let i=!1;for(const s of Go(n)){const a=nP(s,t,e);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function nP(n,t,e){const i=n.field.isKeyField()?dt.comparator(t.key,e.key):function(a,u,h){const d=u.data.field(a),g=h.data.field(a);return d!==null&&g!==null?Bs(d,g):vt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return vt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,(e,i)=>{for(const[s,a]of i)t(s,a)})}isEmpty(){return tg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new le(dt.comparator);function Li(){return iP}const vg=new le(dt.comparator);function Mo(...n){let t=vg;for(const e of n)t=t.insert(e.key,e);return t}function yg(n){let t=vg;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Cr(){return Ko()}function wg(){return Ko()}function Ko(){return new qr(n=>n.toString(),(n,t)=>n.isEqual(t))}const rP=new le(dt.comparator),sP=new be(dt.comparator);function Ft(...n){let t=sP;for(const e of n)t=t.add(e);return t}const oP=new be(xt);function aP(){return oP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jl(t)?"-0":t}}function Tg(n){return{integerValue:""+n}}function lP(n,t){return Db(t)?Tg(t):Vh(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this._=void 0}}function uP(n,t,e){return n instanceof Zl?function(s,a){const u={fields:{[ig]:{stringValue:ng},[sg]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&kh(a)&&(a=yu(a)),a&&(u.fields[rg]=a),{mapValue:u}}(e,t):n instanceof la?Ig(n,t):n instanceof ua?bg(n,t):function(s,a){const u=Eg(s,a),h=sp(u)+sp(s.Ee);return xc(u)&&xc(s.Ee)?Tg(h):Vh(s.serializer,h)}(n,t)}function cP(n,t,e){return n instanceof la?Ig(n,t):n instanceof ua?bg(n,t):e}function Eg(n,t){return n instanceof Gl?function(i){return xc(i)||function(a){return!!a&&"doubleValue"in a}(i)}(t)?t:{integerValue:0}:null}class Zl extends Eu{}class la extends Eu{constructor(t){super(),this.elements=t}}function Ig(n,t){const e=Pg(t);for(const i of n.elements)e.some(s=>ni(s,i))||e.push(i);return{arrayValue:{values:e}}}class ua extends Eu{constructor(t){super(),this.elements=t}}function bg(n,t){let e=Pg(t);for(const i of n.elements)e=e.filter(s=>!ni(s,i));return{arrayValue:{values:e}}}class Gl extends Eu{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function sp(n){return fe(n.integerValue||n.doubleValue)}function Pg(n){return Oh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hP(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof la&&s instanceof la||i instanceof ua&&s instanceof ua?Fs(i.elements,s.elements,ni):i instanceof Gl&&s instanceof Gl?ni(i.Ee,s.Ee):i instanceof Zl&&s instanceof Zl}(n.transform,t.transform)}class fP{constructor(t,e){this.version=t,this.transformResults=e}}class bi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bl(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Iu{}function Ag(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Cg(n.key,bi.none()):new wa(n.key,n.data,bi.none());{const e=n.data,i=En.empty();let s=new be(Oe.comparator);for(let a of t.fields)if(!s.has(a)){let u=e.field(a);u===null&&a.length>1&&(a=a.popLast(),u=e.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new Wr(n.key,i,new Mn(s.toArray()),bi.none())}}function dP(n,t,e){n instanceof wa?function(s,a,u){const h=s.value.clone(),d=ap(s.fieldTransforms,a,u.transformResults);h.setAll(d),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Wr?function(s,a,u){if(!bl(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=ap(s.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(Sg(s)),d.setAll(h),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,t,e):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function Qo(n,t,e,i){return n instanceof wa?function(a,u,h,d){if(!bl(a.precondition,u))return h;const g=a.value.clone(),v=lp(a.fieldTransforms,d,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof Wr?function(a,u,h,d){if(!bl(a.precondition,u))return h;const g=lp(a.fieldTransforms,d,u),v=u.data;return v.setAll(Sg(a)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,t,e,i):function(a,u,h){return bl(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,t,e)}function pP(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),a=Eg(i.transform,s||null);a!=null&&(e===null&&(e=En.empty()),e.set(i.field,a))}return e||null}function op(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Fs(i,s,(a,u)=>hP(a,u))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class wa extends Iu{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wr extends Iu{constructor(t,e,i,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Sg(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function ap(n,t,e){const i=new Map;Zt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let s=0;s<e.length;s++){const a=n[s],u=a.transform,h=t.data.field(a.field);i.set(a.field,cP(u,h,e[s]))}return i}function lp(n,t,e){const i=new Map;for(const s of n){const a=s.transform,u=e.data.field(s.field);i.set(s.field,uP(a,u,t))}return i}class Cg extends Iu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mP extends Iu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&dP(a,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Qo(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Qo(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=wg();return this.mutations.forEach(s=>{const a=t.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=e.has(s.key)?null:h;const d=Ag(u,h);d!==null&&i.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ft())}isEqual(t){return this.batchId===t.batchId&&Fs(this.mutations,t.mutations,(e,i)=>op(e,i))&&Fs(this.baseMutations,t.baseMutations,(e,i)=>op(e,i))}}class Fh{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Zt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let s=function(){return rP}();const a=t.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new Fh(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Ht;function yP(n){switch(n){case j.OK:return vt(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return vt(15467,{code:n})}}function Rg(n){if(n===void 0)return xi("GRPC error has no .code"),j.UNKNOWN;switch(n){case ve.OK:return j.OK;case ve.CANCELLED:return j.CANCELLED;case ve.UNKNOWN:return j.UNKNOWN;case ve.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ve.INTERNAL:return j.INTERNAL;case ve.UNAVAILABLE:return j.UNAVAILABLE;case ve.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ve.NOT_FOUND:return j.NOT_FOUND;case ve.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ve.ABORTED:return j.ABORTED;case ve.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ve.DATA_LOSS:return j.DATA_LOSS;default:return vt(39323,{code:n})}}(Ht=ve||(ve={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new nr([4294967295,4294967295],0);function up(n){const t=Q_().encode(n),e=new j_;return e.update(t),new Uint8Array(e.digest())}function cp(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new nr([e,i],0),new nr([s,a],0)]}class Bh{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Do(`Invalid padding: ${e}`);if(i<0)throw new Do(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Do(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Do(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=nr.fromNumber(this.fe)}pe(t,e,i){let s=t.add(e.multiply(nr.fromNumber(i)));return s.compare(wP)===1&&(s=new nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=up(t),[i,s]=cp(e);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,s,a);if(!this.ye(u))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),u=new Bh(a,s,e);return i.forEach(h=>u.insert(h)),u}insert(t){if(this.fe===0)return;const e=up(t),[i,s]=cp(e);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,s,a);this.we(u)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Do extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,e,i,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,Ta.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new bu(bt.min(),s,new le(xt),Li(),Ft())}}class Ta{constructor(t,e,i,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Ta(i,e,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=s}}class xg{constructor(t,e){this.targetId=t,this.De=e}}class Lg{constructor(t,e,i=De.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class hp{constructor(){this.ve=0,this.Ce=fp(),this.Fe=De.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Ft(),e=Ft(),i=Ft();return this.Ce.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:vt(38017,{changeType:a})}}),new Ta(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=fp()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class TP{constructor(t){this.We=t,this.Ge=new Map,this.ze=Li(),this.je=ul(),this.Je=ul(),this.He=new le(xt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:vt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,s)=>{this.nt(s)&&e(s)})}it(t){const e=t.targetId,i=t.De.count,s=this.st(e);if(s){const a=s.target;if(kc(a))if(i===0){const u=new dt(a.path);this.Xe(e,u,ze.newNoDocument(u,bt.min()))}else Zt(i===1,20013,{expectedCount:i});else{const u=this.ot(e);if(u!==i){const h=this._t(t),d=h?this.ut(h,t,u):1;if(d!==0){this.rt(e);const g=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,g)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=e;let u,h;try{u=lr(i).toUint8Array()}catch(d){if(d instanceof eg)return sr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Bh(u,s,a)}catch(d){return sr(d instanceof Do?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let s=0;return i.forEach(a=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.Xe(e,a,null),s++)}),s}Pt(t){const e=new Map;this.Ge.forEach((a,u)=>{const h=this.st(u);if(h){if(a.current&&kc(h.target)){const d=new dt(h.target.path);this.Tt(d).has(u)||this.It(u,d)||this.Xe(u,d,ze.newNoDocument(d,t))}a.Ne&&(e.set(u,a.Le()),a.ke())}});let i=Ft();this.Je.forEach((a,u)=>{let h=!0;u.forEachWhile(d=>{const g=this.st(d);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ze.forEach((a,u)=>u.setReadTime(t));const s=new bu(t,e,this.He,this.ze,i);return this.ze=Li(),this.je=ul(),this.Je=ul(),this.He=new le(xt),s}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const s=this.tt(t);this.It(t,e)?s.qe(e,1):s.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new hp,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new be(xt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new be(xt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||st("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new hp),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function ul(){return new le(dt.comparator)}function fp(){return new le(dt.comparator)}const EP={asc:"ASCENDING",desc:"DESCENDING"},IP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bP={and:"AND",or:"OR"};class PP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Dc(n,t){return n.useProto3Json||vu(t)?t:{value:t}}function Kl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kg(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function AP(n,t){return Kl(n,t.toTimestamp())}function Jn(n){return Zt(!!n,49232),bt.fromTimestamp(function(e){const i=ar(e);return new ne(i.seconds,i.nanos)}(n))}function Uh(n,t){return Nc(n,t).canonicalString()}function Nc(n,t){const e=function(s){return new te(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Og(n){const t=te.fromString(n);return Zt(Fg(t),10190,{key:t.toString()}),t}function Vc(n,t){return Uh(n.databaseId,t.path)}function ec(n,t){const e=Og(t);if(e.get(1)!==n.databaseId.projectId)throw new lt(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new lt(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new dt(Dg(e))}function Mg(n,t){return Uh(n.databaseId,t)}function SP(n){const t=Og(n);return t.length===4?te.emptyPath():Dg(t)}function Fc(n){return new te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dg(n){return Zt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dp(n,t,e){return{name:Vc(n,t),fields:e.value.mapValue.fields}}function CP(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:vt(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(Zt(v===void 0||typeof v=="string",58123),De.fromBase64String(v||"")):(Zt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),De.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(g){const v=g.code===void 0?j.UNKNOWN:Rg(g.code);return new lt(v,g.message||"")}(u);e=new Lg(i,s,a,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=ec(n,i.document.name),a=Jn(i.document.updateTime),u=i.document.createTime?Jn(i.document.createTime):bt.min(),h=new En({mapValue:{fields:i.document.fields}}),d=ze.newFoundDocument(s,a,u,h),g=i.targetIds||[],v=i.removedTargetIds||[];e=new Pl(g,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=ec(n,i.document),a=i.readTime?Jn(i.readTime):bt.min(),u=ze.newNoDocument(s,a),h=i.removedTargetIds||[];e=new Pl([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=ec(n,i.document),a=i.removedTargetIds||[];e=new Pl([],a,s,null)}else{if(!("filter"in t))return vt(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new vP(s,a),h=i.targetId;e=new xg(h,u)}}return e}function RP(n,t){let e;if(t instanceof wa)e={update:dp(n,t.key,t.value)};else if(t instanceof Cg)e={delete:Vc(n,t.key)};else if(t instanceof Wr)e={update:dp(n,t.key,t.data),updateMask:FP(t.fieldMask)};else{if(!(t instanceof mP))return vt(16599,{Rt:t.type});e={verify:Vc(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(a,u){const h=u.transform;if(h instanceof Zl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof la)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ua)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gl)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw vt(20930,{transform:u.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:AP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:vt(27497)}(n,t.precondition)),e}function xP(n,t){return n&&n.length>0?(Zt(t!==void 0,14353),n.map(e=>function(s,a){let u=s.updateTime?Jn(s.updateTime):Jn(a);return u.isEqual(bt.min())&&(u=Jn(a)),new fP(u,s.transformResults||[])}(e,t))):[]}function LP(n,t){return{documents:[Mg(n,t.path)]}}function kP(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Mg(n,s);const a=function(g){if(g.length!==0)return Vg(Fn.create(g,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const u=function(g){if(g.length!==0)return g.map(v=>function(E){return{field:bs(E.field),direction:DP(E.dir)}}(v))}(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=Dc(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{Vt:e,parent:s}}function OP(n){let t=SP(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Zt(i===1,65062);const v=e.from[0];v.allDescendants?s=v.collectionId:t=t.child(v.collectionId)}let a=[];e.where&&(a=function(w){const E=Ng(w);return E instanceof Fn&&hg(E)?E.getFilters():[E]}(e.where));let u=[];e.orderBy&&(u=function(w){return w.map(E=>function(F){return new Wl(Ps(F.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(e.orderBy));let h=null;e.limit&&(h=function(w){let E;return E=typeof w=="object"?w.value:w,vu(E)?null:E}(e.limit));let d=null;e.startAt&&(d=function(w){const E=!!w.before,x=w.values||[];return new ql(x,E)}(e.startAt));let g=null;return e.endAt&&(g=function(w){const E=!w.before,x=w.values||[];return new ql(x,E)}(e.endAt)),Yb(t,s,u,a,h,"F",d,g)}function MP(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ng(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ps(e.unaryFilter.field);return ye.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(e.unaryFilter.field);return ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ps(e.unaryFilter.field);return ye.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ps(e.unaryFilter.field);return ye.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}}(n):n.fieldFilter!==void 0?function(e){return ye.create(Ps(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Fn.create(e.compositeFilter.filters.map(i=>Ng(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt(1026)}}(e.compositeFilter.op))}(n):vt(30097,{filter:n})}function DP(n){return EP[n]}function NP(n){return IP[n]}function VP(n){return bP[n]}function bs(n){return{fieldPath:n.canonicalString()}}function Ps(n){return Oe.fromServerFormat(n.fieldPath)}function Vg(n){return n instanceof ye?function(e){if(e.op==="=="){if(tp(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NAN"}};if(Yd(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(tp(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NOT_NAN"}};if(Yd(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(e.field),op:NP(e.op),value:e.value}}}(n):n instanceof Fn?function(e){const i=e.getFilters().map(s=>Vg(s));return i.length===1?i[0]:{compositeFilter:{op:VP(e.op),filters:i}}}(n):vt(54877,{filter:n})}function FP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Fg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,e,i,s,a=bt.min(),u=bt.min(),h=De.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new Ji(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(t){this.gt=t}}function UP(n){const t=OP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.Dn=new jP}addToCollectionParentIndex(t,e){return this.Dn.add(e),H.resolve()}getCollectionParents(t,e){return H.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return H.resolve()}deleteFieldIndex(t,e){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,e){return H.resolve()}getDocumentsMatchingTarget(t,e){return H.resolve(null)}getIndexType(t,e){return H.resolve(0)}getFieldIndexes(t,e){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,e){return H.resolve(or.min())}getMinOffsetFromCollectionGroup(t,e){return H.resolve(or.min())}updateCollectionGroup(t,e,i){return H.resolve()}updateIndexEntries(t,e){return H.resolve()}}class jP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new be(te.comparator),a=!s.has(i);return this.index[e]=s.add(i),a}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new be(te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bg=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(Bg,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new zs(0)}static ur(){return new zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LruGarbageCollector",HP=1048576;function _p([n,t],[e,i]){const s=xt(n,e);return s===0?xt(t,i):s}class $P{constructor(t){this.Tr=t,this.buffer=new be(_p),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();_p(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qP{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){st(mp,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Gs(e)?st(mp,"Ignoring IndexedDB error during garbage collection: ",e):await Zs(e)}await this.Rr(3e5)})}}class WP{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return H.resolve(gu.ue);const i=new $P(e);return this.Vr.forEachTarget(t,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(t,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(pp)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pp):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,s,a,u,h,d,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(t,s))).next(w=>(i=w,h=Date.now(),this.removeTargets(t,i,e))).next(w=>(a=w,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(w=>(g=Date.now(),Es()<=Vt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(g-d)+`ms
Total Duration: ${g-v}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w})))}}function ZP(n,t){return new WP(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.changes=new qr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ze.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?H.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&Qo(i.mutation,s,Mn.empty(),ne.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Ft()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Ft()){const s=Cr();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(a=>{let u=Mo();return a.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const i=Cr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Ft()))}populateOverlays(t,e,i){const s=[];return i.forEach(a=>{e.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((u,h)=>{e.set(u,h)})})}computeViews(t,e,i,s){let a=Li();const u=Ko(),h=function(){return Ko()}();return e.forEach((d,g)=>{const v=i.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Wr)?a=a.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),Qo(v.mutation,g,v.mutation.getFieldMask(),ne.now())):u.set(g.key,Mn.empty())}),this.recalculateAndSaveOverlays(t,a).next(d=>(d.forEach((g,v)=>u.set(g,v)),e.forEach((g,v)=>{var w;return h.set(g,new KP(v,(w=u.get(g))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Ko();let s=new le((u,h)=>u-h),a=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const h of u)h.keys().forEach(d=>{const g=e.get(d);if(g===null)return;let v=i.get(d)||Mn.empty();v=h.applyToLocalView(g,v),i.set(d,v);const w=(s.get(h.batchId)||Ft()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),g=d.key,v=d.value,w=wg();v.forEach(E=>{if(!a.has(E)){const x=Ag(e.get(E),i.get(E));x!==null&&w.set(E,x),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(t,g,w))}return H.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(u){return dt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):mg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-a.size):H.resolve(Cr());let h=ra,d=a;return u.next(g=>H.forEach(g,(v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(v)?H.resolve():this.remoteDocumentCache.getEntry(t,v).next(E=>{d=d.insert(v,E)}))).next(()=>this.populateOverlays(t,g,a)).next(()=>this.computeViews(t,d,g,Ft())).next(v=>({batchId:h,changes:yg(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new dt(e)).next(i=>{let s=Mo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const a=e.collectionGroup;let u=Mo();return this.indexManager.getCollectionParents(t,a).next(h=>H.forEach(h,d=>{const g=function(w,E){return new ya(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(e,d.child(a));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next(v=>{v.forEach((w,E)=>{u=u.insert(w,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(t,e,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,a,s))).next(u=>{a.forEach((d,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,ze.newInvalidDocument(v)))});let h=Mo();return u.forEach((d,g)=>{const v=a.get(d);v!==void 0&&Qo(v.mutation,g,Mn.empty(),ne.now()),Tu(e,g)&&(h=h.insert(d,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return H.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(e)),H.resolve()}getNamedQuery(t,e){return H.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(s){return{name:s.name,query:UP(s.bundledQuery),readTime:Jn(s.readTime)}}(e)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.overlays=new le(dt.comparator),this.kr=new Map}getOverlay(t,e){return H.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Cr();return H.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,a)=>{this.wt(t,e,a)}),H.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(i)),H.resolve()}getOverlaysForCollection(t,e,i){const s=Cr(),a=e.length+1,u=new dt(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,g=d.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return H.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let a=new le((g,v)=>g-v);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let v=a.get(g.largestBatchId);v===null&&(v=Cr(),a=a.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=Cr(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,v)=>h.set(g,v)),!(h.size()>=s)););return H.resolve(h)}wt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new gP(e,i));let a=this.kr.get(e);a===void 0&&(a=Ft(),this.kr.set(e,a)),this.kr.set(e,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.sessionToken=De.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this.qr=new be(Re.Qr),this.$r=new be(Re.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new Re(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new Re(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new dt(new te([])),i=new Re(e,t),s=new Re(e,t+1),a=[];return this.$r.forEachInRange([i,s],u=>{this.Wr(u),a.push(u.key)}),a}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new dt(new te([])),i=new Re(e,t),s=new Re(e,t+1);let a=Ft();return this.$r.forEachInRange([i,s],u=>{a=a.add(u.key)}),a}containsKey(t){const e=new Re(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Re{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return dt.comparator(t.key,e.key)||xt(t.Hr,e.Hr)}static Ur(t,e){return xt(t.Hr,e.Hr)||dt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new be(Re.Qr)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new _P(a,e,i,s);this.mutationQueue.push(u);for(const h of s)this.Yr=this.Yr.add(new Re(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return H.resolve(u)}lookupMutationBatch(t,e){return H.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),a=s<0?0:s;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Lh:this.er-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Re(e,0),s=new Re(e,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],u=>{const h=this.Zr(u.Hr);a.push(h)}),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new be(xt);return e.forEach(s=>{const a=new Re(s,0),u=new Re(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],h=>{i=i.add(h.Hr)})}),H.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let a=i;dt.isDocumentKey(a)||(a=a.child(""));const u=new Re(new dt(a),0);let h=new be(xt);return this.Yr.forEachWhile(d=>{const g=d.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(h=h.add(d.Hr)),!0)},u),H.resolve(this.ei(h))}ei(t){const e=[];return t.forEach(i=>{const s=this.Zr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){Zt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return H.forEach(e.mutations,s=>{const a=new Re(s.key,e.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new Re(e,0),s=this.Yr.firstAfterOrEqual(i);return H.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t){this.ni=t,this.docs=function(){return new le(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),a=s?s.size:0,u=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return H.resolve(i?i.document.mutableCopy():ze.newInvalidDocument(e))}getEntries(t,e){let i=Li();return e.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():ze.newInvalidDocument(s))}),H.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let a=Li();const u=e.path,h=new dt(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:g,value:{document:v}}=d.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||Lb(xb(v),i)<=0||(s.has(v.key)||Tu(e,v))&&(a=a.insert(v.key,v.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(t,e,i,s){vt(9500)}ri(t,e){return H.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new nA(this)}getSize(t){return H.resolve(this.size)}}class nA extends GP{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Or.addEntry(t,s)):this.Or.removeEntry(i)}),H.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t){this.persistence=t,this.ii=new qr(e=>Mh(e),Dh),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.si=0,this.oi=new zh,this.targetCount=0,this._i=zs.ar()}forEachTarget(t,e){return this.ii.forEach((i,s)=>e(s)),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),H.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new zs(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,H.resolve()}updateTargetData(t,e){return this.hr(e),H.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,e,i){let s=0;const a=[];return this.ii.forEach((u,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),s++)}),H.waitFor(a).next(()=>s)}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return H.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),H.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach(u=>{a.push(s.markPotentiallyOrphaned(t,u))}),H.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),H.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return H.resolve(i)}containsKey(t,e){return H.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,e){this.ai={},this.overlays={},this.ui=new gu(0),this.ci=!1,this.ci=!0,this.li=new YP,this.referenceDelegate=t(this),this.hi=new iA(this),this.indexManager=new zP,this.remoteDocumentCache=function(s){return new eA(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new BP(e),this.Ti=new JP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new XP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new tA(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){st("MemoryPersistence","Starting transaction:",t);const s=new rA(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(t,e){return H.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class rA extends Ob{constructor(t){super(),this.currentSequenceNumber=t}}class jh{constructor(t){this.persistence=t,this.Ai=new zh,this.Ri=null}static Vi(t){return new jh(t)}get mi(){if(this.Ri)return this.Ri;throw vt(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),H.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),H.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.mi,i=>{const s=dt.fromPath(i);return this.fi(t,s).next(a=>{a||e.removeEntry(s,bt.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return H.or([()=>H.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Ql{constructor(t,e){this.persistence=t,this.gi=new qr(i=>Nb(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=ZP(this,e)}static Vi(t,e){return new Ql(t,e)}Ii(){}di(t){return H.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return H.forEach(this.gi,(i,s)=>this.Sr(t,i,s).next(a=>a?H.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(t,u=>this.Sr(t,u,e).next(h=>{h||(i++,a.removeEntry(u,bt.min()))})).next(()=>a.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),H.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),H.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),H.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=El(t.data.value)),e}Sr(t,e,i){return H.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.gi.get(e);return H.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=s}static Es(t,e){let i=Ft(),s=Ft();for(const a of e.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Hh(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return HT()?8:Mb($e())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,s){const a={result:null};return this.ps(t,e).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ys(t,e,s,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new sA;return this.ws(t,e,u).next(h=>{if(a.result=h,this.Rs)return this.Ss(t,e,u,h.size)})}).next(()=>a.result)}Ss(t,e,i,s){return i.documentReadCount<this.Vs?(Es()<=Vt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Is(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Es()<=Vt.DEBUG&&st("QueryEngine","Query:",Is(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Es()<=Vt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Is(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Qn(e))):H.resolve())}ps(t,e){if(rp(e))return H.resolve(null);let i=Qn(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Mc(e,null,"F"),i=Qn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(a=>{const u=Ft(...a);return this.gs.getDocuments(t,u).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const g=this.bs(e,h);return this.Ds(e,g,u,d.readTime)?this.ps(t,Mc(e,null,"F")):this.vs(t,g,e,d)}))})))}ys(t,e,i,s){return rp(e)||s.isEqual(bt.min())?H.resolve(null):this.gs.getDocuments(t,i).next(a=>{const u=this.bs(e,a);return this.Ds(e,u,i,s)?H.resolve(null):(Es()<=Vt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(e)),this.vs(t,u,e,Rb(s,ra)).next(h=>h))})}bs(t,e){let i=new be(gg(t));return e.forEach((s,a)=>{Tu(t,a)&&(i=i.add(a))}),i}Ds(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(t,e,i){return Es()<=Vt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Is(e)),this.gs.getDocumentsMatchingQuery(t,e,or.min(),i)}vs(t,e,i,s){return this.gs.getDocumentsMatchingQuery(t,i,s).next(a=>(e.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="LocalStore",aA=3e8;class lA{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.Fs=new le(xt),this.Ms=new qr(a=>Mh(a),Dh),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new QP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function uA(n,t,e,i){return new lA(n,t,e,i)}async function zg(n,t){const e=At(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],h=[];let d=Ft();for(const g of s){u.push(g.batchId);for(const v of g.mutations)d=d.add(v.key)}for(const g of a){h.push(g.batchId);for(const v of g.mutations)d=d.add(v.key)}return e.localDocuments.getDocuments(i,d).next(g=>({Bs:g,removedBatchIds:u,addedBatchIds:h}))})})}function cA(n,t){const e=At(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),a=e.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,g,v){const w=g.batch,E=w.keys();let x=H.resolve();return E.forEach(F=>{x=x.next(()=>v.getEntry(d,F)).next(z=>{const W=g.docVersions.get(F);Zt(W!==null,48541),z.version.compareTo(W)<0&&(w.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),v.addEntry(z)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(e,i,t,a).next(()=>a.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ft();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(d=d.add(h.batch.mutations[g].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function jg(n){const t=At(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function hA(n,t){const e=At(n),i=t.snapshotVersion;let s=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=e.Os.newChangeBuffer({trackRemovals:!0});s=e.Fs;const h=[];t.targetChanges.forEach((v,w)=>{const E=s.get(w);if(!E)return;h.push(e.hi.removeMatchingKeys(a,v.removedDocuments,w).next(()=>e.hi.addMatchingKeys(a,v.addedDocuments,w)));let x=E.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(w)!==null?x=x.withResumeToken(De.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,i)),s=s.insert(w,x),function(z,W,ot){return z.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=aA?!0:ot.addedDocuments.size+ot.modifiedDocuments.size+ot.removedDocuments.size>0}(E,x,v)&&h.push(e.hi.updateTargetData(a,x))});let d=Li(),g=Ft();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(fA(a,u,t.documentUpdates).next(v=>{d=v.Ls,g=v.ks})),!i.isEqual(bt.min())){const v=e.hi.getLastRemoteSnapshotVersion(a).next(w=>e.hi.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return H.waitFor(h).next(()=>u.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,d,g)).next(()=>d)}).then(a=>(e.Fs=s,a))}function fA(n,t,e){let i=Ft(),s=Ft();return e.forEach(a=>i=i.add(a)),t.getEntries(n,i).next(a=>{let u=Li();return e.forEach((h,d)=>{const g=a.get(h);d.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(bt.min())?(t.removeEntry(h,d.readTime),u=u.insert(h,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||d.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(d),u=u.insert(h,d)):st($h,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",d.version)}),{Ls:u,ks:s}})}function dA(n,t){const e=At(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Lh),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function pA(n,t){const e=At(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.hi.getTargetData(i,t).next(a=>a?(s=a,H.resolve(s)):e.hi.allocateTargetId(i).next(u=>(s=new Ji(t,u,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function Bc(n,t,e){const i=At(n),s=i.Fs.get(t),a=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Gs(u))throw u;st($h,`Failed to update sequence numbers for target ${t}: ${u}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(s.target)}function gp(n,t,e){const i=At(n);let s=bt.min(),a=Ft();return i.persistence.runTransaction("Execute query","readwrite",u=>function(d,g,v){const w=At(d),E=w.Ms.get(v);return E!==void 0?H.resolve(w.Fs.get(E)):w.hi.getTargetData(g,v)}(i,u,Qn(t)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,h.targetId).next(d=>{a=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(u,t,e?s:bt.min(),e?a:Ft())).next(h=>(mA(i,eP(t),h),{documents:h,qs:a})))}function mA(n,t,e){let i=n.xs.get(t)||bt.min();e.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.xs.set(t,i)}class vp{constructor(){this.activeTargetIds=aP()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _A{constructor(){this.Fo=new vp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new vp,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="ConnectivityMonitor";class wp{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){st(yp,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){st(yp,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl=null;function Uc(){return cl===null?cl=function(){return 268435456+Math.round(2147483648*Math.random())}():cl++,"0x"+cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="RestConnection",vA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yA{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Hl?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,a){const u=Uc(),h=this.Go(t,e.toUriEncodedString());st(nc,`Sending RPC '${t}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:g}=new URL(h),v=Hs(g);return this.jo(t,h,d,i,v).then(w=>(st(nc,`Received RPC '${t}' ${u}: `,w),w),w=>{throw sr(nc,`RPC '${t}' ${u} failed with error: `,w,"url: ",h,"request:",i),w})}Jo(t,e,i,s,a,u){return this.Wo(t,e,i,s,a)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}Go(t,e){const i=vA[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne="WebChannelConnection";class TA extends yA{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,s,a){const u=Uc();return new Promise((h,d)=>{const g=new H_;g.setWithCredentials(!0),g.listenOnce($_.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Tl.NO_ERROR:const w=g.getResponseJson();st(Ne,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(w)),h(w);break;case Tl.TIMEOUT:st(Ne,`RPC '${t}' ${u} timed out`),d(new lt(j.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const E=g.getStatus();if(st(Ne,`RPC '${t}' ${u} failed with status:`,E,"response text:",g.getResponseText()),E>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const F=x?.error;if(F&&F.status&&F.message){const z=function(ot){const at=ot.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(at)>=0?at:j.UNKNOWN}(F.status);d(new lt(z,F.message))}else d(new lt(j.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new lt(j.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{c_:t,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{st(Ne,`RPC '${t}' ${u} completed.`)}});const v=JSON.stringify(s);st(Ne,`RPC '${t}' ${u} sending request:`,s),g.send(e,"POST",v,i,15)})}P_(t,e,i){const s=Uc(),a=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=Z_(),h=W_(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const v=a.join("");st(Ne,`Creating RPC '${t}' stream ${s}: ${v}`,d);const w=u.createWebChannel(v,d);this.T_(w);let E=!1,x=!1;const F=new wA({Ho:W=>{x?st(Ne,`Not sending because RPC '${t}' stream ${s} is closed:`,W):(E||(st(Ne,`Opening RPC '${t}' stream ${s} transport.`),w.open(),E=!0),st(Ne,`RPC '${t}' stream ${s} sending:`,W),w.send(W))},Yo:()=>w.close()}),z=(W,ot,at)=>{W.listen(ot,it=>{try{at(it)}catch(et){setTimeout(()=>{throw et},0)}})};return z(w,Oo.EventType.OPEN,()=>{x||(st(Ne,`RPC '${t}' stream ${s} transport opened.`),F.s_())}),z(w,Oo.EventType.CLOSE,()=>{x||(x=!0,st(Ne,`RPC '${t}' stream ${s} transport closed`),F.__(),this.I_(w))}),z(w,Oo.EventType.ERROR,W=>{x||(x=!0,sr(Ne,`RPC '${t}' stream ${s} transport errored. Name:`,W.name,"Message:",W.message),F.__(new lt(j.UNAVAILABLE,"The operation could not be completed")))}),z(w,Oo.EventType.MESSAGE,W=>{var ot;if(!x){const at=W.data[0];Zt(!!at,16349);const it=at,et=it?.error||((ot=it[0])===null||ot===void 0?void 0:ot.error);if(et){st(Ne,`RPC '${t}' stream ${s} received error:`,et);const yt=et.status;let Bt=function(b){const C=ve[b];if(C!==void 0)return Rg(C)}(yt),O=et.message;Bt===void 0&&(Bt=j.INTERNAL,O="Unknown error status: "+yt+" with message "+et.message),x=!0,F.__(new lt(Bt,O)),w.close()}else st(Ne,`RPC '${t}' stream ${s} received:`,at),F.a_(at)}}),z(h,q_.STAT_EVENT,W=>{W.stat===Sc.PROXY?st(Ne,`RPC '${t}' stream ${s} detected buffering proxy`):W.stat===Sc.NOPROXY&&st(Ne,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.o_()},0),F}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function ic(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){return new PP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,e,i=1e3,s=1.5,a=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,e-i);s>0&&st("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="PersistentStream";class $g{constructor(t,e,i,s,a,u,h,d){this.Fi=t,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Hg(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===j.RESOURCE_EXHAUSTED?(xi(e.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===e&&this.W_(i,s)},i=>{t(()=>{const s=new lt(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return st(Tp,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(st(Tp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EA extends $g{constructor(t,e,i,s,a,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,u),this.serializer=a}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=CP(this.serializer,t),i=function(a){if(!("targetChange"in a))return bt.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Jn(u.readTime):bt.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=Fc(this.serializer),e.addTarget=function(a,u){let h;const d=u.target;if(h=kc(d)?{documents:LP(a,d)}:{query:kP(a,d).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=kg(a,u.resumeToken);const g=Dc(a,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(bt.min())>0){h.readTime=Kl(a,u.snapshotVersion.toTimestamp());const g=Dc(a,u.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const i=MP(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=Fc(this.serializer),e.removeTarget=t,this.k_(e)}}class IA extends $g{constructor(t,e,i,s,a,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=xP(t.writeResults,t.commitTime),i=Jn(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=Fc(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>RP(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{}class PA extends bA{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new lt(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(t,Nc(e,i),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(j.UNKNOWN,a.toString())})}Jo(t,e,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Jo(t,Nc(e,i),s,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new lt(j.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class AA{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(e),this._a=!1):st("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="RemoteStore";class SA{constructor(t,e,i,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(u=>{i.enqueueAndForget(async()=>{Zr(this)&&(st(jr,"Restarting streams for network reachability change."),await async function(d){const g=At(d);g.Ia.add(4),await Ea(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Au(g)}(this))})}),this.Aa=new AA(i,s)}}async function Au(n){if(Zr(n))for(const t of n.da)await t(!0)}async function Ea(n){for(const t of n.da)await t(!1)}function qg(n,t){const e=At(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Gh(e)?Zh(e):Ks(e).x_()&&Wh(e,t))}function qh(n,t){const e=At(n),i=Ks(e);e.Ta.delete(t),i.x_()&&Wg(e,t),e.Ta.size===0&&(i.x_()?i.B_():Zr(e)&&e.Aa.set("Unknown"))}function Wh(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ks(n).H_(t)}function Wg(n,t){n.Ra.$e(t),Ks(n).Y_(t)}function Zh(n){n.Ra=new TP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Ks(n).start(),n.Aa.aa()}function Gh(n){return Zr(n)&&!Ks(n).M_()&&n.Ta.size>0}function Zr(n){return At(n).Ia.size===0}function Zg(n){n.Ra=void 0}async function CA(n){n.Aa.set("Online")}async function RA(n){n.Ta.forEach((t,e)=>{Wh(n,t)})}async function xA(n,t){Zg(n),Gh(n)?(n.Aa.la(t),Zh(n)):n.Aa.set("Unknown")}async function LA(n,t,e){if(n.Aa.set("Online"),t instanceof Lg&&t.state===2&&t.cause)try{await async function(s,a){const u=a.cause;for(const h of a.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ta.delete(h),s.Ra.removeTarget(h))}(n,t)}catch(i){st(jr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Jl(n,i)}else if(t instanceof Pl?n.Ra.Ye(t):t instanceof xg?n.Ra.it(t):n.Ra.et(t),!e.isEqual(bt.min()))try{const i=await jg(n.localStore);e.compareTo(i)>=0&&await function(a,u){const h=a.Ra.Pt(u);return h.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const v=a.Ta.get(g);v&&a.Ta.set(g,v.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,g)=>{const v=a.Ta.get(d);if(!v)return;a.Ta.set(d,v.withResumeToken(De.EMPTY_BYTE_STRING,v.snapshotVersion)),Wg(a,d);const w=new Ji(v.target,d,g,v.sequenceNumber);Wh(a,w)}),a.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){st(jr,"Failed to raise snapshot:",i),await Jl(n,i)}}async function Jl(n,t,e){if(!Gs(t))throw t;n.Ia.add(1),await Ea(n),n.Aa.set("Offline"),e||(e=()=>jg(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{st(jr,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Au(n)})}function Gg(n,t){return t().catch(e=>Jl(n,e,t))}async function Su(n){const t=At(n),e=cr(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Lh;for(;kA(t);)try{const s=await dA(t.localStore,i);if(s===null){t.Pa.length===0&&e.B_();break}i=s.batchId,OA(t,s)}catch(s){await Jl(t,s)}Kg(t)&&Qg(t)}function kA(n){return Zr(n)&&n.Pa.length<10}function OA(n,t){n.Pa.push(t);const e=cr(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function Kg(n){return Zr(n)&&!cr(n).M_()&&n.Pa.length>0}function Qg(n){cr(n).start()}async function MA(n){cr(n).na()}async function DA(n){const t=cr(n);for(const e of n.Pa)t.X_(e.mutations)}async function NA(n,t,e){const i=n.Pa.shift(),s=Fh.from(i,t,e);await Gg(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Su(n)}async function VA(n,t){t&&cr(n).Z_&&await async function(i,s){if(function(u){return yP(u)&&u!==j.ABORTED}(s.code)){const a=i.Pa.shift();cr(i).N_(),await Gg(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Su(i)}}(n,t),Kg(n)&&Qg(n)}async function Ep(n,t){const e=At(n);e.asyncQueue.verifyOperationInProgress(),st(jr,"RemoteStore received new credentials");const i=Zr(e);e.Ia.add(3),await Ea(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Au(e)}async function FA(n,t){const e=At(n);t?(e.Ia.delete(2),await Au(e)):t||(e.Ia.add(2),await Ea(e),e.Aa.set("Unknown"))}function Ks(n){return n.Va||(n.Va=function(e,i,s){const a=At(e);return a.ia(),new EA(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:CA.bind(null,n),e_:RA.bind(null,n),n_:xA.bind(null,n),J_:LA.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Gh(n)?Zh(n):n.Aa.set("Unknown")):(await n.Va.stop(),Zg(n))})),n.Va}function cr(n){return n.ma||(n.ma=function(e,i,s){const a=At(e);return a.ia(),new IA(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:MA.bind(null,n),n_:VA.bind(null,n),ea:DA.bind(null,n),ta:NA.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await Su(n)):(await n.ma.stop(),n.Pa.length>0&&(st(jr,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t,e,i,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,a){const u=Date.now()+i,h=new Kh(t,e,u,s,a);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qh(n,t){if(xi("AsyncQueue",`${t}: ${n}`),Gs(n))return new lt(j.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(t){return new Os(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||dt.comparator(e.key,i.key):(e,i)=>dt.comparator(e.key,i.key),this.keyedMap=Mo(),this.sortedSet=new le(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Os)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Os;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.fa=new le(dt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):vt(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class js{constructor(t,e,i,s,a,u,h,d,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,a){const u=[];return e.forEach(h=>{u.push({type:0,doc:h})}),new js(t,e,Os.emptySet(e),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class UA{constructor(){this.queries=bp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const s=At(e),a=s.queries;s.queries=bp(),a.forEach((u,h)=>{for(const d of h.wa)d.onError(i)})})(this,new lt(j.ABORTED,"Firestore shutting down"))}}function bp(){return new qr(n=>_g(n),wu)}async function zA(n,t){const e=At(n);let i=3;const s=t.query;let a=e.queries.get(s);a?!a.Sa()&&t.ba()&&(i=2):(a=new BA,i=t.ba()?0:1);try{switch(i){case 0:a.ya=await e.onListen(s,!0);break;case 1:a.ya=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(u){const h=Qh(u,`Initialization of query '${Is(t.query)}' failed`);return void t.onError(h)}e.queries.set(s,a),a.wa.push(t),t.va(e.onlineState),a.ya&&t.Ca(a.ya)&&Jh(e)}async function jA(n,t){const e=At(n),i=t.query;let s=3;const a=e.queries.get(i);if(a){const u=a.wa.indexOf(t);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=t.ba()?0:1:!a.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function HA(n,t){const e=At(n);let i=!1;for(const s of t){const a=s.query,u=e.queries.get(a);if(u){for(const h of u.wa)h.Ca(s)&&(i=!0);u.ya=s}}i&&Jh(e)}function $A(n,t,e){const i=At(n),s=i.queries.get(t);if(s)for(const a of s.wa)a.onError(e);i.queries.delete(t)}function Jh(n){n.Da.forEach(t=>{t.next()})}var zc,Pp;(Pp=zc||(zc={})).Fa="default",Pp.Cache="cache";class qA{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new js(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=js.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==zc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t){this.key=t}}class Xg{constructor(t){this.key=t}}class WA{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ft(),this.mutatedKeys=Ft(),this.Xa=gg(t),this.eu=new Os(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new Ip,s=e?e.eu:this.eu;let a=e?e.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((v,w)=>{const E=s.get(v),x=Tu(this.query,w)?w:null,F=!!E&&this.mutatedKeys.has(E.key),z=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let W=!1;E&&x?E.data.isEqual(x.data)?F!==z&&(i.track({type:3,doc:x}),W=!0):this.iu(E,x)||(i.track({type:2,doc:x}),W=!0,(d&&this.Xa(x,d)>0||g&&this.Xa(x,g)<0)&&(h=!0)):!E&&x?(i.track({type:0,doc:x}),W=!0):E&&!x&&(i.track({type:1,doc:E}),W=!0,(d||g)&&(h=!0)),W&&(x?(u=u.add(x),a=z?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:h,mutatedKeys:a}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const a=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const u=t.ru.pa();u.sort((v,w)=>function(x,F){const z=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{At:W})}};return z(x)-z(F)}(v.type,w.type)||this.Xa(v.doc,w.doc)),this.su(i),s=s!=null&&s;const h=e&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,g=d!==this.Ya;return this.Ya=d,u.length!==0||g?{snapshot:new js(this.query,t.eu,a,u,t.mutatedKeys,d===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ip,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Ft(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new Xg(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new Jg(i))}),e}uu(t){this.Ha=t.qs,this.Za=Ft();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return js.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Xh="SyncEngine";class ZA{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class GA{constructor(t){this.key=t,this.lu=!1}}class KA{constructor(t,e,i,s,a,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new qr(h=>_g(h),wu),this.Tu=new Map,this.Iu=new Set,this.du=new le(dt.comparator),this.Eu=new Map,this.Au=new zh,this.Ru={},this.Vu=new Map,this.mu=zs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QA(n,t,e=!0){const i=rv(n);let s;const a=i.Pu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await Yg(i,t,e,!0),s}async function JA(n,t){const e=rv(n);await Yg(e,t,!0,!1)}async function Yg(n,t,e,i){const s=await pA(n.localStore,Qn(t)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,e);let h;return i&&(h=await XA(n,t,a,u==="current",s.resumeToken)),n.isPrimaryClient&&e&&qg(n.remoteStore,s),h}async function XA(n,t,e,i,s){n.gu=(w,E,x)=>async function(z,W,ot,at){let it=W.view.nu(ot);it.Ds&&(it=await gp(z.localStore,W.query,!1).then(({documents:O})=>W.view.nu(O,it)));const et=at&&at.targetChanges.get(W.targetId),yt=at&&at.targetMismatches.get(W.targetId)!=null,Bt=W.view.applyChanges(it,z.isPrimaryClient,et,yt);return Sp(z,W.targetId,Bt._u),Bt.snapshot}(n,w,E,x);const a=await gp(n.localStore,t,!0),u=new WA(t,a.qs),h=u.nu(a.documents),d=Ta.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=u.applyChanges(h,n.isPrimaryClient,d);Sp(n,e,g._u);const v=new ZA(t,e,u);return n.Pu.set(t,v),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),g.snapshot}async function YA(n,t,e){const i=At(n),s=i.Pu.get(t),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter(u=>!wu(u,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Bc(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&qh(i.remoteStore,s.targetId),jc(i,s.targetId)}).catch(Zs)):(jc(i,s.targetId),await Bc(i.localStore,s.targetId,!0))}async function tS(n,t){const e=At(n),i=e.Pu.get(t),s=e.Tu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),qh(e.remoteStore,i.targetId))}async function eS(n,t,e){const i=lS(n);try{const s=await function(u,h){const d=At(u),g=ne.now(),v=h.reduce((x,F)=>x.add(F.key),Ft());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let F=Li(),z=Ft();return d.Os.getEntries(x,v).next(W=>{F=W,F.forEach((ot,at)=>{at.isValidDocument()||(z=z.add(ot))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,F)).next(W=>{w=W;const ot=[];for(const at of h){const it=pP(at,w.get(at.key).overlayedDocument);it!=null&&ot.push(new Wr(at.key,it,lg(it.value.mapValue),bi.exists(!0)))}return d.mutationQueue.addMutationBatch(x,g,ot,h)}).next(W=>{E=W;const ot=W.applyToLocalDocumentSet(w,z);return d.documentOverlayCache.saveOverlays(x,W.batchId,ot)})}).then(()=>({batchId:E.batchId,changes:yg(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let g=u.Ru[u.currentUser.toKey()];g||(g=new le(xt)),g=g.insert(h,d),u.Ru[u.currentUser.toKey()]=g}(i,s.batchId,e),await Ia(i,s.changes),await Su(i.remoteStore)}catch(s){const a=Qh(s,"Failed to persist write");e.reject(a)}}async function tv(n,t){const e=At(n);try{const i=await hA(e.localStore,t);t.targetChanges.forEach((s,a)=>{const u=e.Eu.get(a);u&&(Zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?Zt(u.lu,14607):s.removedDocuments.size>0&&(Zt(u.lu,42227),u.lu=!1))}),await Ia(e,i,t)}catch(i){await Zs(i)}}function Ap(n,t,e){const i=At(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Pu.forEach((a,u)=>{const h=u.view.va(t);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=At(u);d.onlineState=h;let g=!1;d.queries.forEach((v,w)=>{for(const E of w.wa)E.va(h)&&(g=!0)}),g&&Jh(d)}(i.eventManager,t),s.length&&i.hu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function nS(n,t,e){const i=At(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Eu.get(t),a=s&&s.key;if(a){let u=new le(dt.comparator);u=u.insert(a,ze.newNoDocument(a,bt.min()));const h=Ft().add(a),d=new bu(bt.min(),new Map,new le(xt),u,h);await tv(i,d),i.du=i.du.remove(a),i.Eu.delete(t),Yh(i)}else await Bc(i.localStore,t,!1).then(()=>jc(i,t,e)).catch(Zs)}async function iS(n,t){const e=At(n),i=t.batch.batchId;try{const s=await cA(e.localStore,t);nv(e,i,null),ev(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ia(e,s)}catch(s){await Zs(s)}}async function rS(n,t,e){const i=At(n);try{const s=await function(u,h){const d=At(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return d.mutationQueue.lookupMutationBatch(g,h).next(w=>(Zt(w!==null,37113),v=w.keys(),d.mutationQueue.removeMutationBatch(g,w))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>d.localDocuments.getDocuments(g,v))})}(i.localStore,t);nv(i,t,e),ev(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ia(i,s)}catch(s){await Zs(s)}}function ev(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function nv(n,t,e){const i=At(n);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),i.Ru[i.currentUser.toKey()]=s}}function jc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||iv(n,i)})}function iv(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(qh(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),Yh(n))}function Sp(n,t,e){for(const i of e)i instanceof Jg?(n.Au.addReference(i.key,t),sS(n,i)):i instanceof Xg?(st(Xh,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||iv(n,i.key)):vt(19791,{yu:i})}function sS(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(st(Xh,"New document in limbo: "+e),n.Iu.add(i),Yh(n))}function Yh(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new dt(te.fromString(t)),i=n.mu.next();n.Eu.set(i,new GA(e)),n.du=n.du.insert(e,i),qg(n.remoteStore,new Ji(Qn(Nh(e.path)),i,"TargetPurposeLimboResolution",gu.ue))}}async function Ia(n,t,e){const i=At(n),s=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{u.push(i.gu(d,t,e).then(g=>{var v;if((g||e)&&i.isPrimaryClient){const w=g?!g.fromCache:(v=e?.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(g){s.push(g);const w=Hh.Es(d.targetId,g);a.push(w)}}))}),await Promise.all(u),i.hu.J_(s),await async function(d,g){const v=At(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>H.forEach(g,E=>H.forEach(E.Is,x=>v.persistence.referenceDelegate.addReference(w,E.targetId,x)).next(()=>H.forEach(E.ds,x=>v.persistence.referenceDelegate.removeReference(w,E.targetId,x)))))}catch(w){if(!Gs(w))throw w;st($h,"Failed to update sequence numbers: "+w)}for(const w of g){const E=w.targetId;if(!w.fromCache){const x=v.Fs.get(E),F=x.snapshotVersion,z=x.withLastLimboFreeSnapshotVersion(F);v.Fs=v.Fs.insert(E,z)}}}(i.localStore,a))}async function oS(n,t){const e=At(n);if(!e.currentUser.isEqual(t)){st(Xh,"User change. New user:",t.toKey());const i=await zg(e.localStore,t);e.currentUser=t,function(a,u){a.Vu.forEach(h=>{h.forEach(d=>{d.reject(new lt(j.CANCELLED,u))})}),a.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ia(e,i.Bs)}}function aS(n,t){const e=At(n),i=e.Eu.get(t);if(i&&i.lu)return Ft().add(i.key);{let s=Ft();const a=e.Tu.get(t);if(!a)return s;for(const u of a){const h=e.Pu.get(u);s=s.unionWith(h.view.tu)}return s}}function rv(n){const t=At(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=tv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nS.bind(null,t),t.hu.J_=HA.bind(null,t.eventManager),t.hu.pu=$A.bind(null,t.eventManager),t}function lS(n){const t=At(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rS.bind(null,t),t}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return uA(this.persistence,new oA,t.initialUser,this.serializer)}Du(t){return new Ug(jh.Vi,this.serializer)}bu(t){return new _A}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class uS extends Xl{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Zt(this.persistence.referenceDelegate instanceof Ql,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qP(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Ug(i=>Ql.Vi(i,e),this.serializer)}}class Hc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ap(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oS.bind(null,this.syncEngine),await FA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UA}()}createDatastore(t){const e=Pu(t.databaseInfo.databaseId),i=function(a){return new TA(a)}(t.databaseInfo);return function(a,u,h,d){return new PA(a,u,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,a,u,h){return new SA(i,s,a,u,h)}(this.localStore,this.datastore,t.asyncQueue,e=>Ap(this.syncEngine,e,0),function(){return wp.C()?new wp:new gA}())}createSyncEngine(t,e){return function(s,a,u,h,d,g,v){const w=new KA(s,a,u,h,d,g);return v&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const a=At(s);st(jr,"RemoteStore shutting down."),a.Ia.add(5),await Ea(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Hc.provider={build:()=>new Hc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):xi("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class hS{constructor(t,e,i,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=Be.UNAUTHENTICATED,this.clientId=xh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{st(hr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(st(hr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Qh(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function rc(n,t){n.asyncQueue.verifyOperationInProgress(),st(hr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await zg(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>{sr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{st("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{sr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=t}async function Cp(n,t){n.asyncQueue.verifyOperationInProgress();const e=await fS(n);st(hr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Ep(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Ep(t.remoteStore,s)),n._onlineComponents=t}async function fS(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){st(hr,"Using user provided OfflineComponentProvider");try{await rc(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;sr("Error using user provided cache. Falling back to memory cache: "+e),await rc(n,new Xl)}}else st(hr,"Using default OfflineComponentProvider"),await rc(n,new uS(void 0));return n._offlineComponents}async function sv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(st(hr,"Using user provided OnlineComponentProvider"),await Cp(n,n._uninitializedComponentsProvider._online)):(st(hr,"Using default OnlineComponentProvider"),await Cp(n,new Hc))),n._onlineComponents}function dS(n){return sv(n).then(t=>t.syncEngine)}async function Rp(n){const t=await sv(n),e=t.eventManager;return e.onListen=QA.bind(null,t.syncEngine),e.onUnlisten=YA.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=JA.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=tS.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="firestore.googleapis.com",Lp=!0;class kp{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new lt(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=av,this.ssl=Lp}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Lp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Bg;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<HP)throw new lt(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Cb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ov((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new lt(j.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new lt(j.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new lt(j.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cu{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kp(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new yb;switch(i.type){case"firstParty":return new Ib(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new lt(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=xp.get(e);i&&(st("ComponentProvider","Removing Datastore"),xp.delete(e),i.terminate())}(this),Promise.resolve()}}function pS(n,t,e,i={}){var s;n=Wo(n,Cu);const a=Hs(t),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;a&&(Ym(`https://${d}`),t_("Firestore",!0)),u.host!==av&&u.host!==d&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:d,ssl:a,emulatorOptions:i});if(!Fr(g,h)&&(n._setSettings(g),i.mockUserToken)){let v,w;if(typeof i.mockUserToken=="string")v=i.mockUserToken,w=Be.MOCK_USER;else{v=MT(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new lt(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Be(E)}n._authCredentials=new wb(new K_(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Qs(this.firestore,t,this._query)}}class Ie{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ie(this.firestore,t,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(va(e,Ie._jsonSchema))return new Ie(t,i||null,new dt(te.fromString(e.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:we("string",Ie._jsonSchemaVersion),referencePath:we("string")};class ir extends Qs{constructor(t,e,i){super(t,e,Nh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ie(this.firestore,null,new dt(t))}withConverter(t){return new ir(this.firestore,t,this._path)}}function lv(n,t,...e){if(n=Je(n),J_("collection","path",t),n instanceof Cu){const i=te.fromString(t,...e);return $d(i),new ir(n,null,i)}{if(!(n instanceof Ie||n instanceof ir))throw new lt(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(te.fromString(t,...e));return $d(i),new ir(n.firestore,null,i)}}function mS(n,t,...e){if(n=Je(n),arguments.length===1&&(t=xh.newId()),J_("doc","path",t),n instanceof Cu){const i=te.fromString(t,...e);return Hd(i),new Ie(n,null,new dt(i))}{if(!(n instanceof Ie||n instanceof ir))throw new lt(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(te.fromString(t,...e));return Hd(i),new Ie(n.firestore,n instanceof ir?n.converter:null,new dt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="AsyncQueue";class Mp{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Hg(this,"async_queue_retry"),this.oc=()=>{const i=ic();i&&st(Op,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=ic();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=ic();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new Dr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Gs(t))throw t;st(Op,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",Dp(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const s=Kh.createAndSchedule(this,t,e,i,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&vt(47125,{hc:Dp(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function Dp(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Yl extends Cu{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new Mp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Mp(t),this._firestoreClient=void 0,await t}}}function _S(n,t){const e=typeof n=="object"?n:r_(),i=typeof n=="string"?n:Hl,s=_h(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=kT("firestore");a&&pS(s,...a)}return s}function uv(n){if(n._terminated)throw new lt(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gS(n),n._firestoreClient}function gS(n){var t,e,i;const s=n._freezeSettings(),a=function(h,d,g,v){return new Bb(h,d,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ov(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new hS(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this._byteString=t}static fromBase64String(t){try{return new In(De.fromBase64String(t))}catch(e){throw new lt(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new In(De.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(va(t,In._jsonSchema))return In.fromBase64String(t.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:we("string",In._jsonSchemaVersion),bytes:we("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new lt(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new lt(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new lt(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(t){if(va(t,Xn._jsonSchema))return new Xn(t.latitude,t.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:we("string",Xn._jsonSchemaVersion),latitude:we("number"),longitude:we("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Yn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(va(t,Yn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Yn(t.vectorValues);throw new lt(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yn._jsonSchemaVersion="firestore/vectorValue/1.0",Yn._jsonSchema={type:we("string",Yn._jsonSchemaVersion),vectorValues:we("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=/^__.*__$/;class yS{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Wr(t,this.data,this.fieldMask,e,this.fieldTransforms):new wa(t,this.data,e,this.fieldTransforms)}}function hv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ec:n})}}class ef{constructor(t,e,i,s,a,u){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new ef(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.fc(t),s}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return tu(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(hv(this.Ec)&&vS.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class wS{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Pu(t)}Dc(t,e,i,s=!1){return new ef({Ec:t,methodName:e,bc:i,path:Oe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fv(n){const t=n._freezeSettings(),e=Pu(n._databaseId);return new wS(n._databaseId,!!t.ignoreUndefinedProperties,e)}function TS(n,t,e,i,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,t,e,s);mv("Data must be an object, but it was:",u,i);const h=dv(i,u);let d,g;if(a.merge)d=new Mn(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const E=IS(t,w,e);if(!u.contains(E))throw new lt(j.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);PS(v,E)||v.push(E)}d=new Mn(v),g=u.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,g=u.fieldTransforms;return new yS(new En(h),d,g)}function ES(n,t,e,i=!1){return nf(e,n.Dc(i?4:3,t))}function nf(n,t){if(pv(n=Je(n)))return mv("Unsupported field value:",t,n),dv(n,t);if(n instanceof cv)return function(i,s){if(!hv(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,s){const a=[];let u=0;for(const h of i){let d=nf(h,s.yc(u));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),u++}return{arrayValue:{values:a}}}(n,t)}return function(i,s){if((i=Je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lP(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ne.fromDate(i);return{timestampValue:Kl(s.serializer,a)}}if(i instanceof ne){const a=new ne(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kl(s.serializer,a)}}if(i instanceof Xn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof In)return{bytesValue:kg(s.serializer,i._byteString)};if(i instanceof Ie){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Uh(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Yn)return function(u,h){return{mapValue:{fields:{[og]:{stringValue:ag},[$l]:{arrayValue:{values:u.toArray().map(g=>{if(typeof g!="number")throw h.wc("VectorValues must only contain numeric values.");return Vh(h.serializer,g)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${_u(i)}`)}(n,t)}function dv(n,t){const e={};return tg(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(n,(i,s)=>{const a=nf(s,t.Vc(i));a!=null&&(e[i]=a)}),{mapValue:{fields:e}}}function pv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ne||n instanceof Xn||n instanceof In||n instanceof Ie||n instanceof cv||n instanceof Yn)}function mv(n,t,e){if(!pv(e)||!X_(e)){const i=_u(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function IS(n,t,e){if((t=Je(t))instanceof tf)return t._internalPath;if(typeof t=="string")return _v(n,t);throw tu("Field path arguments must be of type string or ",n,!1,void 0,e)}const bS=new RegExp("[~\\*/\\[\\]]");function _v(n,t,e){if(t.search(bS)>=0)throw tu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new tf(...t.split("."))._internalPath}catch{throw tu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function tu(n,t,e,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(a||u)&&(d+=" (found",a&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new lt(j.INVALID_ARGUMENT,h+n+d)}function PS(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t,e,i,s,a){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new AS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(vv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class AS extends gv{data(){return super.data()}}function vv(n,t){return typeof t=="string"?_v(n,t):t instanceof tf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new lt(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rf{}class CS extends rf{}function RS(n,t,...e){let i=[];t instanceof rf&&i.push(t),i=i.concat(e),function(a){const u=a.filter(d=>d instanceof of).length,h=a.filter(d=>d instanceof sf).length;if(u>1||u>0&&h>0)throw new lt(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class sf extends CS{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new sf(t,e,i)}_apply(t){const e=this._parse(t);return yv(t._query,e),new Qs(t.firestore,t.converter,Oc(t._query,e))}_parse(t){const e=fv(t.firestore);return function(a,u,h,d,g,v,w){let E;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new lt(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Fp(w,v);const F=[];for(const z of w)F.push(Vp(d,a,z));E={arrayValue:{values:F}}}else E=Vp(d,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Fp(w,v),E=ES(h,u,w,v==="in"||v==="not-in");return ye.create(g,v,E)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class of extends rf{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new of(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Fn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,a){let u=s;const h=a.getFlattenedFilters();for(const d of h)yv(u,d),u=Oc(u,d)}(t._query,e),new Qs(t.firestore,t.converter,Oc(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vp(n,t,e){if(typeof(e=Je(e))=="string"){if(e==="")throw new lt(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mg(t)&&e.indexOf("/")!==-1)throw new lt(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(te.fromString(e));if(!dt.isDocumentKey(i))throw new lt(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xd(n,new dt(i))}if(e instanceof Ie)return Xd(n,e._key);throw new lt(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_u(e)}.`)}function Fp(n,t){if(!Array.isArray(n)||n.length===0)throw new lt(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yv(n,t){const e=function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new lt(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new lt(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class xS{convertValue(t,e="none"){switch(ur(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return $r(t,(s,a)=>{i[s]=this.convertValue(a,e)}),i}convertVectorValue(t){var e,i,s;const a=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[$l].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(u=>fe(u.doubleValue));return new Yn(a)}convertGeoPoint(t){return new Xn(fe(t.latitude),fe(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=yu(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(sa(t));default:return null}}convertTimestamp(t){const e=ar(t);return new ne(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=te.fromString(t);Zt(Fg(i),9688,{name:t});const s=new oa(i.get(1),i.get(3)),a=new dt(i.popFirst(5));return s.isEqual(e)||xi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class No{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Nr extends gv{constructor(t,e,i,s,a,u){super(t,e,i,s,u),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(vv("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Nr._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Nr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nr._jsonSchema={type:we("string",Nr._jsonSchemaVersion),bundleSource:we("string","DocumentSnapshot"),bundleName:we("string"),bundle:we("string")};class Al extends Nr{data(t={}){return super.data(t)}}class Ms{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new No(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Al(this._firestore,this._userDataWriter,i.key,i,new No(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new lt(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new Al(s._firestore,s._userDataWriter,h.doc.key,h.doc,new No(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const d=new Al(s._firestore,s._userDataWriter,h.doc.key,h.doc,new No(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:kS(h.type),doc:d,oldIndex:g,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ms._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=xh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:n})}}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:we("string",Ms._jsonSchemaVersion),bundleSource:we("string","QuerySnapshot"),bundleName:we("string"),bundle:we("string")};class wv extends xS{constructor(t){super(),this.firestore=t}convertBytes(t){return new In(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ie(this.firestore,null,e)}}function OS(n,t){const e=Wo(n.firestore,Yl),i=mS(n),s=LS(n.converter,t);return DS(e,[TS(fv(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,bi.exists(!1))]).then(()=>i)}function MS(n,...t){var e,i,s;n=Je(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof t[u]!="object"||Np(t[u])||(a=t[u++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Np(t[u])){const w=t[u];t[u]=(e=w.next)===null||e===void 0?void 0:e.bind(w),t[u+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),t[u+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let d,g,v;if(n instanceof Ie)g=Wo(n.firestore,Yl),v=Nh(n._key.path),d={next:w=>{t[u]&&t[u](NS(g,n,w))},error:t[u+1],complete:t[u+2]};else{const w=Wo(n,Qs);g=Wo(w.firestore,Yl),v=w._query;const E=new wv(g);d={next:x=>{t[u]&&t[u](new Ms(g,E,w,x))},error:t[u+1],complete:t[u+2]},SS(n._query)}return function(E,x,F,z){const W=new cS(z),ot=new qA(x,W,F);return E.asyncQueue.enqueueAndForget(async()=>zA(await Rp(E),ot)),()=>{W.Ou(),E.asyncQueue.enqueueAndForget(async()=>jA(await Rp(E),ot))}}(uv(g),v,h,d)}function DS(n,t){return function(i,s){const a=new Dr;return i.asyncQueue.enqueueAndForget(async()=>eS(await dS(i),s,a)),a.promise}(uv(n),t)}function NS(n,t,e){const i=e.docs.get(t._key),s=new wv(n);return new Nr(n,s,t._key,i,new No(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){Ws=s})($s),Ns(new Br("firestore",(i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),h=new Yl(new Tb(i.getProvider("auth-internal")),new bb(u,i.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new lt(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(g.options.projectId,v)}(u,s),u);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),er(Fd,Bd,t),er(Fd,Bd,"esm2017")})();const VS={apiKey:"AIzaSyBlICbGfC-jp2xW8_OoEs8PgQCQ4_2ktwk",authDomain:"worldmap-2025.firebaseapp.com",projectId:"worldmap-2025",storageBucket:"worldmap-2025.firebasestorage.app",messagingSenderId:"302454928180",appId:"1:302454928180:web:dfd77829f27cbbebe0eb61"},Tv=i_(VS),Sl=sb(Tv),Ev=_S(Tv),FS=Ch("auth",()=>{const n=bn(null),t=bn(!0),e=dh(()=>!!n.value),i=async()=>{const a=new Ti;await p0(Sl,a)},s=async()=>{await GI(Sl)};return A_(Sl,a=>{n.value=a,t.value=!1}),{user:n,isLoggedIn:e,loading:t,login:i,logout:s}}),BS=Ch("map",()=>{const n=bn(null),t=bn([]);return{map:n,setMap:s=>{n.value=s},markers:t,setMarkers:s=>{t.value=s}}}),Iv=Ch("markers",()=>{const n=bn([]),t=bn(null);return{markers:n,listenToUserMarkers:i=>{t.value&&t.value();const s=RS(lv(Ev,`users/${i}/markers`));t.value=MS(s,a=>{n.value=a.docs.map(u=>{const h=u.data();return{id:u.id,x:h.x,y:h.y,label:h.label}})})}}}),bv=Symbol("IconoirProvider"),Pv=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e},US=ha({setup(){return{context:kr(bv)}}});function zS(n,t,e,i,s,a){return Fe(),vi("svg",fh({width:"24",height:"24","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.context),t[0]||(t[0]=[xe("path",{d:"M16 9.2C16 13.1765 9 20 9 20C9 20 2 13.1765 2 9.2C2 5.22355 5.13401 2 9 2C12.866 2 16 5.22355 16 9.2Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),xe("path",{d:"M9 10C9.55228 10 10 9.55228 10 9C10 8.44772 9.55228 8 9 8C8.44772 8 8 8.44772 8 9C8 9.55228 8.44772 10 9 10Z",fill:"currentColor",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),xe("path",{d:"M16 19H19M22 19H19M19 19V16M19 19V22",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),16)}const Bp=Pv(US,[["render",zS]]),jS=ha({setup(){return{context:kr(bv)}}});function HS(n,t,e,i,s,a){return Fe(),vi("svg",fh({width:"24",height:"24","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.context),t[0]||(t[0]=[xe("path",{d:"M6.75827 17.2426L12.0009 12M17.2435 6.75736L12.0009 12M12.0009 12L6.75827 6.75736M12.0009 12L17.2435 17.2426",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),16)}const Up=Pv(jS,[["render",HS]]),$S={class:"dialog-container"},qS={class:"dialog-header"},WS={class:"dialog-content"},ZS={class:"dialog-footer"},GS=ha({__name:"BaseDialog",emits:["close"],setup(n,{emit:t}){const e=t;return(i,s)=>(Fe(),vi("div",{class:"overlay",onClick:s[0]||(s[0]=vT(a=>e("close"),["self"]))},[xe("div",$S,[xe("header",qS,[il(i.$slots,"title",{},void 0)]),xe("div",WS,[il(i.$slots,"content",{},void 0)]),xe("footer",ZS,[il(i.$slots,"footer",{},void 0)]),il(i.$slots,"default",{},void 0)])]))}}),af=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e},KS=af(GS,[["__scopeId","data-v-1ccc6ea8"]]),QS={class:"auth-container"},JS=["src"],XS={key:0,class:"actions-container"},YS={key:2},tC={key:3},eC=["disabled"],nC=ha({__name:"MapView",setup(n){const t=FS(),e=BS(),i=Iv(),s=bn(null),a=bn(!1),u=bn(null),h=bn(""),d=new Map;Cw(()=>{const w=e.map;if(!w)return;const E=new Set(i.markers.map(x=>x.id));for(const[x,F]of d.entries())E.has(x)||(w.removeLayer(F),d.delete(x));i.markers.forEach(x=>{if(!d.has(x.id)){const F=sl.marker([x.y,x.x]).addTo(w).bindPopup(x.label||"Senza nome");d.set(x.id,F)}})}),Im(()=>{const x=[[0,0],[1632,2192]];if(s.value){const F=sl.map(s.value,{crs:sl.CRS.Simple,minZoom:0,maxZoom:2,zoomSnap:.5,zoomDelta:.5,center:[816,1096],zoom:0,maxBounds:x});e.map=F,sl.imageOverlay("/images/world.png",x).addTo(F),F.fitBounds(x),F.attributionControl.remove(),F.zoomControl.setPosition("bottomleft"),F.on("click",z=>{if(!a.value)return;const W={x:z.latlng.lng,y:z.latlng.lat};u.value=W,a.value=!1,console.log("Coordinate selezionate:",W)})}});function g(){a.value?a.value=!1:(a.value=!0,u.value=null)}async function v(){if(!(!t.user||!u.value||!h.value.trim()))try{const w=lv(Ev,`users/${t.user.uid}/markers`);await OS(w,{x:u.value.x,y:u.value.y,label:h.value.trim(),createdAt:new Date}),u.value=null,h.value="",a.value=!1}catch(w){console.error("Errore nel salvataggio del marker:",w)}}return(w,E)=>(Fe(),vi(hn,null,[xe("div",QS,[un(t).isLoggedIn?(Fe(),vi("button",{key:1,class:"auth-button icon-button",onClick:E[1]||(E[1]=(...x)=>un(t).logout&&un(t).logout(...x))},[xe("img",{src:un(t).user?.photoURL??void 0,alt:""},null,8,JS),Lo(" Logout "+fl(un(t).user?.displayName),1)])):(Fe(),vi("button",{key:0,class:"auth-button",onClick:E[0]||(E[0]=(...x)=>un(t).login&&un(t).login(...x))},"Login con Google"))]),un(t).isLoggedIn?(Fe(),vi("div",XS,[xe("button",{class:"icon-button",onClick:g},[a.value?(Fe(),Or(un(Up),{key:1})):(Fe(),Or(un(Bp),{key:0})),a.value?(Fe(),vi("span",tC,"Seleziona sulla mappa o Annulla")):(Fe(),vi("span",YS,"Aggiungi posizione"))])])):Hf("",!0),xe("div",{ref_key:"mapContainer",ref:s,class:"map-container"},null,512),u.value?(Fe(),Or(KS,{key:1,onClose:E[4]||(E[4]=x=>u.value=null)},{title:dl(()=>[Lo("Nuova località in X: "+fl(u.value.x.toFixed(0))+" Y: "+fl(u.value.y.toFixed(0)),1)]),content:dl(()=>[E[5]||(E[5]=xe("p",null,"Compila i dati per creare un nuovo punto di interesse sulla mappa.",-1)),qy(xe("input",{class:"dialog-input","onUpdate:modelValue":E[2]||(E[2]=x=>h.value=x),placeholder:"Nome del luogo"},null,512),[[mT,h.value]])]),footer:dl(()=>[xe("button",{class:"icon-button",onClick:E[3]||(E[3]=x=>u.value=null)},[Pn(un(Up)),E[6]||(E[6]=Lo(" Annulla "))]),xe("button",{disabled:!h.value,onClick:v,class:"icon-button"},[Pn(un(Bp)),E[7]||(E[7]=Lo(" Aggiungi "))],8,eC)]),_:1})):Hf("",!0)],64))}}),iC=af(nC,[["__scopeId","data-v-008b22a7"]]),rC=ha({__name:"App",setup(n){const t=Iv();return A_(Sl,e=>{e&&t.listenToUserMarkers(e.uid)}),(e,i)=>(Fe(),Or(iC))}}),sC=af(rC,[["__scopeId","data-v-31c23070"]]),Av=TT(sC);Av.use(hb());Av.mount("#app");
